"use strict";(self.webpackChunkangular_tour_of_heroes_luginbuv=self.webpackChunkangular_tour_of_heroes_luginbuv||[]).push([[179],{6304:(ot,ve,R)=>{R.d(ve,{Dh:()=>Ce,cc:()=>we,hO:()=>Ne,on:()=>V,xv:()=>ce});var p=R(4946),z=R(7142),B=R(8186);ot=R.hmd(ot);class fe{constructor(ft){return ft}}const Ce=new p.OlP("angularfire2.app.options"),ce=new p.OlP("angularfire2.app.name");function V(Ae,ft,ct){const Ie="object"==typeof ct&&ct||{};Ie.name=Ie.name||"string"==typeof ct&&ct||"[DEFAULT]";const ke=z.Z.apps.filter(xe=>xe&&xe.name===Ie.name)[0]||ft.runOutsideAngular(()=>z.Z.initializeApp(Ae,Ie));try{JSON.stringify(Ae)!==JSON.stringify(ke.options)&&F("error",`${ke.name} Firebase App already initialized with different options${ot.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new fe(ke)}const F=(Ae,...ft)=>{(0,p.X6Q)()&&typeof console<"u"&&console[Ae](...ft)},J={provide:fe,useFactory:V,deps:[Ce,p.R0b,[new p.FiY,ce]]};let Ne=(()=>{class Ae{constructor(ct){z.Z.registerVersion("angularfire",B.q4.full,"core"),z.Z.registerVersion("angularfire",B.q4.full,"app-compat"),z.Z.registerVersion("angular",p.q4F.full,ct.toString())}static initializeApp(ct,ue){return{ngModule:Ae,providers:[{provide:Ce,useValue:ct},{provide:ce,useValue:ue}]}}}return Ae.\u0275fac=function(ct){return new(ct||Ae)(p.LFG(p.Lbi))},Ae.\u0275mod=p.oAB({type:Ae}),Ae.\u0275inj=p.cJS({providers:[J]}),Ae})();function we(Ae,ft,ct,ue,Ie){const[,he,ke]=globalThis.\u0275AngularfireInstanceCache.find(xe=>xe[0]===Ae)||[];if(he)return function Ke(Ae,ft){try{return Ae.toString()===ft.toString()}catch{return Ae===ft}}(Ie,ke)||(ze("error",`${ft} was already initialized on the ${ct} Firebase App with different settings.${at?" You may need to reload as Firebase is not HMR aware.":""}`),ze("warn",{is:Ie,was:ke})),he;{const xe=ue();return globalThis.\u0275AngularfireInstanceCache.push([Ae,xe,Ie]),xe}}const at=!!ot.hot,ze=(Ae,...ft)=>{(0,p.X6Q)()&&typeof console<"u"&&console[Ae](...ft)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},8186:(ot,ve,R)=>{R.d(ve,{q4:()=>wc,iC:()=>ol,fc:()=>ma,HU:()=>pa,vb:()=>Ei,JM:()=>rl,u3:()=>Cc});var p=R(4946),z=R(3182),B=R(5861),Q=R(534),K=R(9058),de=R(4537),fe=R(7879);const Ce=(v,E)=>E.some(T=>v instanceof T);let ce,V;const Ne=new WeakMap,we=new WeakMap,Ke=new WeakMap,at=new WeakMap,ze=new WeakMap;let ct={get(v,E,T){if(v instanceof IDBTransaction){if("done"===E)return we.get(v);if("objectStoreNames"===E)return v.objectStoreNames||Ke.get(v);if("store"===E)return T.objectStoreNames[1]?void 0:T.objectStore(T.objectStoreNames[0])}return ke(v[E])},set:(v,E,T)=>(v[E]=T,!0),has:(v,E)=>v instanceof IDBTransaction&&("done"===E||"store"===E)||E in v};function he(v){return"function"==typeof v?function Ie(v){return v!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function J(){return V||(V=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(v)?function(...E){return v.apply(xe(this),E),ke(Ne.get(this))}:function(...E){return ke(v.apply(xe(this),E))}:function(E,...T){const x=v.call(xe(this),E,...T);return Ke.set(x,E.sort?E.sort():[E]),ke(x)}}(v):(v instanceof IDBTransaction&&function ft(v){if(we.has(v))return;const E=new Promise((T,x)=>{const O=()=>{v.removeEventListener("complete",$),v.removeEventListener("error",re),v.removeEventListener("abort",re)},$=()=>{T(),O()},re=()=>{x(v.error||new DOMException("AbortError","AbortError")),O()};v.addEventListener("complete",$),v.addEventListener("error",re),v.addEventListener("abort",re)});we.set(v,E)}(v),Ce(v,function F(){return ce||(ce=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(v,ct):v)}function ke(v){if(v instanceof IDBRequest)return function Ae(v){const E=new Promise((T,x)=>{const O=()=>{v.removeEventListener("success",$),v.removeEventListener("error",re)},$=()=>{T(ke(v.result)),O()},re=()=>{x(v.error),O()};v.addEventListener("success",$),v.addEventListener("error",re)});return E.then(T=>{T instanceof IDBCursor&&Ne.set(T,v)}).catch(()=>{}),ze.set(E,v),E}(v);if(at.has(v))return at.get(v);const E=he(v);return E!==v&&(at.set(v,E),ze.set(E,v)),E}const xe=v=>ze.get(v),Et=["get","getKey","getAll","getAllKeys","count"],zn=["put","add","delete","clear"],si=new Map;function ai(v,E){if(!(v instanceof IDBDatabase)||E in v||"string"!=typeof E)return;if(si.get(E))return si.get(E);const T=E.replace(/FromIndex$/,""),x=E!==T,O=zn.includes(T);if(!(T in(x?IDBIndex:IDBObjectStore).prototype)||!O&&!Et.includes(T))return;const $=function(){var re=(0,B.Z)(function*(Le,...Me){const Ze=this.transaction(Le,O?"readwrite":"readonly");let ut=Ze.store;return x&&(ut=ut.index(Me.shift())),(yield Promise.all([ut[T](...Me),O&&Ze.done]))[0]});return function(Me){return re.apply(this,arguments)}}();return si.set(E,$),$}!function ue(v){ct=v(ct)}(v=>({...v,get:(E,T,x)=>ai(E,T)||v.get(E,T,x),has:(E,T)=>!!ai(E,T)||v.has(E,T)}));const Ye="@firebase/installations",nr="0.6.4",lt=1e4,Ut=`w:${nr}`,ee="FIS_v2",ie="https://firebaseinstallations.googleapis.com/v1",le=36e5,st=new K.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ht(v){return v instanceof K.ZR&&v.code.includes("request-failed")}function cn({projectId:v}){return`${ie}/projects/${v}/installations`}function pt(v){return{token:v.token,requestStatus:2,expiresIn:ui(v.expiresIn),creationTime:Date.now()}}function Yt(v,E){return En.apply(this,arguments)}function En(){return(En=(0,B.Z)(function*(v,E){const x=(yield E.json()).error;return st.create("request-failed",{requestName:v,serverCode:x.code,serverMessage:x.message,serverStatus:x.status})})).apply(this,arguments)}function _n({apiKey:v}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":v})}function ci(v){return on.apply(this,arguments)}function on(){return(on=(0,B.Z)(function*(v){const E=yield v();return E.status>=500&&E.status<600?v():E})).apply(this,arguments)}function ui(v){return Number(v.replace("s","000"))}function hs(){return(hs=(0,B.Z)(function*({appConfig:v,heartbeatServiceProvider:E},{fid:T}){const x=cn(v),O=_n(v),$=E.getImmediate({optional:!0});if($){const Ze=yield $.getHeartbeatsHeader();Ze&&O.append("x-firebase-client",Ze)}const Le={method:"POST",headers:O,body:JSON.stringify({fid:T,authVersion:ee,appId:v.appId,sdkVersion:Ut})},Me=yield ci(()=>fetch(x,Le));if(Me.ok){const Ze=yield Me.json();return{fid:Ze.fid||T,registrationStatus:2,refreshToken:Ze.refreshToken,authToken:pt(Ze.authToken)}}throw yield Yt("Create Installation",Me)})).apply(this,arguments)}function ea(v){return new Promise(E=>{setTimeout(E,v)})}const yn=/^[cdef][\w-]{21}$/,rr="";function Ot(){try{const v=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(v),v[0]=112+v[0]%16;const T=function wt(v){return function fs(v){return btoa(String.fromCharCode(...v)).replace(/\+/g,"-").replace(/\//g,"_")}(v).substr(0,22)}(v);return yn.test(T)?T:rr}catch{return rr}}function Br(v){return`${v.appName}!${v.appId}`}const Tr=new Map;function li(v,E){const T=Br(v);ps(T,E),function sn(v,E){const T=function Ge(){return!Wi&&"BroadcastChannel"in self&&(Wi=new BroadcastChannel("[Firebase] FID Change"),Wi.onmessage=v=>{ps(v.data.key,v.data.fid)}),Wi}();T&&T.postMessage({key:v,fid:E}),function ms(){0===Tr.size&&Wi&&(Wi.close(),Wi=null)}()}(T,E)}function ps(v,E){const T=Tr.get(v);if(T)for(const x of T)x(E)}let Wi=null;const $o="firebase-installations-database",Qn=1,$r="firebase-installations-store";let ta=null;function an(){return ta||(ta=function Oe(v,E,{blocked:T,upgrade:x,blocking:O,terminated:$}={}){const re=indexedDB.open(v,E),Le=ke(re);return x&&re.addEventListener("upgradeneeded",Me=>{x(ke(re.result),Me.oldVersion,Me.newVersion,ke(re.transaction))}),T&&re.addEventListener("blocked",()=>T()),Le.then(Me=>{$&&Me.addEventListener("close",()=>$()),O&&Me.addEventListener("versionchange",()=>O())}).catch(()=>{}),Le}($o,Qn,{upgrade:(v,E)=>{0===E&&v.createObjectStore($r)}})),ta}function xi(v,E){return yi.apply(this,arguments)}function yi(){return(yi=(0,B.Z)(function*(v,E){const T=Br(v),O=(yield an()).transaction($r,"readwrite"),$=O.objectStore($r),re=yield $.get(T);return yield $.put(E,T),yield O.done,(!re||re.fid!==E.fid)&&li(v,E.fid),E})).apply(this,arguments)}function Mi(v){return Ho.apply(this,arguments)}function Ho(){return(Ho=(0,B.Z)(function*(v){const E=Br(v),x=(yield an()).transaction($r,"readwrite");yield x.objectStore($r).delete(E),yield x.done})).apply(this,arguments)}function Ri(v,E){return _o.apply(this,arguments)}function _o(){return(_o=(0,B.Z)(function*(v,E){const T=Br(v),O=(yield an()).transaction($r,"readwrite"),$=O.objectStore($r),re=yield $.get(T),Le=E(re);return void 0===Le?yield $.delete(T):yield $.put(Le,T),yield O.done,Le&&(!re||re.fid!==Le.fid)&&li(v,Le.fid),Le})).apply(this,arguments)}function P(v){return k.apply(this,arguments)}function k(){return k=(0,B.Z)(function*(v){let E;const T=yield Ri(v.appConfig,x=>{const O=function j(v){return xn(v||{fid:Ot(),registrationStatus:0})}(x),$=function pe(v,E){if(0===E.registrationStatus){if(!navigator.onLine)return{installationEntry:E,registrationPromise:Promise.reject(st.create("app-offline"))};const T={fid:E.fid,registrationStatus:1,registrationTime:Date.now()},x=function Y(v,E){return Xe.apply(this,arguments)}(v,T);return{installationEntry:T,registrationPromise:x}}return 1===E.registrationStatus?{installationEntry:E,registrationPromise:_t(v)}:{installationEntry:E}}(v,O);return E=$.registrationPromise,$.installationEntry});return T.fid===rr?{installationEntry:yield E}:{installationEntry:T,registrationPromise:E}}),k.apply(this,arguments)}function Xe(){return Xe=(0,B.Z)(function*(v,E){try{const T=yield function dt(v,E){return hs.apply(this,arguments)}(v,E);return xi(v.appConfig,T)}catch(T){throw Ht(T)&&409===T.customData.serverCode?yield Mi(v.appConfig):yield xi(v.appConfig,{fid:E.fid,registrationStatus:0}),T}}),Xe.apply(this,arguments)}function _t(v){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,B.Z)(function*(v){let E=yield Xn(v.appConfig);for(;1===E.registrationStatus;)yield ea(100),E=yield Xn(v.appConfig);if(0===E.registrationStatus){const{installationEntry:T,registrationPromise:x}=yield P(v);return x||T}return E})).apply(this,arguments)}function Xn(v){return Ri(v,E=>{if(!E)throw st.create("installation-not-found");return xn(E)})}function xn(v){return function Hr(v){return 1===v.registrationStatus&&v.registrationTime+lt<Date.now()}(v)?{fid:v.fid,registrationStatus:0}:v}function Cr(){return(Cr=(0,B.Z)(function*({appConfig:v,heartbeatServiceProvider:E},T){const x=function Ni(v,{fid:E}){return`${cn(v)}/${E}/authTokens:generate`}(v,T),O=function hr(v,{refreshToken:E}){const T=_n(v);return T.append("Authorization",function An(v){return`${ee} ${v}`}(E)),T}(v,T),$=E.getImmediate({optional:!0});if($){const Ze=yield $.getHeartbeatsHeader();Ze&&O.append("x-firebase-client",Ze)}const Le={method:"POST",headers:O,body:JSON.stringify({installation:{sdkVersion:Ut,appId:v.appId}})},Me=yield ci(()=>fetch(x,Le));if(Me.ok)return pt(yield Me.json());throw yield Yt("Generate Auth Token",Me)})).apply(this,arguments)}function di(v){return ec.apply(this,arguments)}function ec(){return ec=(0,B.Z)(function*(v,E=!1){let T;const x=yield Ri(v.appConfig,$=>{if(!Dt($))throw st.create("not-registered");const re=$.authToken;if(!E&&function Kt(v){return 2===v.requestStatus&&!function Mn(v){const E=Date.now();return E<v.creationTime||v.creationTime+v.expiresIn<E+le}(v)}(re))return $;if(1===re.requestStatus)return T=function te(v,E){return G.apply(this,arguments)}(v,E),$;{if(!navigator.onLine)throw st.create("app-offline");const Le=function Gn(v){const E={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},v),{authToken:E})}($);return T=function tt(v,E){return We.apply(this,arguments)}(v,Le),Le}});return T?yield T:x.authToken}),ec.apply(this,arguments)}function G(){return(G=(0,B.Z)(function*(v,E){let T=yield ge(v.appConfig);for(;1===T.authToken.requestStatus;)yield ea(100),T=yield ge(v.appConfig);const x=T.authToken;return 0===x.requestStatus?di(v,E):x})).apply(this,arguments)}function ge(v){return Ri(v,E=>{if(!Dt(E))throw st.create("not-registered");return function gs(v){return 1===v.requestStatus&&v.requestTime+lt<Date.now()}(E.authToken)?Object.assign(Object.assign({},E),{authToken:{requestStatus:0}}):E})}function We(){return We=(0,B.Z)(function*(v,E){try{const T=yield function Bt(v,E){return Cr.apply(this,arguments)}(v,E),x=Object.assign(Object.assign({},E),{authToken:T});return yield xi(v.appConfig,x),T}catch(T){if(!Ht(T)||401!==T.customData.serverCode&&404!==T.customData.serverCode){const x=Object.assign(Object.assign({},E),{authToken:{requestStatus:0}});yield xi(v.appConfig,x)}else yield Mi(v.appConfig);throw T}}),We.apply(this,arguments)}function Dt(v){return void 0!==v&&2===v.registrationStatus}function hi(){return(hi=(0,B.Z)(function*(v){const E=v,{installationEntry:T,registrationPromise:x}=yield P(E);return x?x.catch(console.error):di(E).catch(console.error),T.fid})).apply(this,arguments)}function Ki(){return Ki=(0,B.Z)(function*(v,E=!1){const T=v;return yield function Zi(v){return Lt.apply(this,arguments)}(T),(yield di(T,E)).token}),Ki.apply(this,arguments)}function Lt(){return(Lt=(0,B.Z)(function*(v){const{registrationPromise:E}=yield P(v);E&&(yield E)})).apply(this,arguments)}function _s(v){return st.create("missing-app-config-values",{valueName:v})}const Ud="installations",Cu=v=>{const E=v.getProvider("app").getImmediate(),T=function Tu(v){if(!v||!v.options)throw _s("App Configuration");if(!v.name)throw _s("App Name");const E=["projectId","apiKey","appId"];for(const T of E)if(!v.options[T])throw _s(T);return{appName:v.name,projectId:v.options.projectId,apiKey:v.options.apiKey,appId:v.options.appId}}(E);return{app:E,appConfig:T,heartbeatServiceProvider:(0,Q._getProvider)(E,"heartbeat"),_delete:()=>Promise.resolve()}},Bd=v=>{const E=v.getProvider("app").getImmediate(),T=(0,Q._getProvider)(E,Ud).getImmediate();return{getId:()=>function tc(v){return hi.apply(this,arguments)}(T),getToken:O=>function nc(v){return Ki.apply(this,arguments)}(T,O)}};(function gy(){(0,Q._registerComponent)(new de.wA(Ud,Cu,"PUBLIC")),(0,Q._registerComponent)(new de.wA("installations-internal",Bd,"PRIVATE"))})(),(0,Q.registerVersion)(Ye,nr),(0,Q.registerVersion)(Ye,nr,"esm2017");const Op="@firebase/remote-config",Gr=new K.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class ir{constructor(E,T,x,O){this.client=E,this.storage=T,this.storageCache=x,this.logger=O}isCachedDataFresh(E,T){if(!T)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const x=Date.now()-T,O=x<=E;return this.logger.debug(`Config fetch cache check. Cache age millis: ${x}. Cache max age millis (minimumFetchIntervalMillis setting): ${E}. Is cache hit: ${O}.`),O}fetch(E){var T=this;return(0,B.Z)(function*(){const[x,O]=yield Promise.all([T.storage.getLastSuccessfulFetchTimestampMillis(),T.storage.getLastSuccessfulFetchResponse()]);if(O&&T.isCachedDataFresh(E.cacheMaxAgeMillis,x))return O;E.eTag=O&&O.eTag;const $=yield T.client.fetch(E),re=[T.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===$.status&&re.push(T.storage.setLastSuccessfulFetchResponse($)),yield Promise.all(re),$})()}}function Ar(v=navigator){return v.languages&&v.languages[0]||v.language}class zo{constructor(E,T,x,O,$,re){this.firebaseInstallations=E,this.sdkVersion=T,this.namespace=x,this.projectId=O,this.apiKey=$,this.appId=re}fetch(E){var T=this;return(0,B.Z)(function*(){const[x,O]=yield Promise.all([T.firebaseInstallations.getId(),T.firebaseInstallations.getToken()]),re=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${T.projectId}/namespaces/${T.namespace}:fetch?key=${T.apiKey}`,Le={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":E.eTag||"*"},Me={sdk_version:T.sdkVersion,app_instance_id:x,app_instance_id_token:O,app_id:T.appId,language_code:Ar()},Ze={method:"POST",headers:Le,body:JSON.stringify(Me)},ut=fetch(re,Ze),yt=new Promise((Wr,Kr)=>{E.signal.addEventListener(()=>{const Cs=new Error("The operation was aborted.");Cs.name="AbortError",Kr(Cs)})});let _r;try{yield Promise.race([ut,yt]),_r=yield ut}catch(Wr){let Kr="fetch-client-network";throw"AbortError"===Wr?.name&&(Kr="fetch-timeout"),Gr.create(Kr,{originalErrorMessage:Wr?.message})}let Tn=_r.status;const yh=_r.headers.get("ETag")||void 0;let vh,ya;if(200===_r.status){let Wr;try{Wr=yield _r.json()}catch(Kr){throw Gr.create("fetch-client-parse",{originalErrorMessage:Kr?.message})}vh=Wr.entries,ya=Wr.state}if("INSTANCE_STATE_UNSPECIFIED"===ya?Tn=500:"NO_CHANGE"===ya?Tn=304:("NO_TEMPLATE"===ya||"EMPTY_CONFIG"===ya)&&(vh={}),304!==Tn&&200!==Tn)throw Gr.create("fetch-status",{httpStatus:Tn});return{status:Tn,eTag:yh,config:vh}})()}}class Dy{constructor(E,T){this.client=E,this.storage=T}fetch(E){var T=this;return(0,B.Z)(function*(){const x=(yield T.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return T.attemptFetch(E,x)})()}attemptFetch(E,{throttleEndTimeMillis:T,backoffCount:x}){var O=this;return(0,B.Z)(function*(){yield function Sr(v,E){return new Promise((T,x)=>{const O=Math.max(E-Date.now(),0),$=setTimeout(T,O);v.addEventListener(()=>{clearTimeout($),x(Gr.create("fetch-throttle",{throttleEndTimeMillis:E}))})})}(E.signal,T);try{const $=yield O.client.fetch(E);return yield O.storage.deleteThrottleMetadata(),$}catch($){if(!function Iy(v){if(!(v instanceof K.ZR&&v.customData))return!1;const E=Number(v.customData.httpStatus);return 429===E||500===E||503===E||504===E}($))throw $;const re={throttleEndTimeMillis:Date.now()+(0,K.$s)(x),backoffCount:x+1};return yield O.storage.setThrottleMetadata(re),O.attemptFetch(E,re)}})()}}class Ty{constructor(E,T,x,O,$){this.app=E,this._client=T,this._storageCache=x,this._storage=O,this._logger=$,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function ln(v,E){const T=v.target.error||void 0;return Gr.create(E,{originalErrorMessage:T&&T?.message})}const Ue="app_namespace_store";class xu{constructor(E,T,x,O=function Yi(){return new Promise((v,E)=>{try{const T=indexedDB.open("firebase_remote_config",1);T.onerror=x=>{E(ln(x,"storage-open"))},T.onsuccess=x=>{v(x.target.result)},T.onupgradeneeded=x=>{0===x.oldVersion&&x.target.result.createObjectStore(Ue,{keyPath:"compositeKey"})}}catch(T){E(Gr.create("storage-open",{originalErrorMessage:T?.message}))}})}()){this.appId=E,this.appName=T,this.namespace=x,this.openDbPromise=O}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(E){return this.set("last_fetch_status",E)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(E){return this.set("last_successful_fetch_timestamp_millis",E)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(E){return this.set("last_successful_fetch_response",E)}getActiveConfig(){return this.get("active_config")}setActiveConfig(E){return this.set("active_config",E)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(E){return this.set("active_config_etag",E)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(E){return this.set("throttle_metadata",E)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(E){var T=this;return(0,B.Z)(function*(){const x=yield T.openDbPromise;return new Promise((O,$)=>{const Le=x.transaction([Ue],"readonly").objectStore(Ue),Me=T.createCompositeKey(E);try{const Ze=Le.get(Me);Ze.onerror=ut=>{$(ln(ut,"storage-get"))},Ze.onsuccess=ut=>{const yt=ut.target.result;O(yt?yt.value:void 0)}}catch(Ze){$(Gr.create("storage-get",{originalErrorMessage:Ze?.message}))}})})()}set(E,T){var x=this;return(0,B.Z)(function*(){const O=yield x.openDbPromise;return new Promise(($,re)=>{const Me=O.transaction([Ue],"readwrite").objectStore(Ue),Ze=x.createCompositeKey(E);try{const ut=Me.put({compositeKey:Ze,value:T});ut.onerror=yt=>{re(ln(yt,"storage-set"))},ut.onsuccess=()=>{$()}}catch(ut){re(Gr.create("storage-set",{originalErrorMessage:ut?.message}))}})})()}delete(E){var T=this;return(0,B.Z)(function*(){const x=yield T.openDbPromise;return new Promise((O,$)=>{const Le=x.transaction([Ue],"readwrite").objectStore(Ue),Me=T.createCompositeKey(E);try{const Ze=Le.delete(Me);Ze.onerror=ut=>{$(ln(ut,"storage-delete"))},Ze.onsuccess=()=>{O()}}catch(Ze){$(Gr.create("storage-delete",{originalErrorMessage:Ze?.message}))}})})()}createCompositeKey(E){return[this.appId,this.appName,this.namespace,E].join()}}class xr{constructor(E){this.storage=E}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var E=this;return(0,B.Z)(function*(){const T=E.storage.getLastFetchStatus(),x=E.storage.getLastSuccessfulFetchTimestampMillis(),O=E.storage.getActiveConfig(),$=yield T;$&&(E.lastFetchStatus=$);const re=yield x;re&&(E.lastSuccessfulFetchTimestampMillis=re);const Le=yield O;Le&&(E.activeConfig=Le)})()}setLastFetchStatus(E){return this.lastFetchStatus=E,this.storage.setLastFetchStatus(E)}setLastSuccessfulFetchTimestampMillis(E){return this.lastSuccessfulFetchTimestampMillis=E,this.storage.setLastSuccessfulFetchTimestampMillis(E)}setActiveConfig(E){return this.activeConfig=E,this.storage.setActiveConfig(E)}}function ic(){return mt.apply(this,arguments)}function mt(){return(mt=(0,B.Z)(function*(){if(!(0,K.hl)())return!1;try{return yield(0,K.eu)()}catch{return!1}})).apply(this,arguments)}!function na(){(0,Q._registerComponent)(new de.wA("remote-config",function v(E,{instanceIdentifier:T}){const x=E.getProvider("app").getImmediate(),O=E.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Gr.create("registration-window");if(!(0,K.hl)())throw Gr.create("indexed-db-unavailable");const{projectId:$,apiKey:re,appId:Le}=x.options;if(!$)throw Gr.create("registration-project-id");if(!re)throw Gr.create("registration-api-key");if(!Le)throw Gr.create("registration-app-id");const Me=new xu(Le,x.name,T=T||"firebase"),Ze=new xr(Me),ut=new fe.Yd(Op);ut.logLevel=fe.in.ERROR;const yt=new zo(O,Q.SDK_VERSION,T,$,re,Le),_r=new Dy(yt,Me),Tn=new ir(_r,Me,Ze,ut),yh=new Ty(x,Tn,Ze,Me,ut);return function Vp(v){const E=(0,K.m9)(v);E._initializePromise||(E._initializePromise=E._storageCache.loadFromStorage().then(()=>{E._isInitializationComplete=!0}))}(yh),yh},"PUBLIC").setMultipleInstances(!0)),(0,Q.registerVersion)(Op,"0.4.4"),(0,Q.registerVersion)(Op,"0.4.4","esm2017")}();const Mu=(v,E)=>E.some(T=>v instanceof T);let oc,ra;const ys=new WeakMap,Mr=new WeakMap,ia=new WeakMap,Hd=new WeakMap,Xi=new WeakMap;let oa={get(v,E,T){if(v instanceof IDBTransaction){if("done"===E)return Mr.get(v);if("objectStoreNames"===E)return v.objectStoreNames||ia.get(v);if("store"===E)return T.objectStoreNames[1]?void 0:T.objectStore(T.objectStoreNames[0])}return bo(v[E])},set:(v,E,T)=>(v[E]=T,!0),has:(v,E)=>v instanceof IDBTransaction&&("done"===E||"store"===E)||E in v};function zd(v){return"function"==typeof v?function dw(v){return v!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function sc(){return ra||(ra=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(v)?function(...E){return v.apply(Oi(this),E),bo(ys.get(this))}:function(...E){return bo(v.apply(Oi(this),E))}:function(E,...T){const x=v.call(Oi(this),E,...T);return ia.set(x,E.sort?E.sort():[E]),bo(x)}}(v):(v instanceof IDBTransaction&&function Ru(v){if(Mr.has(v))return;const E=new Promise((T,x)=>{const O=()=>{v.removeEventListener("complete",$),v.removeEventListener("error",re),v.removeEventListener("abort",re)},$=()=>{T(),O()},re=()=>{x(v.error||new DOMException("AbortError","AbortError")),O()};v.addEventListener("complete",$),v.addEventListener("error",re),v.addEventListener("abort",re)});Mr.set(v,E)}(v),Mu(v,function Rn(){return oc||(oc=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(v,oa):v)}function bo(v){if(v instanceof IDBRequest)return function vo(v){const E=new Promise((T,x)=>{const O=()=>{v.removeEventListener("success",$),v.removeEventListener("error",re)},$=()=>{T(bo(v.result)),O()},re=()=>{x(v.error),O()};v.addEventListener("success",$),v.addEventListener("error",re)});return E.then(T=>{T instanceof IDBCursor&&ys.set(T,v)}).catch(()=>{}),Xi.set(E,v),E}(v);if(Hd.has(v))return Hd.get(v);const E=zd(v);return E!==v&&(Hd.set(v,E),Xi.set(E,v)),E}const Oi=v=>Xi.get(v);function ac(v,E,{blocked:T,upgrade:x,blocking:O,terminated:$}={}){const re=indexedDB.open(v,E),Le=bo(re);return x&&re.addEventListener("upgradeneeded",Me=>{x(bo(re.result),Me.oldVersion,Me.newVersion,bo(re.transaction))}),T&&re.addEventListener("blocked",()=>T()),Le.then(Me=>{$&&Me.addEventListener("close",()=>$()),O&&Me.addEventListener("versionchange",()=>O())}).catch(()=>{}),Le}function Go(v,{blocked:E}={}){const T=indexedDB.deleteDatabase(v);return E&&T.addEventListener("blocked",()=>E()),bo(T).then(()=>{})}const cc=["get","getKey","getAll","getAllKeys","count"],fr=["put","add","delete","clear"],Cy=new Map;function Rr(v,E){if(!(v instanceof IDBDatabase)||E in v||"string"!=typeof E)return;if(Cy.get(E))return Cy.get(E);const T=E.replace(/FromIndex$/,""),x=E!==T,O=fr.includes(T);if(!(T in(x?IDBIndex:IDBObjectStore).prototype)||!O&&!cc.includes(T))return;const $=function(){var re=(0,B.Z)(function*(Le,...Me){const Ze=this.transaction(Le,O?"readwrite":"readonly");let ut=Ze.store;return x&&(ut=ut.index(Me.shift())),(yield Promise.all([ut[T](...Me),O&&Ze.done]))[0]});return function(Me){return re.apply(this,arguments)}}();return Cy.set(E,$),$}!function Pt(v){oa=v(oa)}(v=>({...v,get:(E,T,x)=>Rr(E,T)||v.get(E,T,x),has:(E,T)=>!!Rr(E,T)||v.has(E,T)}));const Nr="/firebase-messaging-sw.js",Gd="/firebase-cloud-messaging-push-scope",vs="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",qd="https://fcmregistrations.googleapis.com/v1",zt="google.c.a.c_id",$p="google.c.a.c_l",hw="google.c.a.ts";var Wd=function(v){return v.PUSH_RECEIVED="push-received",v.NOTIFICATION_CLICKED="notification-clicked",v}(Wd||{});function qo(v){const E=new Uint8Array(v);return btoa(String.fromCharCode(...E)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function yS(v){const T=(v+"=".repeat((4-v.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),x=atob(T),O=new Uint8Array(x.length);for(let $=0;$<x.length;++$)O[$]=x.charCodeAt($);return O}const Hp="fcm_token_details_db",vS=5,pw="fcm_token_object_Store";function Kd(){return Kd=(0,B.Z)(function*(v){if("databases"in indexedDB&&!(yield indexedDB.databases()).map($=>$.name).includes(Hp))return null;let E=null;return(yield ac(Hp,vS,{upgrade:(x=(0,B.Z)(function*(O,$,re,Le){var Me;if($<2||!O.objectStoreNames.contains(pw))return;const Ze=Le.objectStore(pw),ut=yield Ze.index("fcmSenderId").get(v);if(yield Ze.clear(),ut)if(2===$){const yt=ut;if(!yt.auth||!yt.p256dh||!yt.endpoint)return;E={token:yt.fcmToken,createTime:null!==(Me=yt.createTime)&&void 0!==Me?Me:Date.now(),subscriptionOptions:{auth:yt.auth,p256dh:yt.p256dh,endpoint:yt.endpoint,swScope:yt.swScope,vapidKey:"string"==typeof yt.vapidKey?yt.vapidKey:qo(yt.vapidKey)}}}else if(3===$){const yt=ut;E={token:yt.fcmToken,createTime:yt.createTime,subscriptionOptions:{auth:qo(yt.auth),p256dh:qo(yt.p256dh),endpoint:yt.endpoint,swScope:yt.swScope,vapidKey:qo(yt.vapidKey)}}}else if(4===$){const yt=ut;E={token:yt.fcmToken,createTime:yt.createTime,subscriptionOptions:{auth:qo(yt.auth),p256dh:qo(yt.p256dh),endpoint:yt.endpoint,swScope:yt.swScope,vapidKey:qo(yt.vapidKey)}}}}),function($,re,Le,Me){return x.apply(this,arguments)})})).close(),yield Go(Hp),yield Go("fcm_vapid_details_db"),yield Go("undefined"),function mw(v){if(!v||!v.subscriptionOptions)return!1;const{subscriptionOptions:E}=v;return"number"==typeof v.createTime&&v.createTime>0&&"string"==typeof v.token&&v.token.length>0&&"string"==typeof E.auth&&E.auth.length>0&&"string"==typeof E.p256dh&&E.p256dh.length>0&&"string"==typeof E.endpoint&&E.endpoint.length>0&&"string"==typeof E.swScope&&E.swScope.length>0&&"string"==typeof E.vapidKey&&E.vapidKey.length>0}(E)?E:null;var x}),Kd.apply(this,arguments)}const gw="firebase-messaging-database",zp=1,Ji="firebase-messaging-store";let Ay=null;function Sy(){return Ay||(Ay=ac(gw,zp,{upgrade:(v,E)=>{0===E&&v.createObjectStore(Ji)}})),Ay}function Nu(v){return uc.apply(this,arguments)}function uc(){return uc=(0,B.Z)(function*(v){const E=Eo(v),x=yield(yield Sy()).transaction(Ji).objectStore(Ji).get(E);if(x)return x;{const O=yield function bS(v){return Kd.apply(this,arguments)}(v.appConfig.senderId);if(O)return yield xy(v,O),O}}),uc.apply(this,arguments)}function xy(v,E){return My.apply(this,arguments)}function My(){return(My=(0,B.Z)(function*(v,E){const T=Eo(v),O=(yield Sy()).transaction(Ji,"readwrite");return yield O.objectStore(Ji).put(E,T),yield O.done,E})).apply(this,arguments)}function eo(){return(eo=(0,B.Z)(function*(v){const E=Eo(v),x=(yield Sy()).transaction(Ji,"readwrite");yield x.objectStore(Ji).delete(E),yield x.done})).apply(this,arguments)}function Eo({appConfig:v}){return v.appId}const kr=new K.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function pr(v,E){return lc.apply(this,arguments)}function lc(){return(lc=(0,B.Z)(function*(v,E){const T=yield dc(v),x=Qd(E),O={method:"POST",headers:T,body:JSON.stringify(x)};let $;try{$=yield(yield fetch(Yd(v.appConfig),O)).json()}catch(re){throw kr.create("token-subscribe-failed",{errorInfo:re?.toString()})}if($.error)throw kr.create("token-subscribe-failed",{errorInfo:$.error.message});if(!$.token)throw kr.create("token-subscribe-no-token");return $.token})).apply(this,arguments)}function Zd(){return(Zd=(0,B.Z)(function*(v,E){const T=yield dc(v),x=Qd(E.subscriptionOptions),O={method:"PATCH",headers:T,body:JSON.stringify(x)};let $;try{$=yield(yield fetch(`${Yd(v.appConfig)}/${E.token}`,O)).json()}catch(re){throw kr.create("token-update-failed",{errorInfo:re?.toString()})}if($.error)throw kr.create("token-update-failed",{errorInfo:$.error.message});if(!$.token)throw kr.create("token-update-no-token");return $.token})).apply(this,arguments)}function Gp(v,E){return ku.apply(this,arguments)}function ku(){return(ku=(0,B.Z)(function*(v,E){const x={method:"DELETE",headers:yield dc(v)};try{const $=yield(yield fetch(`${Yd(v.appConfig)}/${E}`,x)).json();if($.error)throw kr.create("token-unsubscribe-failed",{errorInfo:$.error.message})}catch(O){throw kr.create("token-unsubscribe-failed",{errorInfo:O?.toString()})}})).apply(this,arguments)}function Yd({projectId:v}){return`${qd}/projects/${v}/registrations`}function dc(v){return Ou.apply(this,arguments)}function Ou(){return(Ou=(0,B.Z)(function*({appConfig:v,installations:E}){const T=yield E.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":v.apiKey,"x-goog-firebase-installations-auth":`FIS ${T}`})})).apply(this,arguments)}function Qd({p256dh:v,auth:E,endpoint:T,vapidKey:x}){const O={web:{endpoint:T,auth:E,p256dh:v}};return x!==vs&&(O.web.applicationPubKey=x),O}const qp=6048e5;function Xd(){return Xd=(0,B.Z)(function*(v){const E=yield function Jd(v,E){return ky.apply(this,arguments)}(v.swRegistration,v.vapidKey),T={vapidKey:v.vapidKey,swScope:v.swRegistration.scope,endpoint:E.endpoint,auth:qo(E.getKey("auth")),p256dh:qo(E.getKey("p256dh"))},x=yield Nu(v.firebaseDependencies);if(x){if(function Oy(v,E){return E.vapidKey===v.vapidKey&&E.endpoint===v.endpoint&&E.auth===v.auth&&E.p256dh===v.p256dh}(x.subscriptionOptions,T))return Date.now()>=x.createTime+qp?function Pu(v,E){return bs.apply(this,arguments)}(v,{token:x.token,createTime:Date.now(),subscriptionOptions:T}):x.token;try{yield Gp(v.firebaseDependencies,x.token)}catch(O){console.warn(O)}return Kp(v.firebaseDependencies,T)}return Kp(v.firebaseDependencies,T)}),Xd.apply(this,arguments)}function hc(){return hc=(0,B.Z)(function*(v){const E=yield Nu(v.firebaseDependencies);E&&(yield Gp(v.firebaseDependencies,E.token),yield function _w(v){return eo.apply(this,arguments)}(v.firebaseDependencies));const T=yield v.swRegistration.pushManager.getSubscription();return!T||T.unsubscribe()}),hc.apply(this,arguments)}function bs(){return bs=(0,B.Z)(function*(v,E){try{const T=yield function Pi(v,E){return Zd.apply(this,arguments)}(v.firebaseDependencies,E),x=Object.assign(Object.assign({},E),{token:T,createTime:Date.now()});return yield xy(v.firebaseDependencies,x),T}catch(T){throw yield function Wp(v){return hc.apply(this,arguments)}(v),T}}),bs.apply(this,arguments)}function Kp(v,E){return Ny.apply(this,arguments)}function Ny(){return(Ny=(0,B.Z)(function*(v,E){const x={token:yield pr(v,E),createTime:Date.now(),subscriptionOptions:E};return yield xy(v,x),x.token})).apply(this,arguments)}function ky(){return(ky=(0,B.Z)(function*(v,E){return(yield v.pushManager.getSubscription())||v.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:yS(E)})})).apply(this,arguments)}function Fu(v){const E={from:v.from,collapseKey:v.collapse_key,messageId:v.fcmMessageId};return function Lu(v,E){if(!E.notification)return;v.notification={};const T=E.notification.title;T&&(v.notification.title=T);const x=E.notification.body;x&&(v.notification.body=x);const O=E.notification.image;O&&(v.notification.image=O);const $=E.notification.icon;$&&(v.notification.icon=$)}(E,v),function Zp(v,E){E.data&&(v.data=E.data)}(E,v),function sa(v,E){var T,x,O,$,re;if(!(E.fcmOptions||null!==(T=E.notification)&&void 0!==T&&T.click_action))return;v.fcmOptions={};const Le=null!==(O=null===(x=E.fcmOptions)||void 0===x?void 0:x.link)&&void 0!==O?O:null===($=E.notification)||void 0===$?void 0:$.click_action;Le&&(v.fcmOptions.link=Le);const Me=null===(re=E.fcmOptions)||void 0===re?void 0:re.analytics_label;Me&&(v.fcmOptions.analyticsLabel=Me)}(E,v),E}function Vu(v,E){const T=[];for(let x=0;x<v.length;x++)T.push(v.charAt(x)),x<E.length&&T.push(E.charAt(x));return T.join("")}function Uu(v){return kr.create("missing-app-config-values",{valueName:v})}Vu("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Vu("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Yp{constructor(E,T,x){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const O=function yw(v){if(!v||!v.options)throw Uu("App Configuration Object");if(!v.name)throw Uu("App Name");const E=["projectId","apiKey","appId","messagingSenderId"],{options:T}=v;for(const x of E)if(!T[x])throw Uu(x);return{appName:v.name,projectId:T.projectId,apiKey:T.apiKey,appId:T.appId,senderId:T.messagingSenderId}}(E);this.firebaseDependencies={app:E,appConfig:O,installations:T,analyticsProvider:x}}_delete(){return Promise.resolve()}}function aa(){return(aa=(0,B.Z)(function*(v){try{v.swRegistration=yield navigator.serviceWorker.register(Nr,{scope:Gd}),v.swRegistration.update().catch(()=>{})}catch(E){throw kr.create("failed-service-worker-registration",{browserErrorMessage:E?.message})}})).apply(this,arguments)}function fc(){return(fc=(0,B.Z)(function*(v,E){if(!E&&!v.swRegistration&&(yield function Bu(v){return aa.apply(this,arguments)}(v)),E||!v.swRegistration){if(!(E instanceof ServiceWorkerRegistration))throw kr.create("invalid-sw-registration");v.swRegistration=E}})).apply(this,arguments)}function ju(){return(ju=(0,B.Z)(function*(v,E){E?v.vapidKey=E:v.vapidKey||(v.vapidKey=vs)})).apply(this,arguments)}function $u(){return $u=(0,B.Z)(function*(v,E){if(!navigator)throw kr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw kr.create("permission-blocked");return yield function eh(v,E){return ju.apply(this,arguments)}(v,E?.vapidKey),yield function Qp(v,E){return fc.apply(this,arguments)}(v,E?.serviceWorkerRegistration),function Ry(v){return Xd.apply(this,arguments)}(v)}),$u.apply(this,arguments)}function Jp(){return(Jp=(0,B.Z)(function*(v,E,T){const x=function Ly(v){switch(v){case Wd.NOTIFICATION_CLICKED:return"notification_open";case Wd.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(E);(yield v.firebaseDependencies.analyticsProvider.get()).logEvent(x,{message_id:T[zt],message_name:T[$p],message_time:T[hw],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function pc(){return pc=(0,B.Z)(function*(v,E){const T=E.data;if(!T.isFirebaseMessaging)return;v.onMessageHandler&&T.messageType===Wd.PUSH_RECEIVED&&("function"==typeof v.onMessageHandler?v.onMessageHandler(Fu(T)):v.onMessageHandler.next(Fu(T)));const x=T.data;(function Py(v){return"object"==typeof v&&!!v&&zt in v})(x)&&"1"===x["google.c.a.e"]&&(yield function Fy(v,E,T){return Jp.apply(this,arguments)}(v,T.messageType,x))}),pc.apply(this,arguments)}const Hu="@firebase/messaging",em=v=>{const E=new Yp(v.getProvider("app").getImmediate(),v.getProvider("installations-internal").getImmediate(),v.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",T=>function th(v,E){return pc.apply(this,arguments)}(E,T)),E},Vy=v=>{const E=v.getProvider("messaging").getImmediate();return{getToken:x=>function Xp(v,E){return $u.apply(this,arguments)}(E,x)}};function Gu(){return mc.apply(this,arguments)}function mc(){return(mc=(0,B.Z)(function*(){try{yield(0,K.eu)()}catch{return!1}return typeof window<"u"&&(0,K.hl)()&&(0,K.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function tm(){(0,Q._registerComponent)(new de.wA("messaging",em,"PUBLIC")),(0,Q._registerComponent)(new de.wA("messaging-internal",Vy,"PRIVATE")),(0,Q.registerVersion)(Hu,"0.12.4"),(0,Q.registerVersion)(Hu,"0.12.4","esm2017")}();const ua="analytics",gc="firebase_id",fi="origin",Uy=6e4,By="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Wu="https://www.googletagmanager.com/gtag/js",fn=new fe.Yd("@firebase/analytics"),mr=new K.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function rh(v){if(!v.startsWith(Wu)){const E=mr.create("invalid-gtag-resource",{gtagURL:v});return fn.warn(E.message),""}return v}function Ku(v){return Promise.all(v.map(E=>E.catch(T=>T)))}function ih(){return(ih=(0,B.Z)(function*(v,E,T,x,O,$){const re=x[O];try{if(re)yield E[re];else{const Me=(yield Ku(T)).find(Ze=>Ze.measurementId===O);Me&&(yield E[Me.appId])}}catch(Le){fn.error(Le)}v("config",O,$)})).apply(this,arguments)}function to(){return(to=(0,B.Z)(function*(v,E,T,x,O){try{let $=[];if(O&&O.send_to){let re=O.send_to;Array.isArray(re)||(re=[re]);const Le=yield Ku(T);for(const Me of re){const Ze=Le.find(yt=>yt.measurementId===Me),ut=Ze&&E[Ze.appId];if(!ut){$=[];break}$.push(ut)}}0===$.length&&($=Object.values(E)),yield Promise.all($),v("event",x,O||{})}catch($){fn.error($)}})).apply(this,arguments)}const am=30,zy=new class bw{constructor(E={},T=1e3){this.throttleMetadata=E,this.intervalMillis=T}getThrottleMetadata(E){return this.throttleMetadata[E]}setThrottleMetadata(E,T){this.throttleMetadata[E]=T}deleteThrottleMetadata(E){delete this.throttleMetadata[E]}};function Gy(v){return new Headers({Accept:"application/json","x-goog-api-key":v})}function Vt(){return(Vt=(0,B.Z)(function*(v){var E;const{appId:T,apiKey:x}=v,O={method:"GET",headers:Gy(x)},$=By.replace("{app-id}",T),re=yield fetch($,O);if(200!==re.status&&304!==re.status){let Le="";try{const Me=yield re.json();null!==(E=Me.error)&&void 0!==E&&E.message&&(Le=Me.error.message)}catch{}throw mr.create("config-fetch-failed",{httpStatus:re.status,responseMessage:Le})}return re.json()})).apply(this,arguments)}function oh(){return(oh=(0,B.Z)(function*(v,E=zy,T){const{appId:x,apiKey:O,measurementId:$}=v.options;if(!x)throw mr.create("no-app-id");if(!O){if($)return{measurementId:$,appId:x};throw mr.create("no-api-key")}const re=E.getThrottleMetadata(x)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Le=new ah;return setTimeout((0,B.Z)(function*(){Le.abort()}),void 0!==T?T:Uy),or({appId:x,apiKey:O,measurementId:$},re,Le,E)})).apply(this,arguments)}function or(v,E,T){return sh.apply(this,arguments)}function sh(){return sh=(0,B.Z)(function*(v,{throttleEndTimeMillis:E,backoffCount:T},x,O=zy){var $;const{appId:re,measurementId:Le}=v;try{yield function Zu(v,E){return new Promise((T,x)=>{const O=Math.max(E-Date.now(),0),$=setTimeout(T,O);v.addEventListener(()=>{clearTimeout($),x(mr.create("fetch-throttle",{throttleEndTimeMillis:E}))})})}(x,E)}catch(Me){if(Le)return fn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Le} provided in the "measurementId" field in the local Firebase config. [${Me?.message}]`),{appId:re,measurementId:Le};throw Me}try{const Me=yield function ye(v){return Vt.apply(this,arguments)}(v);return O.deleteThrottleMetadata(re),Me}catch(Me){const Ze=Me;if(!function wo(v){if(!(v instanceof K.ZR&&v.customData))return!1;const E=Number(v.customData.httpStatus);return 429===E||500===E||503===E||504===E}(Ze)){if(O.deleteThrottleMetadata(re),Le)return fn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Le} provided in the "measurementId" field in the local Firebase config. [${Ze?.message}]`),{appId:re,measurementId:Le};throw Me}const ut=503===Number(null===($=Ze?.customData)||void 0===$?void 0:$.httpStatus)?(0,K.$s)(T,O.intervalMillis,am):(0,K.$s)(T,O.intervalMillis),yt={throttleEndTimeMillis:Date.now()+ut,backoffCount:T+1};return O.setThrottleMetadata(re,yt),fn.debug(`Calling attemptFetch again in ${ut} millis`),or(v,yt,x,O)}}),sh.apply(this,arguments)}class ah{constructor(){this.listeners=[]}addEventListener(E){this.listeners.push(E)}abort(){this.listeners.forEach(E=>E())}}let la,Qu;function Wy(){return(Wy=(0,B.Z)(function*(v,E,T,x,O){if(O&&O.global)v("event",T,x);else{const $=yield E;v("event",T,Object.assign(Object.assign({},x),{send_to:$}))}})).apply(this,arguments)}function lh(){return(lh=(0,B.Z)(function*(){if(!(0,K.hl)())return fn.warn(mr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,K.eu)()}catch(v){return fn.warn(mr.create("indexeddb-unavailable",{errorInfo:v?.toString()}).message),!1}return!0})).apply(this,arguments)}function vc(){return vc=(0,B.Z)(function*(v,E,T,x,O,$,re){var Le;const Me=function qy(v){return oh.apply(this,arguments)}(v);Me.then(Tn=>{T[Tn.measurementId]=Tn.appId,v.options.measurementId&&Tn.measurementId!==v.options.measurementId&&fn.warn(`The measurement ID in the local Firebase config (${v.options.measurementId}) does not match the measurement ID fetched from the server (${Tn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Tn=>fn.error(Tn)),E.push(Me);const Ze=function uh(){return lh.apply(this,arguments)}().then(Tn=>{if(Tn)return x.getId()}),[ut,yt]=yield Promise.all([Me,Ze]);(function Wo(v){const E=window.document.getElementsByTagName("script");for(const T of Object.values(E))if(T.src&&T.src.includes(Wu)&&T.src.includes(v))return T;return null})($)||function $y(v,E){const T=function jy(v,E){let T;return window.trustedTypes&&(T=window.trustedTypes.createPolicy(v,E)),T}("firebase-js-sdk-policy",{createScriptURL:rh}),x=document.createElement("script"),O=`${Wu}?l=${v}&id=${E}`;x.src=T?T?.createScriptURL(O):O,x.async=!0,document.head.appendChild(x)}($,ut.measurementId),Qu&&(O("consent","default",Qu),function Xu(v){Qu=v}(void 0)),O("js",new Date);const _r=null!==(Le=re?.config)&&void 0!==Le?Le:{};return _r[fi]="firebase",_r.update=!0,null!=yt&&(_r[gc]=yt),O("config",ut.measurementId,_r),la&&(O("set",la),function yc(v){la=v}(void 0)),ut.measurementId}),vc.apply(this,arguments)}class um{constructor(E){this.app=E}_delete(){return delete no[this.app.options.appId],Promise.resolve()}}let no={},lm=[];const dm={};let Yy,wn,ha="dataLayer",ne=!1;function hm(v,E,T){!function Un(){const v=[];if((0,K.ru)()&&v.push("This is a browser extension environment."),(0,K.zI)()||v.push("Cookies are not available."),v.length>0){const E=v.map((x,O)=>`(${O+1}) ${x}`).join(" "),T=mr.create("invalid-analytics-context",{errorInfo:E});fn.warn(T.message)}}();const x=v.options.appId;if(!x)throw mr.create("no-app-id");if(!v.options.apiKey){if(!v.options.measurementId)throw mr.create("no-api-key");fn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${v.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=no[x])throw mr.create("already-exists",{id:x});if(!ne){!function gt(v){let E=[];Array.isArray(window[v])?E=window[v]:window[v]=E}(ha);const{wrappedGtag:$,gtagCore:re}=function sm(v,E,T,x,O){let $=function(...re){window[x].push(arguments)};return window[O]&&"function"==typeof window[O]&&($=window[O]),window[O]=function Hy(v,E,T,x){function $(){return $=(0,B.Z)(function*(re,...Le){try{if("event"===re){const[Me,Ze]=Le;yield function om(v,E,T,x,O){return to.apply(this,arguments)}(v,E,T,Me,Ze)}else if("config"===re){const[Me,Ze]=Le;yield function im(v,E,T,x,O,$){return ih.apply(this,arguments)}(v,E,T,x,Me,Ze)}else if("consent"===re){const[Me]=Le;v("consent","update",Me)}else if("get"===re){const[Me,Ze,ut]=Le;v("get",Me,Ze,ut)}else if("set"===re){const[Me]=Le;v("set",Me)}else v(re,...Le)}catch(Me){fn.error(Me)}}),$.apply(this,arguments)}return function O(re){return $.apply(this,arguments)}}($,v,E,T),{gtagCore:$,wrappedGtag:window[O]}}(no,lm,dm,ha,"gtag");wn=$,Yy=re,ne=!0}return no[x]=function cm(v,E,T,x,O,$,re){return vc.apply(this,arguments)}(v,lm,dm,E,Yy,ha,T),new um(v)}function Qy(){return dh.apply(this,arguments)}function dh(){return(dh=(0,B.Z)(function*(){if((0,K.ru)()||!(0,K.zI)()||!(0,K.hl)())return!1;try{return yield(0,K.eu)()}catch{return!1}})).apply(this,arguments)}const bc="@firebase/analytics";!function Zo(){(0,Q._registerComponent)(new de.wA(ua,(E,{options:T})=>hm(E.getProvider("app").getImmediate(),E.getProvider("installations-internal").getImmediate(),T),"PUBLIC")),(0,Q._registerComponent)(new de.wA("analytics-internal",function v(E){try{const T=E.getProvider(ua).getImmediate();return{logEvent:(x,O,$)=>function hh(v,E,T,x){v=(0,K.m9)(v),function Ew(v,E,T,x,O){return Wy.apply(this,arguments)}(wn,no[v.app.options.appId],E,T,x).catch(O=>fn.error(O))}(T,x,O,$)}}catch(T){throw mr.create("interop-component-reg-failed",{reason:T})}},"PRIVATE")),(0,Q.registerVersion)(bc,"0.10.0"),(0,Q.registerVersion)(bc,"0.10.0","esm2017")}();var qr=R(1954),el=R(9931);const fh=new class Ec extends el.v{}(class Do extends qr.o{constructor(E,T){super(E,T),this.scheduler=E,this.work=T}schedule(E,T=0){return T>0?super.schedule(E,T):(this.delay=T,this.state=E,this.scheduler.flush(this),this)}execute(E,T){return T>0||this.closed?super.execute(E,T):this._execute(E,T)}requestAsyncId(E,T,x=0){return null!=x&&x>0||null==x&&this.delay>0?super.requestAsyncId(E,T,x):(E.flush(this),0)}});var To=R(6321),Yo=R(5592),Ds=R(9397),Co=R(3093),ph=R(5137);const wc=new p.GfV("7.6.1"),Ic="__angularfire_symbol__analyticsIsSupportedValue",ro="__angularfire_symbol__analyticsIsSupported",tl="__angularfire_symbol__remoteConfigIsSupportedValue",Dc="__angularfire_symbol__remoteConfigIsSupported",nl="__angularfire_symbol__messagingIsSupportedValue",mh="__angularfire_symbol__messagingIsSupported";function rl(v,E,T){if(E){if(1===E.length)return E[0];const $=E.filter(re=>re.app===T);if(1===$.length)return $[0]}return T.container.getProvider(v).getImmediate({optional:!0})}globalThis[ro]||(globalThis[ro]=Qy().then(v=>globalThis[Ic]=v).catch(()=>globalThis[Ic]=!1)),globalThis[mh]||(globalThis[mh]=Gu().then(v=>globalThis[nl]=v).catch(()=>globalThis[nl]=!1)),globalThis[Dc]||(globalThis[Dc]=ic().then(v=>globalThis[tl]=v).catch(()=>globalThis[tl]=!1));const Ei=(v,E)=>{const T=E?[E]:(0,z.C6)(),x=[];return T.forEach(O=>{O.container.getProvider(v).instances.forEach(re=>{x.includes(re)||x.push(re)})}),x};function io(){}class _h{constructor(E,T=fh){this.zone=E,this.delegate=T}now(){return this.delegate.now()}schedule(E,T,x){const O=this.zone;return this.delegate.schedule(function(re){O.runGuarded(()=>{E.apply(this,[re])})},T,x)}}class ym{constructor(E){this.zone=E,this.task=null}call(E,T){const x=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",io,{},io,io)),T.pipe((0,Ds.b)({next:x,complete:x,error:x})).subscribe(E).add(x)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let pa=(()=>{class v{constructor(T){this.ngZone=T,this.outsideAngular=T.runOutsideAngular(()=>new _h(Zone.current)),this.insideAngular=T.run(()=>new _h(Zone.current,To.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return v.\u0275fac=function(T){return new(T||v)(p.LFG(p.R0b))},v.\u0275prov=p.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"}),v})();function Qo(){const v=globalThis.\u0275AngularFireScheduler;if(!v)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return v}function Ts(v){return Qo().ngZone.run(()=>v())}function ma(v){return v.pipe((0,Co.Q)(Qo().outsideAngular))}function ol(v){return Qo(),function _a(v){return function(T){return(T=T.lift(new ym(v.ngZone))).pipe((0,ph.R)(v.outsideAngular),(0,Co.Q)(v.insideAngular))}}(Qo())(v)}const Xy=(v,E)=>function(){const x=arguments;return E&&setTimeout(()=>{"scheduled"===E.state&&E.invoke()},10),Ts(()=>v.apply(void 0,x))},Cc=(v,E)=>function(){let T;const x=arguments;for(let $=0;$<arguments.length;$++)"function"==typeof x[$]&&(E&&(T||(T=Ts(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",io,{},io,io)))),x[$]=Xy(x[$],T));const O=function il(v){return Qo().ngZone.runOutsideAngular(()=>v())}(()=>v.apply(this,x));if(!E){if(O instanceof Yo.y){const $=Qo();return O.pipe((0,ph.R)($.outsideAngular),(0,Co.Q)($.insideAngular))}return Ts(()=>O)}return O instanceof Yo.y?O.pipe(ol):O instanceof Promise?Ts(()=>new Promise(($,re)=>O.then(Le=>Ts(()=>$(Le)),Le=>Ts(()=>re(Le))))):"function"==typeof O&&T?function(){return setTimeout(()=>{T&&"scheduled"===T.state&&T.invoke()},10),O.apply(this,arguments)}:Ts(()=>O)}},9058:(ot,ve,R)=>{R.d(ve,{$s:()=>Mi,BH:()=>he,L:()=>ce,LL:()=>Se,P0:()=>ct,Pz:()=>Ie,Sg:()=>ke,UG:()=>De,US:()=>de,ZB:()=>J,ZR:()=>_e,aH:()=>ue,b$:()=>si,eu:()=>ie,hl:()=>ee,jU:()=>Et,m9:()=>_o,ne:()=>Br,r3:()=>on,ru:()=>zn,tV:()=>V,uI:()=>Oe,vZ:()=>hs,xO:()=>yn,z$:()=>xe,zI:()=>le});const Q=function(P){const k=[];let j=0;for(let pe=0;pe<P.length;pe++){let Y=P.charCodeAt(pe);Y<128?k[j++]=Y:Y<2048?(k[j++]=Y>>6|192,k[j++]=63&Y|128):55296==(64512&Y)&&pe+1<P.length&&56320==(64512&P.charCodeAt(pe+1))?(Y=65536+((1023&Y)<<10)+(1023&P.charCodeAt(++pe)),k[j++]=Y>>18|240,k[j++]=Y>>12&63|128,k[j++]=Y>>6&63|128,k[j++]=63&Y|128):(k[j++]=Y>>12|224,k[j++]=Y>>6&63|128,k[j++]=63&Y|128)}return k},de={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(P,k){if(!Array.isArray(P))throw Error("encodeByteArray takes an array as a parameter");this.init_();const j=k?this.byteToCharMapWebSafe_:this.byteToCharMap_,pe=[];for(let Y=0;Y<P.length;Y+=3){const Xe=P[Y],_t=Y+1<P.length,Ft=_t?P[Y+1]:0,Xn=Y+2<P.length,xn=Xn?P[Y+2]:0;let Cr=(15&Ft)<<2|xn>>6,Ni=63&xn;Xn||(Ni=64,_t||(Cr=64)),pe.push(j[Xe>>2],j[(3&Xe)<<4|Ft>>4],j[Cr],j[Ni])}return pe.join("")},encodeString(P,k){return this.HAS_NATIVE_SUPPORT&&!k?btoa(P):this.encodeByteArray(Q(P),k)},decodeString(P,k){return this.HAS_NATIVE_SUPPORT&&!k?atob(P):function(P){const k=[];let j=0,pe=0;for(;j<P.length;){const Y=P[j++];if(Y<128)k[pe++]=String.fromCharCode(Y);else if(Y>191&&Y<224){const Xe=P[j++];k[pe++]=String.fromCharCode((31&Y)<<6|63&Xe)}else if(Y>239&&Y<365){const Xn=((7&Y)<<18|(63&P[j++])<<12|(63&P[j++])<<6|63&P[j++])-65536;k[pe++]=String.fromCharCode(55296+(Xn>>10)),k[pe++]=String.fromCharCode(56320+(1023&Xn))}else{const Xe=P[j++],_t=P[j++];k[pe++]=String.fromCharCode((15&Y)<<12|(63&Xe)<<6|63&_t)}}return k.join("")}(this.decodeStringToByteArray(P,k))},decodeStringToByteArray(P,k){this.init_();const j=k?this.charToByteMapWebSafe_:this.charToByteMap_,pe=[];for(let Y=0;Y<P.length;){const Xe=j[P.charAt(Y++)],Ft=Y<P.length?j[P.charAt(Y)]:0;++Y;const xn=Y<P.length?j[P.charAt(Y)]:64;++Y;const Bt=Y<P.length?j[P.charAt(Y)]:64;if(++Y,null==Xe||null==Ft||null==xn||null==Bt)throw new fe;pe.push(Xe<<2|Ft>>4),64!==xn&&(pe.push(Ft<<4&240|xn>>2),64!==Bt&&pe.push(xn<<6&192|Bt))}return pe},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let P=0;P<this.ENCODED_VALS.length;P++)this.byteToCharMap_[P]=this.ENCODED_VALS.charAt(P),this.charToByteMap_[this.byteToCharMap_[P]]=P,this.byteToCharMapWebSafe_[P]=this.ENCODED_VALS_WEBSAFE.charAt(P),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[P]]=P,P>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(P)]=P,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(P)]=P)}}};class fe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ce=function(P){return function(P){const k=Q(P);return de.encodeByteArray(k,!0)}(P).replace(/\./g,"")},V=function(P){try{return de.decodeString(P,!0)}catch(k){console.error("base64Decode failed: ",k)}return null};function J(P,k){if(!(k instanceof Object))return k;switch(k.constructor){case Date:return new Date(k.getTime());case Object:void 0===P&&(P={});break;case Array:P=[];break;default:return k}for(const j in k)!k.hasOwnProperty(j)||!Ne(j)||(P[j]=J(P[j],k[j]));return P}function Ne(P){return"__proto__"!==P}const Ae=()=>{try{return function we(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const P=process.env.__FIREBASE_DEFAULTS__;return P?JSON.parse(P):void 0})()||(()=>{if(typeof document>"u")return;let P;try{P=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const k=P&&V(P[1]);return k&&JSON.parse(k)})()}catch(P){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${P}`)}},ct=P=>{const k=(P=>{var k,j;return null===(j=null===(k=Ae())||void 0===k?void 0:k.emulatorHosts)||void 0===j?void 0:j[P]})(P);if(!k)return;const j=k.lastIndexOf(":");if(j<=0||j+1===k.length)throw new Error(`Invalid host ${k} with no separate hostname and port!`);const pe=parseInt(k.substring(j+1),10);return"["===k[0]?[k.substring(1,j-1),pe]:[k.substring(0,j),pe]},ue=()=>{var P;return null===(P=Ae())||void 0===P?void 0:P.config},Ie=P=>{var k;return null===(k=Ae())||void 0===k?void 0:k[`_${P}`]};class he{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((k,j)=>{this.resolve=k,this.reject=j})}wrapCallback(k){return(j,pe)=>{j?this.reject(j):this.resolve(pe),"function"==typeof k&&(this.promise.catch(()=>{}),1===k.length?k(j):k(j,pe))}}}function ke(P,k){if(P.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const pe=k||"demo-project",Y=P.iat||0,Xe=P.sub||P.user_id;if(!Xe)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const _t=Object.assign({iss:`https://securetoken.google.com/${pe}`,aud:pe,iat:Y,exp:Y+3600,auth_time:Y,sub:Xe,user_id:Xe,firebase:{sign_in_provider:"custom",identities:{}}},P);return[ce(JSON.stringify({alg:"none",type:"JWT"})),ce(JSON.stringify(_t)),""].join(".")}function xe(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Oe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(xe())}function De(){var P;const k=null===(P=Ae())||void 0===P?void 0:P.forceEnvironment;if("node"===k)return!0;if("browser"===k)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Et(){return"object"==typeof self&&self.self===self}function zn(){const P="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof P&&void 0!==P.id}function si(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ee(){try{return"object"==typeof indexedDB}catch{return!1}}function ie(){return new Promise((P,k)=>{try{let j=!0;const pe="validate-browser-context-for-indexeddb-analytics-module",Y=self.indexedDB.open(pe);Y.onsuccess=()=>{Y.result.close(),j||self.indexedDB.deleteDatabase(pe),P(!0)},Y.onupgradeneeded=()=>{j=!1},Y.onerror=()=>{var Xe;k((null===(Xe=Y.error)||void 0===Xe?void 0:Xe.message)||"")}}catch(j){k(j)}})}function le(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class _e extends Error{constructor(k,j,pe){super(j),this.code=k,this.customData=pe,this.name="FirebaseError",Object.setPrototypeOf(this,_e.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Se.prototype.create)}}class Se{constructor(k,j,pe){this.service=k,this.serviceName=j,this.errors=pe}create(k,...j){const pe=j[0]||{},Y=`${this.service}/${k}`,Xe=this.errors[k],_t=Xe?function st(P,k){return P.replace(Ht,(j,pe)=>{const Y=k[pe];return null!=Y?String(Y):`<${pe}?>`})}(Xe,pe):"Error";return new _e(Y,`${this.serviceName}: ${_t} (${Y}).`,pe)}}const Ht=/\{\$([^}]+)}/g;function on(P,k){return Object.prototype.hasOwnProperty.call(P,k)}function hs(P,k){if(P===k)return!0;const j=Object.keys(P),pe=Object.keys(k);for(const Y of j){if(!pe.includes(Y))return!1;const Xe=P[Y],_t=k[Y];if(ea(Xe)&&ea(_t)){if(!hs(Xe,_t))return!1}else if(Xe!==_t)return!1}for(const Y of pe)if(!j.includes(Y))return!1;return!0}function ea(P){return null!==P&&"object"==typeof P}function yn(P){const k=[];for(const[j,pe]of Object.entries(P))Array.isArray(pe)?pe.forEach(Y=>{k.push(encodeURIComponent(j)+"="+encodeURIComponent(Y))}):k.push(encodeURIComponent(j)+"="+encodeURIComponent(pe));return k.length?"&"+k.join("&"):""}function Br(P,k){const j=new Tr(P,k);return j.subscribe.bind(j)}class Tr{constructor(k,j){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=j,this.task.then(()=>{k(this)}).catch(pe=>{this.error(pe)})}next(k){this.forEachObserver(j=>{j.next(k)})}error(k){this.forEachObserver(j=>{j.error(k)}),this.close(k)}complete(){this.forEachObserver(k=>{k.complete()}),this.close()}subscribe(k,j,pe){let Y;if(void 0===k&&void 0===j&&void 0===pe)throw new Error("Missing Observer.");Y=function jr(P,k){if("object"!=typeof P||null===P)return!1;for(const j of k)if(j in P&&"function"==typeof P[j])return!0;return!1}(k,["next","error","complete"])?k:{next:k,error:j,complete:pe},void 0===Y.next&&(Y.next=Sn),void 0===Y.error&&(Y.error=Sn),void 0===Y.complete&&(Y.complete=Sn);const Xe=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Y.error(this.finalError):Y.complete()}catch{}}),this.observers.push(Y),Xe}unsubscribeOne(k){void 0===this.observers||void 0===this.observers[k]||(delete this.observers[k],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(k){if(!this.finalized)for(let j=0;j<this.observers.length;j++)this.sendOne(j,k)}sendOne(k,j){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[k])try{j(this.observers[k])}catch(pe){typeof console<"u"&&console.error&&console.error(pe)}})}close(k){this.finalized||(this.finalized=!0,void 0!==k&&(this.finalError=k),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Sn(){}const ta=1e3,an=2,xi=144e5,yi=.5;function Mi(P,k=ta,j=an){const pe=k*Math.pow(j,P),Y=Math.round(yi*pe*(Math.random()-.5)*2);return Math.min(xi,pe+Y)}function _o(P){return P&&P._delegate?P._delegate:P}},9284:(ot,ve,R)=>{var p=R(4946);let z=null;function B(){return z}class K{}const de=new p.OlP("DocumentToken");let fe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=p.Yz7({token:n,factory:function(){return(0,p.f3M)(ce)},providedIn:"platform"})}return n})();const Ce=new p.OlP("Location Initialized");let ce=(()=>{class n extends fe{constructor(){super(),this._doc=(0,p.f3M)(de),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return B().getBaseHref(this._doc)}onPopState(t){const r=B().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=B().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=p.Yz7({token:n,factory:function(){return new n},providedIn:"platform"})}return n})();function V(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function F(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function J(n){return n&&"?"!==n[0]?"?"+n:n}let Ne=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=p.Yz7({token:n,factory:function(){return(0,p.f3M)(Ke)},providedIn:"root"})}return n})();const we=new p.OlP("appBaseHref");let Ke=(()=>{class n extends Ne{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,p.f3M)(de).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return V(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+J(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const u=this.prepareExternalUrl(i+J(a));this._platformLocation.pushState(t,r,u)}replaceState(t,r,i,a){const u=this.prepareExternalUrl(i+J(a));this._platformLocation.replaceState(t,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(p.LFG(fe),p.LFG(we,8))};static#t=this.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),at=(()=>{class n extends Ne{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=V(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let u=this.prepareExternalUrl(i+J(a));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.pushState(t,r,u)}replaceState(t,r,i,a){let u=this.prepareExternalUrl(i+J(a));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(p.LFG(fe),p.LFG(we,8))};static#t=this.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac})}return n})(),ze=(()=>{class n{constructor(t){this._subject=new p.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function ue(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(F(ct(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+J(r))}normalize(t){return n.stripTrailingSlash(function ft(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,ct(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+J(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+J(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static#e=this.normalizeQueryParams=J;static#t=this.joinWithSlash=V;static#n=this.stripTrailingSlash=F;static#r=this.\u0275fac=function(r){return new(r||n)(p.LFG(Ne))};static#i=this.\u0275prov=p.Yz7({token:n,factory:function(){return function Ae(){return new ze((0,p.LFG)(Ne))}()},providedIn:"root"})}return n})();function ct(n){return n.replace(/\/index.html$/,"")}class wu{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let yo=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,a,u)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new wu(i.item,this._ngForOf,-1,-1),null===u?void 0:u);else if(null==u)r.remove(null===a?void 0:a);else if(null!==a){const h=r.get(a);r.move(h,u),Iu(h,i)}});for(let i=0,a=r.length;i<a;i++){const h=r.get(i).context;h.index=i,h.count=a,h.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{Iu(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(p.Y36(p.s_b),p.Y36(p.Rgc),p.Y36(p.ZZ4))};static#t=this.\u0275dir=p.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return n})();function Iu(n,e){n.context.$implicit=e.item}let zr=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Du,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Np("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Np("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(p.Y36(p.s_b),p.Y36(p.Rgc))};static#t=this.\u0275dir=p.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return n})();class Du{constructor(){this.$implicit=null,this.ngIf=null}}function Np(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,p.AaK)(e)}'.`)}let Su=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=p.oAB({type:n});static#n=this.\u0275inj=p.cJS({})}return n})();const jp="browser";function dn(n){return"server"===n}let na=(()=>{class n{static#e=this.\u0275prov=(0,p.Yz7)({token:n,providedIn:"root",factory:()=>new Vn((0,p.LFG)(de),window)})}return n})();class Vn{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Qi(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const u=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(u)return u}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class Oy extends K{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Fu extends Oy{static makeCurrent(){!function Q(n){z||(z=n)}(new Fu)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Zp(){return Lu=Lu||document.querySelector("base"),Lu?Lu.getAttribute("href"):null}();return null==t?null:function Py(n){sa=sa||document.createElement("a"),sa.setAttribute("href",n);const e=sa.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Lu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function tc(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}(document.cookie,e)}}let sa,Lu=null,yw=(()=>{class n{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac})}return n})();const Uu=new p.OlP("EventManagerPlugins");let Yp=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(a=>a.supports(t)),!r)throw new p.vHH(5101,!1);return this._eventNameToPlugin.set(t,r),r}static#e=this.\u0275fac=function(r){return new(r||n)(p.LFG(Uu),p.LFG(p.R0b))};static#t=this.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac})}return n})();class Bu{constructor(e){this._doc=e}}const aa="ng-app-id";let Qp=(()=>{class n{constructor(t,r,i,a={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=a,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=dn(a),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${aa}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){const i=this.styleRef;if(i.has(t)){const a=i.get(t);return a.usage+=r,a.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const i=this.styleNodesInDOM,a=i?.get(r);if(a?.parentNode===t)return i.delete(r),a.removeAttribute(aa),a;{const u=this.doc.createElement("style");return this.nonce&&u.setAttribute("nonce",this.nonce),u.textContent=r,this.platformIsServer&&u.setAttribute(aa,this.appId),u}}addStyleToHost(t,r){const i=this.getStyleElement(t,r);t.appendChild(i);const a=this.styleRef,u=a.get(r)?.elements;u?u.push(i):a.set(r,{elements:[i],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||n)(p.LFG(de),p.LFG(p.AFp),p.LFG(p.Ojb,8),p.LFG(p.Lbi))};static#t=this.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac})}return n})();const fc={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},eh=/%COMP%/g,Jp=new p.OlP("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function pc(n,e){return e.map(t=>t.replace(eh,n))}let Hu=(()=>{class n{constructor(t,r,i,a,u,h,m,_=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=a,this.doc=u,this.platformId=h,this.ngZone=m,this.nonce=_,this.rendererByCompId=new Map,this.platformIsServer=dn(h),this.defaultRenderer=new zu(t,u,m,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===p.ifc.ShadowDom&&(r={...r,encapsulation:p.ifc.Emulated});const i=this.getOrCreateRenderer(t,r);return i instanceof Fi?i.applyToHost(t):i instanceof mc&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let a=i.get(r.id);if(!a){const u=this.doc,h=this.ngZone,m=this.eventManager,_=this.sharedStylesHost,w=this.removeStylesOnCompDestroy,D=this.platformIsServer;switch(r.encapsulation){case p.ifc.Emulated:a=new Fi(m,_,r,this.appId,w,u,h,D);break;case p.ifc.ShadowDom:return new Gu(m,_,t,r,u,h,this.nonce,D);default:a=new mc(m,_,r,w,u,h,D)}i.set(r.id,a)}return a}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||n)(p.LFG(Yp),p.LFG(Qp),p.LFG(p.AFp),p.LFG(Jp),p.LFG(de),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(p.Ojb))};static#t=this.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac})}return n})();class zu{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(fc[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(tm(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(tm(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new p.vHH(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=fc[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=fc[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(p.JOm.DashCase|p.JOm.Important)?e.style.setProperty(t,r,i&p.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&p.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=B().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function tm(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Gu extends zu{constructor(e,t,r,i,a,u,h,m){super(e,a,u,m),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const _=pc(i.id,i.styles);for(const w of _){const D=document.createElement("style");h&&D.setAttribute("nonce",h),D.textContent=w,this.shadowRoot.appendChild(D)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class mc extends zu{constructor(e,t,r,i,a,u,h,m){super(e,a,u,h),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=m?pc(m,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class Fi extends mc{constructor(e,t,r,i,a,u,h,m){const _=i+"-"+r.id;super(e,t,r,a,u,h,m,_),this.contentAttr=function Ly(n){return"_ngcontent-%COMP%".replace(eh,n)}(_),this.hostAttr=function th(n){return"_nghost-%COMP%".replace(eh,n)}(_)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let qu=(()=>{class n extends Bu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static#e=this.\u0275fac=function(r){return new(r||n)(p.LFG(de))};static#t=this.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac})}return n})();const nh=["alt","control","meta","shift"],hn={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},nm={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let ca=(()=>{class n extends Bu{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),u=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>B().onAndCancel(t,a.domEventName,u))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let u="",h=r.indexOf("code");if(h>-1&&(r.splice(h,1),u="code."),nh.forEach(_=>{const w=r.indexOf(_);w>-1&&(r.splice(w,1),u+=_+".")}),u+=a,0!=r.length||0===a.length)return null;const m={};return m.domEventName=i,m.fullKey=u,m}static matchEventFullKeyCode(t,r){let i=hn[t.key]||t.key,a="";return r.indexOf("code.")>-1&&(i=t.code,a="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),nh.forEach(u=>{u!==i&&(0,nm[u])(t)&&(a+=u+".")}),a+=i,a===r)}static eventCallback(t,r,i){return a=>{n.matchEventFullKeyCode(a,t)&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}static#e=this.\u0275fac=function(r){return new(r||n)(p.LFG(de))};static#t=this.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac})}return n})();const fn=(0,p.eFA)(p._c5,"browser",[{provide:p.Lbi,useValue:jp},{provide:p.g9A,useValue:function fi(){Fu.makeCurrent()},multi:!0},{provide:de,useFactory:function By(){return(0,p.RDi)(document),document},deps:[]}]),rm=new p.OlP(""),mr=[{provide:p.rWj,useClass:class Vu{addToWindow(e){p.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new p.vHH(5103,!1);return a},p.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),p.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),p.dqk.frameworkStabilizers||(p.dqk.frameworkStabilizers=[]),p.dqk.frameworkStabilizers.push(r=>{const i=p.dqk.getAllAngularTestabilities();let a=i.length,u=!1;const h=function(m){u=u||m,a--,0==a&&r(u)};i.forEach(m=>{m.whenStable(h)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?B().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:p.lri,useClass:p.dDg,deps:[p.R0b,p.eoX,p.rWj]},{provide:p.dDg,useClass:p.dDg,deps:[p.R0b,p.eoX,p.rWj]}],rh=[{provide:p.zSh,useValue:"root"},{provide:p.qLn,useFactory:function Uy(){return new p.qLn},deps:[]},{provide:Uu,useClass:qu,multi:!0,deps:[de,p.R0b,p.Lbi]},{provide:Uu,useClass:ca,multi:!0,deps:[de]},Hu,Qp,Yp,{provide:p.FYo,useExisting:Hu},{provide:class mt{},useClass:yw,deps:[]},[]];let Ku=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:p.AFp,useValue:t.appId}]}}static#e=this.\u0275fac=function(r){return new(r||n)(p.LFG(rm,12))};static#t=this.\u0275mod=p.oAB({type:n});static#n=this.\u0275inj=p.cJS({providers:[...rh,...mr],imports:[Su,p.hGG]})}return n})(),ih=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static#e=this.\u0275fac=function(r){return new(r||n)(p.LFG(de))};static#t=this.\u0275prov=p.Yz7({token:n,factory:function(r){let i=null;return i=r?new r:function im(){return new ih((0,p.LFG)(de))}(),i},providedIn:"root"})}return n})();typeof window<"u"&&window;var Or=R(6304),Es=R(3182),tn=R(8186);class da{constructor(e){return e}}class Yu{constructor(){return(0,Es.C6)()}}const yc=new p.OlP("angularfire2._apps"),uh={provide:da,useFactory:function Xu(n){return n&&1===n.length?n[0]:new da((0,Es.Mq)())},deps:[[new p.FiY,yc]]},lh={provide:Yu,deps:[[new p.FiY,yc]]};function cm(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new da(r)}}let vc=(()=>{class n{constructor(t){(0,Es.KN)("angularfire",tn.q4.full,"core"),(0,Es.KN)("angularfire",tn.q4.full,"app"),(0,Es.KN)("angular",p.q4F.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(p.Lbi))},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[uh,lh]}),n})();function um(n,...e){return{ngModule:vc,providers:[{provide:yc,useFactory:cm(n),multi:!0,deps:[p.R0b,p.zs3,tn.HU,...e]}]}}const ha=(0,tn.u3)(Es.ZF,!0);var ne=R(5861),$e=R(9058),Un=R(534),hm=R(7582),Io=R(7879),ws=R(4537);const _m=function Ju(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},hh=new $e.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),bc=new Io.Yd("@firebase/auth");function Zo(n,...e){bc.logLevel<=Io.in.ERROR&&bc.error(`Auth (${Un.SDK_VERSION}): ${n}`,...e)}function qr(n,...e){throw fh(n,...e)}function Do(n,...e){return fh(n,...e)}function fh(n,...e){if("string"!=typeof n){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return hh.create(n,...e)}function Fe(n,e,...t){if(!n)throw fh(e,...t)}function To(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Zo(e),new Error(e)}function Yo(n,e){n||To(e)}function ph(){var n;return typeof self<"u"&&(null===(n=self.location)||void 0===n?void 0:n.protocol)||null}class ro{constructor(e,t){this.shortDelay=e,this.longDelay=t,Yo(t>e,"Short delay should be less than long delay!"),this.isMobile=(0,$e.uI)()||(0,$e.b$)()}get(){return function wc(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(function Co(){return"http:"===ph()||"https:"===ph()}()||(0,$e.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}class Dc{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void To("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void To("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void To("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const nl={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},mh=new ro(3e4,6e4);function Nn(n,e,t,r){return Tc.apply(this,arguments)}function Tc(){return(Tc=(0,ne.Z)(function*(n,e,t,r,i={}){return gh(n,i,(0,ne.Z)(function*(){let a={},u={};r&&("GET"===e?u=r:a={body:JSON.stringify(r)});const h=(0,$e.xO)(Object.assign({key:n.config.apiKey},u)).slice(1),m=yield n._getAdditionalHeaders();return m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode),Dc.fetch()(_h(n,n.config.apiHost,t,h),Object.assign({method:e,headers:m,referrerPolicy:"no-referrer"},a))}))})).apply(this,arguments)}function gh(n,e,t){return rl.apply(this,arguments)}function rl(){return(rl=(0,ne.Z)(function*(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},nl),e);try{const i=new ym(n),a=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();const u=yield a.json();if("needConfirmation"in u)throw pa(n,"account-exists-with-different-credential",u);if(a.ok&&!("errorMessage"in u))return u;{const h=a.ok?u.errorMessage:u.error.message,[m,_]=h.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===m)throw pa(n,"credential-already-in-use",u);if("EMAIL_EXISTS"===m)throw pa(n,"email-already-in-use",u);if("USER_DISABLED"===m)throw pa(n,"user-disabled",u);const w=r[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(_)throw function el(n,e,t){const r=Object.assign(Object.assign({},_m()),{[e]:t});return new $e.LL("auth","Firebase",r).create(e,{appName:n.name})}(n,w,_);qr(n,w)}}catch(i){if(i instanceof $e.ZR)throw i;qr(n,"network-request-failed",{message:String(i)})}})).apply(this,arguments)}function _h(n,e,t,r){const i=`${e}${t}?${r}`;return n.config.emulator?function tl(n,e){Yo(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}(n.config,i):`${n.config.apiScheme}://${i}`}class ym{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Do(this.auth,"network-request-failed")),mh.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function pa(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=Do(n,e,r);return i.customData._tokenResponse=t,i}function il(){return(il=(0,ne.Z)(function*(n,e){return Nn(n,"POST","/v1/accounts:delete",e)})).apply(this,arguments)}function ol(){return(ol=(0,ne.Z)(function*(n,e){return Nn(n,"POST","/v1/accounts:lookup",e)})).apply(this,arguments)}function _a(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function v(){return(v=(0,ne.Z)(function*(n,e=!1){const t=(0,$e.m9)(n),r=yield t.getIdToken(e),i=T(r);Fe(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const a="object"==typeof i.firebase?i.firebase:void 0,u=a?.sign_in_provider;return{claims:i,token:r,authTime:_a(E(i.auth_time)),issuedAtTime:_a(E(i.iat)),expirationTime:_a(E(i.exp)),signInProvider:u||null,signInSecondFactor:a?.sign_in_second_factor||null}})).apply(this,arguments)}function E(n){return 1e3*Number(n)}function T(n){const[e,t,r]=n.split(".");if(void 0===e||void 0===t||void 0===r)return Zo("JWT malformed, contained fewer than 3 sections"),null;try{const i=(0,$e.tV)(t);return i?JSON.parse(i):(Zo("Failed to decode base64 JWT payload"),null)}catch(i){return Zo("Caught error parsing JWT payload as JSON",i?.toString()),null}}function O(n,e){return $.apply(this,arguments)}function $(){return($=(0,ne.Z)(function*(n,e,t=!1){if(t)return e;try{return yield e}catch(r){throw r instanceof $e.ZR&&function re({code:n}){return"auth/user-disabled"===n||"auth/user-token-expired"===n}(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})).apply(this,arguments)}class Le{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),r}{this.errorBackoff=3e4;const i=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){var t=this;if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout((0,ne.Z)(function*(){yield t.iteration()}),r)}iteration(){var e=this;return(0,ne.Z)(function*(){try{yield e.user.getIdToken(!0)}catch(t){return void("auth/network-request-failed"===t?.code&&e.schedule(!0))}e.schedule()})()}}class Me{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=_a(this.lastLoginAt),this.creationTime=_a(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Ze(n){return ut.apply(this,arguments)}function ut(){return ut=(0,ne.Z)(function*(n){var e;const t=n.auth,r=yield n.getIdToken(),i=yield O(n,function ga(n,e){return ol.apply(this,arguments)}(t,{idToken:r}));Fe(i?.users.length,t,"internal-error");const a=i.users[0];n._notifyReloadListener(a);const u=null!==(e=a.providerUserInfo)&&void 0!==e&&e.length?function yh(n){return n.map(e=>{var{providerId:t}=e,r=(0,hm._T)(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}(a.providerUserInfo):[],h=function Tn(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}(n.providerData,u),w=!!n.isAnonymous&&!(n.email&&a.passwordHash||h?.length),D={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:h,metadata:new Me(a.createdAt,a.lastLoginAt),isAnonymous:w};Object.assign(n,D)}),ut.apply(this,arguments)}function _r(){return(_r=(0,ne.Z)(function*(n){const e=(0,$e.m9)(n);yield Ze(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})).apply(this,arguments)}function ya(){return(ya=(0,ne.Z)(function*(n,e){const t=yield gh(n,{},(0,ne.Z)(function*(){const r=(0,$e.xO)({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=n.config,u=_h(n,i,"/v1/token",`key=${a}`),h=yield n._getAdditionalHeaders();return h["Content-Type"]="application/x-www-form-urlencoded",Dc.fetch()(u,{method:"POST",headers:h,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})).apply(this,arguments)}class Wr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Fe(e.idToken,"internal-error"),Fe(typeof e.idToken<"u","internal-error"),Fe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):function x(n){const e=T(n);return Fe(e,"internal-error"),Fe(typeof e.exp<"u","internal-error"),Fe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}getToken(e,t=!1){var r=this;return(0,ne.Z)(function*(){return Fe(!r.accessToken||r.refreshToken,e,"user-token-expired"),t||!r.accessToken||r.isExpired?r.refreshToken?(yield r.refresh(e,r.refreshToken),r.accessToken):null:r.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(e,t){var r=this;return(0,ne.Z)(function*(){const{accessToken:i,refreshToken:a,expiresIn:u}=yield function vh(n,e){return ya.apply(this,arguments)}(e,t);r.updateTokensAndExpiration(i,a,Number(u))})()}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*r}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:a}=t,u=new Wr;return r&&(Fe("string"==typeof r,"internal-error",{appName:e}),u.refreshToken=r),i&&(Fe("string"==typeof i,"internal-error",{appName:e}),u.accessToken=i),a&&(Fe("number"==typeof a,"internal-error",{appName:e}),u.expirationTime=a),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Wr,this.toJSON())}_performRefresh(){return To("not implemented")}}function Kr(n,e){Fe("string"==typeof n||typeof n>"u","internal-error",{appName:e})}class Cs{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,a=(0,hm._T)(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Le(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Me(a.createdAt||void 0,a.lastLoginAt||void 0)}getIdToken(e){var t=this;return(0,ne.Z)(function*(){const r=yield O(t,t.stsTokenManager.getToken(t.auth,e));return Fe(r,t.auth,"internal-error"),t.accessToken!==r&&(t.accessToken=r,yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)),r})()}getIdTokenResult(e){return function Cc(n){return v.apply(this,arguments)}(this,e)}reload(){return function yt(n){return _r.apply(this,arguments)}(this)}_assign(e){this!==e&&(Fe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Cs(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Fe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){var r=this;return(0,ne.Z)(function*(){let i=!1;e.idToken&&e.idToken!==r.stsTokenManager.accessToken&&(r.stsTokenManager.updateFromServerResponse(e),i=!0),t&&(yield Ze(r)),yield r.auth._persistUserIfCurrent(r),i&&r.auth._notifyListenersIfCurrent(r)})()}delete(){var e=this;return(0,ne.Z)(function*(){const t=yield e.getIdToken();return yield O(e,function Qo(n,e){return il.apply(this,arguments)}(e.auth,{idToken:t})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,a,u,h,m,_,w;const D=null!==(r=t.displayName)&&void 0!==r?r:void 0,S=null!==(i=t.email)&&void 0!==i?i:void 0,N=null!==(a=t.phoneNumber)&&void 0!==a?a:void 0,U=null!==(u=t.photoURL)&&void 0!==u?u:void 0,W=null!==(h=t.tenantId)&&void 0!==h?h:void 0,oe=null!==(m=t._redirectEventId)&&void 0!==m?m:void 0,Re=null!==(_=t.createdAt)&&void 0!==_?_:void 0,Be=null!==(w=t.lastLoginAt)&&void 0!==w?w:void 0,{uid:Ve,emailVerified:et,isAnonymous:Rt,providerData:At,stsTokenManager:Wt}=t;Fe(Ve&&Wt,e,"internal-error");const Ln=Wr.fromJSON(this.name,Wt);Fe("string"==typeof Ve,e,"internal-error"),Kr(D,e.name),Kr(S,e.name),Fe("boolean"==typeof et,e,"internal-error"),Fe("boolean"==typeof Rt,e,"internal-error"),Kr(N,e.name),Kr(U,e.name),Kr(W,e.name),Kr(oe,e.name),Kr(Re,e.name),Kr(Be,e.name);const Dr=new Cs({uid:Ve,auth:e,email:S,emailVerified:et,displayName:D,isAnonymous:Rt,photoURL:U,phoneNumber:N,tenantId:W,stsTokenManager:Ln,createdAt:Re,lastLoginAt:Be});return At&&Array.isArray(At)&&(Dr.providerData=At.map(Js=>Object.assign({},Js))),oe&&(Dr._redirectEventId=oe),Dr}static _fromIdTokenResponse(e,t,r=!1){return(0,ne.Z)(function*(){const i=new Wr;i.updateFromServerResponse(t);const a=new Cs({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Ze(a),a})()}}const IS=new Map;function va(n){Yo(n instanceof Function,"Expected a class definition");let e=IS.get(n);return e?(Yo(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,IS.set(n,e),e)}const Iw=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,ne.Z)(function*(){return!0})()}_set(t,r){var i=this;return(0,ne.Z)(function*(){i.storage[t]=r})()}_get(t){var r=this;return(0,ne.Z)(function*(){const i=r.storage[t];return void 0===i?null:i})()}_remove(t){var r=this;return(0,ne.Z)(function*(){delete r.storage[t]})()}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})();function vm(n,e,t){return`firebase:${n}:${e}:${t}`}class Cn{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=vm(this.userKey,i.apiKey,a),this.fullPersistenceKey=vm("persistence",i.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return(0,ne.Z)(function*(){const t=yield e.persistence._get(e.fullUserKey);return t?Cs._fromJSON(e.auth,t):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var t=this;return(0,ne.Z)(function*(){if(t.persistence===e)return;const r=yield t.getCurrentUser();return yield t.removeCurrentUser(),t.persistence=e,r?t.setCurrentUser(r):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return(0,ne.Z)(function*(){if(!t.length)return new Cn(va(Iw),e,r);const i=(yield Promise.all(t.map(function(){var _=(0,ne.Z)(function*(w){if(yield w._isAvailable())return w});return function(w){return _.apply(this,arguments)}}()))).filter(_=>_);let a=i[0]||va(Iw);const u=vm(r,e.config.apiKey,e.name);let h=null;for(const _ of t)try{const w=yield _._get(u);if(w){const D=Cs._fromJSON(e,w);_!==a&&(h=D),a=_;break}}catch{}const m=i.filter(_=>_._shouldAllowMigration);return a._shouldAllowMigration&&m.length?(a=m[0],h&&(yield a._set(u,h.toJSON())),yield Promise.all(t.map(function(){var _=(0,ne.Z)(function*(w){if(w!==a)try{yield w._remove(u)}catch{}});return function(w){return _.apply(this,arguments)}}())),new Cn(a,e,r)):new Cn(a,e,r)})()}}function Dw(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(function Ac(n=(0,$e.z$)()){return/iemobile/i.test(n)}(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(function sl(n=(0,$e.z$)()){return/firefox\//i.test(n)}(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(function Eh(n=(0,$e.z$)()){return/blackberry/i.test(n)}(e))return"Blackberry";if(function al(n=(0,$e.z$)()){return/webos/i.test(n)}(e))return"Webos";if(function Jy(n=(0,$e.z$)()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}(e))return"Safari";if((e.includes("chrome/")||function Li(n=(0,$e.z$)()){return/crios\//i.test(n)}(e))&&!e.includes("edge/"))return"Chrome";if(function ev(n=(0,$e.z$)()){return/android/i.test(n)}(e))return"Android";{const r=n.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===r?.length)return r[1]}return"Other"}function Sc(n,e=[]){let t;switch(n){case"Browser":t=Dw((0,$e.z$)());break;case"Worker":t=`${Dw((0,$e.z$)())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Un.SDK_VERSION}/${r}`}function Cw(n,e){return tv.apply(this,arguments)}function tv(){return(tv=(0,ne.Z)(function*(n,e){return Nn(n,"GET","/v2/recaptchaConfig",function $t(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}(n,e))})).apply(this,arguments)}function Sw(n){return void 0!==n&&void 0!==n.enterprise}class xw{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(t=>"EMAIL_PASSWORD_PROVIDER"===t.provider&&"OFF"!==t.enforcementState)}}class Dh{constructor(e){this.type="recaptcha-enterprise",this.auth=sr(e)}verify(e="verify",t=!1){var r=this;return(0,ne.Z)(function*(){function a(){return a=(0,ne.Z)(function*(h){if(!t){if(null==h.tenantId&&null!=h._agentRecaptchaConfig)return h._agentRecaptchaConfig.siteKey;if(null!=h.tenantId&&void 0!==h._tenantRecaptchaConfigs[h.tenantId])return h._tenantRecaptchaConfigs[h.tenantId].siteKey}return new Promise(function(){var m=(0,ne.Z)(function*(_,w){Cw(h,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(D=>{if(void 0!==D.recaptchaKey){const S=new xw(D);return null==h.tenantId?h._agentRecaptchaConfig=S:h._tenantRecaptchaConfigs[h.tenantId]=S,_(S.siteKey)}w(new Error("recaptcha Enterprise site key undefined"))}).catch(D=>{w(D)})});return function(_,w){return m.apply(this,arguments)}}())}),a.apply(this,arguments)}function u(h,m,_){const w=window.grecaptcha;Sw(w)?w.enterprise.ready(()=>{w.enterprise.execute(h,{action:e}).then(D=>{m(D)}).catch(()=>{m("NO_RECAPTCHA")})}):_(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((h,m)=>{(function i(h){return a.apply(this,arguments)})(r.auth).then(_=>{if(!t&&Sw(window.grecaptcha))u(_,h,m);else{if(typeof window>"u")return void m(new Error("RecaptchaVerifier is only supported in browser"));(function wh(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const a=Do("internal-error");a.customData=i,t(a)},r.type="text/javascript",r.charset="UTF-8",function TS(){var n,e;return null!==(e=null===(n=document.getElementsByTagName("head"))||void 0===n?void 0:n[0])&&void 0!==e?e:document}().appendChild(r)})})("https://www.google.com/recaptcha/enterprise.js?render="+_).then(()=>{u(_,h,m)}).catch(w=>{m(w)})}}).catch(_=>{m(_)})})})()}}class nv{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((u,h)=>{try{u(e(a))}catch(m){h(m)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){var t=this;return(0,ne.Z)(function*(){if(t.auth.currentUser===e)return;const r=[];try{for(const i of t.queue)yield i(e),i.onAbort&&r.push(i.onAbort)}catch(i){r.reverse();for(const a of r)try{a()}catch{}throw t.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})()}}class Dm{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Mw(this),this.idTokenSubscription=new Mw(this),this.beforeStateQueue=new nv(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=hh,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){var r=this;return t&&(this._popupRedirectResolver=va(t)),this._initializationPromise=this.queue((0,ne.Z)(function*(){var i,a;if(!r._deleted&&(r.persistenceManager=yield Cn.create(r,e),!r._deleted)){if(null!==(i=r._popupRedirectResolver)&&void 0!==i&&i._shouldInitProactively)try{yield r._popupRedirectResolver._initialize(r)}catch{}yield r.initializeCurrentUser(t),r.lastNotifiedUid=(null===(a=r.currentUser)||void 0===a?void 0:a.uid)||null,!r._deleted&&(r._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var e=this;return(0,ne.Z)(function*(){if(e._deleted)return;const t=yield e.assertedPersistence.getCurrentUser();if(e.currentUser||t){if(e.currentUser&&t&&e.currentUser.uid===t.uid)return e._currentUser._assign(t),void(yield e.currentUser.getIdToken());yield e._updateCurrentUser(t,!0)}})()}initializeCurrentUser(e){var t=this;return(0,ne.Z)(function*(){var r;const i=yield t.assertedPersistence.getCurrentUser();let a=i,u=!1;if(e&&t.config.authDomain){yield t.getOrInitRedirectPersistenceManager();const h=null===(r=t.redirectUser)||void 0===r?void 0:r._redirectEventId,m=a?._redirectEventId,_=yield t.tryRedirectSignIn(e);(!h||h===m)&&_?.user&&(a=_.user,u=!0)}if(!a)return t.directlySetCurrentUser(null);if(!a._redirectEventId){if(u)try{yield t.beforeStateQueue.runMiddleware(a)}catch(h){a=i,t._popupRedirectResolver._overrideRedirectResult(t,()=>Promise.reject(h))}return a?t.reloadAndSetCurrentUserOrClear(a):t.directlySetCurrentUser(null)}return Fe(t._popupRedirectResolver,t,"argument-error"),yield t.getOrInitRedirectPersistenceManager(),t.redirectUser&&t.redirectUser._redirectEventId===a._redirectEventId?t.directlySetCurrentUser(a):t.reloadAndSetCurrentUserOrClear(a)})()}tryRedirectSignIn(e){var t=this;return(0,ne.Z)(function*(){let r=null;try{r=yield t._popupRedirectResolver._completeRedirectFn(t,e,!0)}catch{yield t._setRedirectUser(null)}return r})()}reloadAndSetCurrentUserOrClear(e){var t=this;return(0,ne.Z)(function*(){try{yield Ze(e)}catch(r){if("auth/network-request-failed"!==r?.code)return t.directlySetCurrentUser(null)}return t.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function Ic(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}()}_delete(){var e=this;return(0,ne.Z)(function*(){e._deleted=!0})()}updateCurrentUser(e){var t=this;return(0,ne.Z)(function*(){const r=e?(0,$e.m9)(e):null;return r&&Fe(r.auth.config.apiKey===t.config.apiKey,t,"invalid-user-token"),t._updateCurrentUser(r&&r._clone(t))})()}_updateCurrentUser(e,t=!1){var r=this;return(0,ne.Z)(function*(){if(!r._deleted)return e&&Fe(r.tenantId===e.tenantId,r,"tenant-id-mismatch"),t||(yield r.beforeStateQueue.runMiddleware(e)),r.queue((0,ne.Z)(function*(){yield r.directlySetCurrentUser(e),r.notifyAuthListeners()}))})()}signOut(){var e=this;return(0,ne.Z)(function*(){return yield e.beforeStateQueue.runMiddleware(null),(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null,!0)})()}setPersistence(e){var t=this;return this.queue((0,ne.Z)(function*(){yield t.assertedPersistence.setPersistence(va(e))}))}initializeRecaptchaConfig(){var e=this;return(0,ne.Z)(function*(){const t=yield Cw(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new xw(t);null==e.tenantId?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,r.emailPasswordEnabled&&new Dh(e).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new $e.LL("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,t){var r=this;return(0,ne.Z)(function*(){const i=yield r.getOrInitRedirectPersistenceManager(t);return null===e?i.removeCurrentUser():i.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var t=this;return(0,ne.Z)(function*(){if(!t.redirectPersistenceManager){const r=e&&va(e)||t._popupRedirectResolver;Fe(r,t,"argument-error"),t.redirectPersistenceManager=yield Cn.create(t,[va(r._redirectPersistence)],"redirectUser"),t.redirectUser=yield t.redirectPersistenceManager.getCurrentUser()}return t.redirectPersistenceManager})()}_redirectUserForId(e){var t=this;return(0,ne.Z)(function*(){var r,i;return t._isInitialized&&(yield t.queue((0,ne.Z)(function*(){}))),(null===(r=t._currentUser)||void 0===r?void 0:r._redirectEventId)===e?t._currentUser:(null===(i=t.redirectUser)||void 0===i?void 0:i._redirectEventId)===e?t.redirectUser:null})()}_persistUserIfCurrent(e){var t=this;return(0,ne.Z)(function*(){if(e===t.currentUser)return t.queue((0,ne.Z)(function*(){return t.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const a="function"==typeof t?t:t.next.bind(t),u=this._isInitialized?Promise.resolve():this._initializationPromise;return Fe(u,this,"internal-error"),u.then(()=>a(this.currentUser)),"function"==typeof t?e.addObserver(t,r,i):e.addObserver(t)}directlySetCurrentUser(e){var t=this;return(0,ne.Z)(function*(){t.currentUser&&t.currentUser!==e&&t._currentUser._stopProactiveRefresh(),e&&t.isProactiveRefreshEnabled&&e._startProactiveRefresh(),t.currentUser=e,e?yield t.assertedPersistence.setCurrentUser(e):yield t.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Fe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Sc(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var e=this;return(0,ne.Z)(function*(){var t;const r={"X-Client-Version":e.clientVersion};e.app.options.appId&&(r["X-Firebase-gmpid"]=e.app.options.appId);const i=yield null===(t=e.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();i&&(r["X-Firebase-Client"]=i);const a=yield e._getAppCheckToken();return a&&(r["X-Firebase-AppCheck"]=a),r})()}_getAppCheckToken(){var e=this;return(0,ne.Z)(function*(){var t;const r=yield null===(t=e.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken();return r?.error&&function Is(n,...e){bc.logLevel<=Io.in.WARN&&bc.warn(`Auth (${Un.SDK_VERSION}): ${n}`,...e)}(`Error while retrieving App Check token: ${r.error}`),r?.token})()}}function sr(n){return(0,$e.m9)(n)}class Mw{constructor(e){this.auth=e,this.observer=null,this.addObserver=(0,$e.ne)(t=>this.observer=t)}get next(){return Fe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}(function Ih(n){return`__${n}${Math.floor(1e6*Math.random())}`})("rcb"),new ro(3e4,6e4),new ro(2e3,1e4),new ro(3e4,6e4),new ro(5e3,15e3),encodeURIComponent("fac");var $I="@firebase/auth";class wx{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var t=this;return(0,ne.Z)(function*(){return t.assertAuthConfigured(),yield t.auth._initializationPromise,t.auth.currentUser?{accessToken:yield t.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Fe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,$e.Pz)("authIdTokenMaxAge"),function ib(n){(0,Un._registerComponent)(new ws.wA("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:u,authDomain:h}=r.options;Fe(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});const m={apiKey:u,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Sc(n)},_=new Dm(r,i,a,m);return function cl(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(va);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}(_,t),_},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),(0,Un._registerComponent)(new ws.wA("auth-internal",e=>{const t=sr(e.getProvider("auth").getImmediate());return new wx(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Un.registerVersion)($I,"0.23.2",function Ix(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(n)),(0,Un.registerVersion)($I,"0.23.2","esm2017")}("Browser");class KI{constructor(){return(0,tn.vb)("auth")}}const ub=new Map,zx={activated:!1,tokenObservers:[]},lb={initialized:!1,enabled:!1};function kn(n){return ub.get(n)||Object.assign({},zx)}function ug(){return lb}const db="https://content-firebaseappcheck.googleapis.com/v1",Wx="exchangeDebugToken",lg={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class Zx{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ne.Z)(function*(){t.stop();try{t.pending=new $e.BH,yield function Yx(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new $e.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Fr=new $e.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Yh(n){if(!kn(n).activated)throw Fr.create("use-before-activation",{appName:n.name})}function dg(n,e){return hg.apply(this,arguments)}function hg(){return(hg=(0,ne.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const D=yield i.getHeartbeatsHeader();D&&(r["X-Firebase-Client"]=D)}const a={method:"POST",body:JSON.stringify(e),headers:r};let u,h;try{u=yield fetch(n,a)}catch(D){throw Fr.create("fetch-network-error",{originalErrorMessage:D?.message})}if(200!==u.status)throw Fr.create("fetch-status-error",{httpStatus:u.status});try{h=yield u.json()}catch(D){throw Fr.create("fetch-parse-error",{originalErrorMessage:D?.message})}const m=h.ttl.match(/^([\d.]+)(s)$/);if(!m||!m[2]||isNaN(Number(m[1])))throw Fr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${h.ttl}`});const _=1e3*Number(m[1]),w=Date.now();return{token:h.token,expireTimeMillis:w+_,issuedAtTimeMillis:w}})).apply(this,arguments)}function pg(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${db}/projects/${t}/apps/${r}:${Wx}?key=${i}`,body:{debug_token:e}}}const dP="firebase-app-check-database",iD=1,Ml="firebase-app-check-store";let Xh=null;function gg(){return(gg=(0,ne.Z)(function*(n,e){const r=(yield function mg(){return Xh||(Xh=new Promise((n,e)=>{try{const t=indexedDB.open(dP,iD);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Fr.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Ml,{keyPath:"compositeKey"})}}catch(t){e(Fr.create("storage-open",{originalErrorMessage:t?.message}))}}),Xh)}()).transaction(Ml,"readwrite"),a=r.objectStore(Ml).put({compositeKey:n,value:e});return new Promise((u,h)=>{a.onsuccess=m=>{u()},r.onerror=m=>{var _;h(Fr.create("storage-set",{originalErrorMessage:null===(_=m.target.error)||void 0===_?void 0:_.message}))}})})).apply(this,arguments)}const kl=new Io.Yd("@firebase/app-check");function mb(n,e){return(0,$e.hl)()?function Xx(n,e){return function oD(n,e){return gg.apply(this,arguments)}(function Nl(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{kl.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function gb(){return ug().enabled}function _b(){return vg.apply(this,arguments)}function vg(){return(vg=(0,ne.Z)(function*(){const n=ug();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Jh={error:"UNKNOWN_ERROR"};function eM(n){return $e.US.encodeString(JSON.stringify(n),!1)}function ef(n){return bg.apply(this,arguments)}function bg(){return(bg=(0,ne.Z)(function*(n,e=!1){const t=n.app;Yh(t);const r=kn(t);let a,i=r.token;if(i&&!Ol(i)&&(r.token=void 0,i=void 0),!i){const m=yield r.cachedTokenPromise;m&&(Ol(m)?i=m:yield mb(t,void 0))}if(!e&&i&&Ol(i))return{token:i.token};let h,u=!1;if(gb()){r.exchangeTokenPromise||(r.exchangeTokenPromise=dg(pg(t,yield _b()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),u=!0);const m=yield r.exchangeTokenPromise;return yield mb(t,m),r.token=m,{token:m.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),u=!0),i=yield kn(t).exchangeTokenPromise}catch(m){"appCheck/throttled"===m.code?kl.warn(m.message):kl.error(m),a=m}return i?a?h=Ol(i)?{token:i.token,internalError:a}:fD(a):(h={token:i.token},r.token=i,yield mb(t,i)):h=fD(a),u&&function hD(n,e){const t=kn(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(t,h),h})).apply(this,arguments)}function lD(n){return yb.apply(this,arguments)}function yb(){return(yb=(0,ne.Z)(function*(n){const e=n.app;Yh(e);const{provider:t}=kn(e);if(gb()){const r=yield _b(),{token:i}=yield dg(pg(e,r),n.heartbeatServiceProvider);return{token:i}}{const{token:r}=yield t.getToken();return{token:r}}})).apply(this,arguments)}function vb(n,e){const t=kn(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function dD(n){const{app:e}=n,t=kn(e);let r=t.tokenRefresher;r||(r=function tM(n){const{app:e}=n;return new Zx((0,ne.Z)(function*(){let r;if(r=kn(e).token?yield ef(n,!0):yield ef(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=kn(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},lg.RETRIAL_MIN_WAIT,lg.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Ol(n){return n.expireTimeMillis-Date.now()>0}function fD(n){return{token:eM(Jh),error:n}}class nM{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=kn(this.app);for(const t of e)vb(this.app,t.next);return Promise.resolve()}}const nf="app-check-internal";!function co(){(0,Un._registerComponent)(new ws.wA("app-check",n=>function rM(n,e){return new nM(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(nf).initialize()})),(0,Un._registerComponent)(new ws.wA(nf,n=>function pD(n){return{getToken:e=>ef(n,e),getLimitedUseToken:()=>lD(n),addTokenListener:e=>function Vc(n,e,t,r){const{app:i}=n,a=kn(i);if(a.tokenObservers=[...a.tokenObservers,{next:t,error:r,type:e}],a.token&&Ol(a.token)){const h=a.token;Promise.resolve().then(()=>{t({token:h.token}),dD(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>dD(n))}(n,"INTERNAL",e),removeTokenListener:e=>vb(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Un.registerVersion)("@firebase/app-check","0.8.0")}();class Sa{constructor(){return(0,tn.vb)("app-check")}}typeof window<"u"&&window;var qe,ED=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ji={},wD=wD||{},St=ED||self;function Tg(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function cf(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Db="closure_uid_"+(1e9*Math.random()>>>0),mP=0;function vM(n,e,t){return n.call.apply(n.bind,arguments)}function bM(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Yr(n,e,t){return(Yr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?vM:bM).apply(null,arguments)}function Vl(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Bn(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,i,a){for(var u=Array(arguments.length-2),h=2;h<arguments.length;h++)u[h-2]=arguments[h];return e.prototype[i].apply(r,u)}}function Jo(){this.s=this.s,this.o=this.o}Jo.prototype.s=!1,Jo.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function pP(n){Object.prototype.hasOwnProperty.call(n,Db)&&n[Db]||(n[Db]=++mP)}(this)},Jo.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Tb=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function Bc(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Cb(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(Tg(r)){const i=n.length||0,a=r.length||0;n.length=i+a;for(let u=0;u<a;u++)n[i+u]=r[u]}else n.push(r)}}function Qr(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Qr.prototype.h=function(){this.defaultPrevented=!0};var uf=function(){if(!St.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{St.addEventListener("test",()=>{},e),St.removeEventListener("test",()=>{},e)}catch{}return n}();function lf(n){return/^[\s\xa0]*$/.test(n)}function Ag(){var n=St.navigator;return n&&(n=n.userAgent)?n:""}function es(n){return-1!=Ag().indexOf(n)}function Ab(n){return Ab[" "](n),n}Ab[" "]=function(){};var xg,n,Sg=es("Opera"),Ns=es("Trident")||es("MSIE"),EM=es("Edge"),xb=EM||Ns,ID=es("Gecko")&&!(-1!=Ag().toLowerCase().indexOf("webkit")&&!es("Edge"))&&!(es("Trident")||es("MSIE"))&&!es("Edge"),Mb=-1!=Ag().toLowerCase().indexOf("webkit")&&!es("Edge");function DD(){var n=St.document;return n?n.documentMode:void 0}e:{var Rb="",Nb=(n=Ag(),ID?/rv:([^\);]+)(\)|;)/.exec(n):EM?/Edge\/([\d\.]+)/.exec(n):Ns?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Mb?/WebKit\/(\S+)/.exec(n):Sg?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Nb&&(Rb=Nb?Nb[1]:""),Ns){var Mg=DD();if(null!=Mg&&Mg>parseFloat(Rb)){xg=String(Mg);break e}}xg=Rb}var wM=St.document&&Ns&&(DD()||parseInt(xg,10))||void 0;function df(n,e){if(Qr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(ID){e:{try{Ab(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:IM[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&df.$.h.call(this)}}Bn(df,Qr);var IM={2:"touch",3:"pen",4:"mouse"};df.prototype.h=function(){df.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var hf="closure_listenable_"+(1e6*Math.random()|0),Ob=0;function Pb(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=i,this.key=++Ob,this.fa=this.ia=!1}function Ng(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function Ul(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Og(n){const e={};for(const t in n)e[t]=n[t];return e}const Fb="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function TD(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<Fb.length;a++)t=Fb[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Pg(n){this.src=n,this.g={},this.h=0}function Lb(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=Tb(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(Ng(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function ff(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.fa&&a.listener==e&&a.capture==!!t&&a.la==r)return i}return-1}Pg.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var u=ff(n,e,r,i);return-1<u?(e=n[u],t||(e.ia=!1)):((e=new Pb(e,this.src,a,!!r,i)).ia=t,n.push(e)),e};var pf="closure_lm_"+(1e6*Math.random()|0),Fg={};function Vb(n,e,t,r,i){if(r&&r.once)return Ub(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)Vb(n,e[a],t,r,i);return null}return t=jg(t),n&&n[hf]?n.O(e,t,cf(r)?!!r.capture:!!r,i):CD(n,e,t,!1,r,i)}function CD(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var u=cf(i)?!!i.capture:!!i,h=Bb(n);if(h||(n[pf]=h=new Pg(n)),(t=h.add(e,t,r,u,a)).proxy)return t;if(r=function DM(){const e=AD;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)uf||(i=u),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(Ug(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Ub(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)Ub(n,e[a],t,r,i);return null}return t=jg(t),n&&n[hf]?n.P(e,t,cf(r)?!!r.capture:!!r,i):CD(n,e,t,!0,r,i)}function Lg(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)Lg(n,e[a],t,r,i);else r=cf(r)?!!r.capture:!!r,t=jg(t),n&&n[hf]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=ff(a=n.g[e],t,r,i))&&(Ng(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=Bb(n))&&(e=n.g[e.toString()],n=-1,e&&(n=ff(e,t,r,i)),(t=-1<n?e[n]:null)&&Vg(t))}function Vg(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[hf])Lb(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Ug(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Bb(e))?(Lb(t,n),0==t.h&&(t.src=null,e[pf]=null)):Ng(n)}}}function Ug(n){return n in Fg?Fg[n]:Fg[n]="on"+n}function AD(n,e){if(n.fa)n=!0;else{e=new df(e,this);var t=n.listener,r=n.la||n.src;n.ia&&Vg(n),n=t.call(r,e)}return n}function Bb(n){return(n=n[pf])instanceof Pg?n:null}var Bg="__closure_events_fn_"+(1e9*Math.random()>>>0);function jg(n){return"function"==typeof n?n:(n[Bg]||(n[Bg]=function(e){return n.handleEvent(e)}),n[Bg])}function ar(){Jo.call(this),this.i=new Pg(this),this.S=this,this.J=null}function yr(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new Qr(e,n);else if(e instanceof Qr)e.target=e.target||n;else{var i=e;TD(e=new Qr(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var u=e.g=t[a];i=$g(u,r,!0,e)&&i}if(i=$g(u=e.g=n,r,!0,e)&&i,i=$g(u,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=$g(u=e.g=t[a],r,!1,e)&&i}function $g(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var u=e[a];if(u&&!u.fa&&u.capture==t){var h=u.listener,m=u.la||u.src;u.ia&&Lb(n.i,u),i=!1!==h.call(m,r)&&i}}return i&&!r.defaultPrevented}Bn(ar,Jo),ar.prototype[hf]=!0,ar.prototype.removeEventListener=function(n,e,t,r){Lg(this,n,e,t,r)},ar.prototype.N=function(){if(ar.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Ng(t[r]);delete n.g[e],n.h--}}this.J=null},ar.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},ar.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var jb=St.JSON.stringify;function SD(){var n=zg;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var $b=new class TM{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new xD,n=>n.reset());class xD{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function MD(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function RD(n){St.setTimeout(()=>{throw n},0)}let Bl,jl=!1,zg=new class Hg{constructor(){this.h=this.g=null}add(e,t){const r=$b.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},Hb=()=>{const n=St.Promise.resolve(void 0);Bl=()=>{n.then(Gg)}};var Gg=()=>{for(var n;n=SD();){try{n.h.call(n.g)}catch(t){RD(t)}var e=$b;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}jl=!1};function So(n,e){ar.call(this),this.h=n||1,this.g=e||St,this.j=Yr(this.qb,this),this.l=Date.now()}function zb(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function Gb(n,e,t){if("function"==typeof n)t&&(n=Yr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Yr(n.handleEvent,n)}return 2147483647<Number(e)?-1:St.setTimeout(n,e||0)}function qg(n){n.g=Gb(()=>{n.g=null,n.i&&(n.i=!1,qg(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Bn(So,ar),(qe=So.prototype).ga=!1,qe.T=null,qe.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),yr(this,"tick"),this.ga&&(zb(this),this.start()))}},qe.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},qe.N=function(){So.$.N.call(this),zb(this),delete this.g};class jc extends Jo{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:qg(this)}N(){super.N(),this.g&&(St.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function $c(n){Jo.call(this),this.h=n,this.g={}}Bn($c,Jo);var ND=[];function Wg(n,e,t,r){Array.isArray(t)||(t&&(ND[0]=t.toString()),t=ND);for(var i=0;i<t.length;i++){var a=Vb(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function CM(n){Ul(n.g,function(e,t){this.g.hasOwnProperty(t)&&Vg(e)},n),n.g={}}function qb(){this.g=!0}function Hc(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function cr(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var u=1;u<i.length;u++)i[u]=""}}}return jb(t)}catch{return e}}(n,t)+(r?" "+r:"")})}$c.prototype.N=function(){$c.$.N.call(this),CM(this)},$c.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},qb.prototype.Ea=function(){this.g=!1},qb.prototype.info=function(){};var Ma={},kD=null;function Kg(){return kD=kD||new ar}function Wb(n){Qr.call(this,Ma.Ta,n)}function mf(n){const e=Kg();yr(e,new Wb(e))}function Kb(n,e){Qr.call(this,Ma.STAT_EVENT,n),this.stat=e}function Xr(n){const e=Kg();yr(e,new Kb(e,n))}function zc(n,e){Qr.call(this,Ma.Ua,n),this.size=e}function gf(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return St.setTimeout(function(){n()},e)}Ma.Ta="serverreachability",Bn(Wb,Qr),Ma.STAT_EVENT="statevent",Bn(Kb,Qr),Ma.Ua="timingevent",Bn(zc,Qr);var Zg={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Zb={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Yb(){}function MM(){}Yb.prototype.h=null;var Xb,$l={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function _f(){Qr.call(this,"d")}function uo(){Qr.call(this,"c")}function Yg(){}function wi(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new $c(this),this.P=xo,this.V=new So(n=xb?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new lo}function lo(){this.i=null,this.g="",this.h=!1}Bn(_f,Qr),Bn(uo,Qr),Bn(Yg,Yb),Yg.prototype.g=function(){return new XMLHttpRequest},Yg.prototype.i=function(){return{}},Xb=new Yg;var xo=45e3,Qg={},yf={};function Jb(n,e,t){n.L=1,n.v=wf(Os(e)),n.s=t,n.S=!0,OD(n,null)}function OD(n,e){n.G=Date.now(),ks(n),n.A=Os(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),qD(t.i,"t",r),n.C=0,t=n.l.J,n.h=new lo,n.g=b0(n.l,t?e:null,!n.s),0<n.O&&(n.M=new jc(Yr(n.Pa,n,n.g),n.O)),Wg(n.U,n.g,"readystatechange",n.nb),e=n.I?Og(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),mf(),function AM(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var u="",h=a.split("&"),m=0;m<h.length;m++){var _=h[m].split("=");if(1<_.length){var w=_[0];_=_[1];var D=w.split("_");u=2<=D.length&&"type"==D[1]?u+(w+"=")+_+"&":u+(w+"=redacted&")}}else u=null;else u=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+u})}(n.j,n.u,n.A,n.m,n.W,n.s)}function PD(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function FD(n,e,t){let i,r=!0;for(;!n.J&&n.C<t.length;){if(i=e0(n,t),i==yf){4==e&&(n.o=4,Xr(14),r=!1),Hc(n.j,n.m,null,"[Incomplete Response]");break}if(i==Qg){n.o=4,Xr(15),Hc(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Hc(n.j,n.m,i,null),Xg(n,i)}PD(n)&&i!=yf&&i!=Qg&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Xr(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),y0(e),e.M=!0,Xr(11))):(Hc(n.j,n.m,t,"[Invalid Chunked Response]"),Gc(n),bf(n))}function e0(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?yf:(t=Number(e.substring(t,r)),isNaN(t)?Qg:(r+=1)+t>e.length?yf:(e=e.slice(r,r+t),n.C=r+t,e))}function ks(n){n.Y=Date.now()+n.P,LD(n,n.P)}function LD(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=gf(Yr(n.lb,n),e)}function vf(n){n.B&&(St.clearTimeout(n.B),n.B=null)}function bf(n){0==n.l.H||n.J||oT(n.l,n)}function Gc(n){vf(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,zb(n.V),CM(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function Xg(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||r0(t.i,n)))if(!n.K&&r0(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;Oa(t),h0(t)}_0(t),Xr(18)}}else t.Fa=i[1],0<t.Fa-t.V&&37500>i[2]&&t.G&&0==t.A&&!t.v&&(t.v=gf(Yr(t.ib,t),6e3));if(1>=ZD(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else Zc(t,11)}else if((n.K||t.g==n)&&Oa(t),!lf(e))for(i=t.Ja.g.parse(e),e=0;e<i.length;e++){let _=i[e];if(t.V=_[0],_=_[1],2==t.H)if("c"==_[0]){t.K=_[1],t.pa=_[2];const w=_[3];null!=w&&(t.ra=w,t.l.info("VER="+t.ra));const D=_[4];null!=D&&(t.Ga=D,t.l.info("SVER="+t.Ga));const S=_[5];null!=S&&"number"==typeof S&&0<S&&(t.L=r=1.5*S,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const N=n.g;if(N){const U=N.g?N.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(U){var a=r.i;a.g||-1==U.indexOf("spdy")&&-1==U.indexOf("quic")&&-1==U.indexOf("h2")||(a.j=a.l,a.g=new Set,a.h&&(o0(a,a.h),a.h=null))}if(r.F){const W=N.g?N.g.getResponseHeader("X-HTTP-Session-Id"):null;W&&(r.Da=W,pn(r.I,r.F,W))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var u=n;if((r=t).wa=v0(r,r.J?r.pa:null,r.Y),u.K){YD(r.i,u);var h=u,m=r.L;m&&h.setTimeout(m),h.B&&(vf(h),ks(h)),r.g=u}else g0(r);0<t.j.length&&Af(t)}else"stop"!=_[0]&&"close"!=_[0]||Zc(t,7);else 3==t.H&&("stop"==_[0]||"close"==_[0]?"stop"==_[0]?Zc(t,7):Jr(t):"noop"!=_[0]&&t.h&&t.h.Aa(_),t.A=0)}mf()}catch{}}function UD(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Tg(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function Jg(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(Tg(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function VD(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Tg(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}(qe=wi.prototype).setTimeout=function(n){this.P=n},qe.nb=function(n){n=n.target;const e=this.M;e&&3==ts(n)?e.l():this.Pa(n)},qe.Pa=function(n){try{if(n==this.g)e:{const w=ts(this.g);var e=this.g.Ia();if(this.g.da(),!(3>w)&&(3!=w||xb||this.g&&(this.h.h||this.g.ja()||rT(this.g)))){this.J||4!=w||7==e||mf(),vf(this);var t=this.g.da();this.ca=t;t:if(PD(this)){var r=rT(this.g);n="";var i=r.length,a=4==ts(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Gc(this),bf(this);var u="";break t}this.h.i=new St.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,u=this.h.g}else u=this.g.ja();if(this.i=200==t,function SM(n,e,t,r,i,a,u){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+u})}(this.j,this.u,this.A,this.m,this.W,w,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var h,m=this.g;if((h=m.g?m.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!lf(h)){var _=h;break t}}_=null}if(!(t=_)){this.i=!1,this.o=3,Xr(12),Gc(this),bf(this);break e}Hc(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Xg(this,t)}this.S?(FD(this,w,u),xb&&this.i&&3==w&&(Wg(this.U,this.V,"tick",this.mb),this.V.start())):(Hc(this.j,this.m,u,null),Xg(this,u)),4==w&&Gc(this),this.i&&!this.J&&(4==w?oT(this.l,this):(this.i=!1,ks(this)))}else(function LM(n){const e={};n=(n.g&&2<=ts(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(lf(n[r]))continue;var t=MD(n[r]);const i=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const a=e[i]||[];e[i]=a,a.push(t)}!function kg(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<u.indexOf("Unknown SID")?(this.o=3,Xr(12)):(this.o=0,Xr(13)),Gc(this),bf(this)}}}catch{}},qe.mb=function(){if(this.g){var n=ts(this.g),e=this.g.ja();this.C<e.length&&(vf(this),FD(this,n,e),this.i&&4!=n&&ks(this))}},qe.cancel=function(){this.J=!0,Gc(this)},qe.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function xM(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(mf(),Xr(17)),Gc(this),this.o=2,bf(this)):LD(this,this.Y-n)};var t0=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ra(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Ra){this.h=n.h,e_(this,n.j),this.s=n.s,this.g=n.g,Hl(this,n.m),this.l=n.l;var e=n.i,t=new If;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Ef(this,t),this.o=n.o}else n&&(e=String(n).match(t0))?(this.h=!1,e_(this,e[1]||"",!0),this.s=zl(e[2]||""),this.g=zl(e[3]||"",!0),Hl(this,e[4]),this.l=zl(e[5]||"",!0),Ef(this,e[6]||"",!0),this.o=zl(e[7]||"")):(this.h=!1,this.i=new If(null,this.h))}function Os(n){return new Ra(n)}function e_(n,e,t){n.j=t?zl(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Hl(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Ef(n,e,t){e instanceof If?(n.i=e,function kM(n,e){e&&!n.j&&(Na(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(zD(this,r),qD(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Gl(e,RM)),n.i=new If(e,n.h))}function pn(n,e,t){n.i.set(e,t)}function wf(n){return pn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function zl(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Gl(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,jD),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function jD(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Ra.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Gl(e,n0,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Gl(e,n0,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Gl(t,"/"==t.charAt(0)?HD:$D,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Gl(t,NM)),n.join("")};var n0=/[#\/\?@]/g,$D=/[#\?:]/g,HD=/[#\?]/g,RM=/[#\?@]/g,NM=/#/g;function If(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Na(n){n.g||(n.g=new Map,n.h=0,n.i&&function BD(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function zD(n,e){Na(n),e=ql(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function GD(n,e){return Na(n),e=ql(n,e),n.g.has(e)}function qD(n,e,t){zD(n,e),0<t.length&&(n.i=null,n.g.set(ql(n,e),Bc(t)),n.h+=t.length)}function ql(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function WD(n){this.l=n||PM,n=St.PerformanceNavigationTiming?0<(n=St.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(St.g&&St.g.Ka&&St.g.Ka()&&St.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(qe=If.prototype).add=function(n,e){Na(this),this.i=null,n=ql(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},qe.forEach=function(n,e){Na(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},qe.ta=function(){Na(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let a=0;a<i.length;a++)t.push(e[r])}return t},qe.Z=function(n){Na(this);let e=[];if("string"==typeof n)GD(this,n)&&(e=e.concat(this.g.get(ql(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},qe.set=function(n,e){return Na(this),this.i=null,GD(this,n=ql(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},qe.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},qe.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const a=encodeURIComponent(String(r)),u=this.Z(r);for(r=0;r<u.length;r++){var i=a;""!==u[r]&&(i+="="+encodeURIComponent(String(u[r]))),n.push(i)}}return this.i=n.join("&")};var PM=10;function KD(n){return!!n.h||!!n.g&&n.g.size>=n.j}function ZD(n){return n.h?1:n.g?n.g.size:0}function r0(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function o0(n,e){n.g?n.g.add(e):n.h=e}function YD(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function QD(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return Bc(n.i)}WD.prototype.cancel=function(){if(this.i=QD(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var XD=class{stringify(n){return St.JSON.stringify(n,void 0)}parse(n){return St.JSON.parse(n,void 0)}};function JD(){this.g=new XD}function eT(n,e,t){const r=t||"";try{UD(n,function(i,a){let u=i;cf(i)&&(u=jb(i)),e.push(r+a+"="+encodeURIComponent(u))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Df(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Wl(n){this.l=n.fc||null,this.j=n.ob||!1}function Tf(n,e){ar.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=t_,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Bn(Wl,Yb),Wl.prototype.g=function(){return new Tf(this.l,this.j)},Wl.prototype.i=function(n){return function(){return n}}({}),Bn(Tf,ar);var t_=0;function s0(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function Kl(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Zl(n)}function Zl(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(qe=Tf.prototype).open=function(n,e){if(this.readyState!=t_)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Zl(this)},qe.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||St).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},qe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Kl(this)),this.readyState=t_},qe.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Zl(this)),this.g&&(this.readyState=3,Zl(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof St.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;s0(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},qe.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Kl(this):Zl(this),3==this.readyState&&s0(this)}},qe.Za=function(n){this.g&&(this.response=this.responseText=n,Kl(this))},qe.Ya=function(n){this.g&&(this.response=n,Kl(this))},qe.ka=function(){this.g&&Kl(this)},qe.setRequestHeader=function(n,e){this.v.append(n,e)},qe.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},qe.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Tf.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var qc=St.JSON.parse;function jn(n){ar.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=nT,this.L=this.M=!1}Bn(jn,ar);var nT="",Yl=/^https?$/i,gP=["POST","PUT"];function FM(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,c0(n),l0(n)}function c0(n){n.F||(n.F=!0,yr(n,"complete"),yr(n,"error"))}function u0(n){if(n.h&&typeof wD<"u"&&(!n.C[1]||4!=ts(n)||2!=n.da()))if(n.v&&4==ts(n))Gb(n.La,0,n);else if(yr(n,"readystatechange"),4==ts(n)){n.h=!1;try{const u=n.da();e:switch(u){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===u){var i=String(n.I).match(t0)[1]||null;!i&&St.self&&St.self.location&&(i=St.self.location.protocol.slice(0,-1)),r=!Yl.test(i?i.toLowerCase():"")}t=r}if(t)yr(n,"complete"),yr(n,"success");else{n.m=6;try{var a=2<ts(n)?n.g.statusText:""}catch{a=""}n.j=a+" ["+n.da()+"]",c0(n)}}finally{l0(n)}}}function l0(n,e){if(n.g){Wc(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||yr(n,"ready");try{t.onreadystatechange=r}catch{}}}function Wc(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(St.clearTimeout(n.A),n.A=null)}function ts(n){return n.g?n.g.readyState:0}function rT(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case nT:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function Kc(n){let e="";return Ul(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function d0(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=Kc(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):pn(n,e,t))}function ka(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Cf(n){this.Ga=0,this.j=[],this.l=new qb,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=ka("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=ka("baseRetryDelayMs",5e3,n),this.hb=ka("retryDelaySeedMs",1e4,n),this.eb=ka("forwardChannelMaxRetries",2,n),this.xa=ka("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new WD(n&&n.concurrentRequestLimit),this.Ja=new JD,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Jr(n){if(f0(n),3==n.H){var e=n.W++,t=Os(n.I);if(pn(t,"SID",n.K),pn(t,"RID",e),pn(t,"TYPE","terminate"),Ql(n,t),(e=new wi(n,n.l,e)).L=2,e.v=wf(Os(t)),t=!1,St.navigator&&St.navigator.sendBeacon)try{t=St.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&St.Image&&((new Image).src=e.v,t=!0),t||(e.g=b0(e.l,null),e.g.ha(e.v)),e.G=Date.now(),ks(e)}Sf(n)}function h0(n){n.g&&(y0(n),n.g.cancel(),n.g=null)}function f0(n){h0(n),n.u&&(St.clearTimeout(n.u),n.u=null),Oa(n),n.i.cancel(),n.m&&("number"==typeof n.m&&St.clearTimeout(n.m),n.m=null)}function Af(n){if(!KD(n.i)&&!n.m){n.m=!0;var e=n.Na;Bl||Hb(),jl||(Bl(),jl=!0),zg.add(e,n),n.C=0}}function p0(n,e){var t;t=e?e.m:n.W++;const r=Os(n.I);pn(r,"SID",n.K),pn(r,"RID",t),pn(r,"AID",n.V),Ql(n,r),n.o&&n.s&&d0(r,n.o,n.s),t=new wi(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=m0(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),o0(n.i,t),Jb(t,r,e)}function Ql(n,e){n.na&&Ul(n.na,function(t,r){pn(e,r,t)}),n.h&&UD({},function(t,r){pn(e,r,t)})}function m0(n,e,t){t=Math.min(n.j.length,t);var r=n.h?Yr(n.h.Va,n.h,n):null;e:{var i=n.j;let a=-1;for(;;){const u=["count="+t];-1==a?0<t?(a=i[0].g,u.push("ofs="+a)):a=0:u.push("ofs="+a);let h=!0;for(let m=0;m<t;m++){let _=i[m].g;const w=i[m].map;if(_-=a,0>_)a=Math.max(0,i[m].g-100),h=!1;else try{eT(w,u,"req"+_+"_")}catch{r&&r(w)}}if(h){r=u.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function g0(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;Bl||Hb(),jl||(Bl(),jl=!0),zg.add(e,n),n.A=0}}function _0(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=gf(Yr(n.Ma,n),sT(n,n.A)),n.A++,0))}function y0(n){null!=n.B&&(St.clearTimeout(n.B),n.B=null)}function iT(n){n.g=new wi(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=Os(n.wa);pn(e,"RID","rpc"),pn(e,"SID",n.K),pn(e,"AID",n.V),pn(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&pn(e,"TO",n.qa),pn(e,"TYPE","xmlhttp"),Ql(n,e),n.o&&n.s&&d0(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=wf(Os(e)),t.s=null,t.S=!0,OD(t,n)}function Oa(n){null!=n.v&&(St.clearTimeout(n.v),n.v=null)}function oT(n,e){var t=null;if(n.g==e){Oa(n),y0(n),n.g=null;var r=2}else{if(!r0(n.i,e))return;t=e.F,YD(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var i=n.C;yr(r=Kg(),new zc(r,t)),Af(n)}else g0(n);else if(3==(i=e.o)||0==i&&0<e.ca||!(1==r&&function VM(n,e){return!(ZD(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=gf(Yr(n.Na,n,e),sT(n,n.C)),n.C++,0)))}(n,e)||2==r&&_0(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:Zc(n,5);break;case 4:Zc(n,10);break;case 3:Zc(n,6);break;default:Zc(n,2)}}function sT(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function Zc(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=Yr(n.pb,n);t||(t=new Ra("//www.google.com/images/cleardot.gif"),St.location&&"http"==St.location.protocol||e_(t,"https"),wf(t)),function tT(n,e){const t=new qb;if(St.Image){const r=new Image;r.onload=Vl(Df,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Vl(Df,t,r,"TestLoadImage: error",!1,e),r.onabort=Vl(Df,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Vl(Df,t,r,"TestLoadImage: timeout",!1,e),St.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Xr(2);n.H=0,n.h&&n.h.za(e),Sf(n),f0(n)}function Sf(n){if(n.H=0,n.ma=[],n.h){const e=QD(n.i);(0!=e.length||0!=n.j.length)&&(Cb(n.ma,e),Cb(n.ma,n.j),n.i.i.length=0,Bc(n.j),n.j.length=0),n.h.ya()}}function v0(n,e,t){var r=t instanceof Ra?Os(t):new Ra(t);if(""!=r.g)e&&(r.g=e+"."+r.g),Hl(r,r.m);else{var i=St.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var a=new Ra(null);r&&e_(a,r),e&&(a.g=e),i&&Hl(a,i),t&&(a.l=t),r=a}return e=n.Da,(t=n.F)&&e&&pn(r,t,e),pn(r,"VER",n.ra),Ql(n,r),r}function b0(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new jn(t&&n.Ha&&!n.va?new Wl({ob:!0}):n.va)).Oa(n.J),e}function E0(){}function n_(){if(Ns&&!(10<=Number(wM)))throw Error("Environmental error: no available transport.")}function Lr(n,e){ar.call(this),this.g=new Cf(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!lf(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!lf(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Jl(this)}function Xl(n){_f.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function aT(){uo.call(this),this.status=1}function Jl(n){this.g=n}function ho(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function r_(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(i=0;16>i;++i)r[i]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var a=n.g[3],u=(e=n.g[0])+(a^(t=n.g[1])&((i=n.g[2])^a))+r[0]+3614090360&4294967295;u=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=t+(u<<7&4294967295|u>>>25))+((u=a+(i^e&(t^i))+r[1]+3905402710&4294967295)<<12&4294967295|u>>>20))+((u=i+(t^a&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|u>>>15))+((u=t+(e^i&(a^e))+r[3]+3250441966&4294967295)<<22&4294967295|u>>>10))+((u=e+(a^t&(i^a))+r[4]+4118548399&4294967295)<<7&4294967295|u>>>25))+((u=a+(i^e&(t^i))+r[5]+1200080426&4294967295)<<12&4294967295|u>>>20))+((u=i+(t^a&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|u>>>15))+((u=t+(e^i&(a^e))+r[7]+4249261313&4294967295)<<22&4294967295|u>>>10))+((u=e+(a^t&(i^a))+r[8]+1770035416&4294967295)<<7&4294967295|u>>>25))+((u=a+(i^e&(t^i))+r[9]+2336552879&4294967295)<<12&4294967295|u>>>20))+((u=i+(t^a&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|u>>>15))+((u=t+(e^i&(a^e))+r[11]+2304563134&4294967295)<<22&4294967295|u>>>10))+((u=e+(a^t&(i^a))+r[12]+1804603682&4294967295)<<7&4294967295|u>>>25))+((u=a+(i^e&(t^i))+r[13]+4254626195&4294967295)<<12&4294967295|u>>>20))+((u=i+(t^a&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|u>>>15))+((u=t+(e^i&(a^e))+r[15]+1236535329&4294967295)<<22&4294967295|u>>>10))+((u=e+(i^a&(t^i))+r[1]+4129170786&4294967295)<<5&4294967295|u>>>27))+((u=a+(t^i&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|u>>>23))+((u=i+(e^t&(a^e))+r[11]+643717713&4294967295)<<14&4294967295|u>>>18))+((u=t+(a^e&(i^a))+r[0]+3921069994&4294967295)<<20&4294967295|u>>>12))+((u=e+(i^a&(t^i))+r[5]+3593408605&4294967295)<<5&4294967295|u>>>27))+((u=a+(t^i&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|u>>>23))+((u=i+(e^t&(a^e))+r[15]+3634488961&4294967295)<<14&4294967295|u>>>18))+((u=t+(a^e&(i^a))+r[4]+3889429448&4294967295)<<20&4294967295|u>>>12))+((u=e+(i^a&(t^i))+r[9]+568446438&4294967295)<<5&4294967295|u>>>27))+((u=a+(t^i&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|u>>>23))+((u=i+(e^t&(a^e))+r[3]+4107603335&4294967295)<<14&4294967295|u>>>18))+((u=t+(a^e&(i^a))+r[8]+1163531501&4294967295)<<20&4294967295|u>>>12))+((u=e+(i^a&(t^i))+r[13]+2850285829&4294967295)<<5&4294967295|u>>>27))+((u=a+(t^i&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|u>>>23))+((u=i+(e^t&(a^e))+r[7]+1735328473&4294967295)<<14&4294967295|u>>>18))+((u=t+(a^e&(i^a))+r[12]+2368359562&4294967295)<<20&4294967295|u>>>12))+((u=e+(t^i^a)+r[5]+4294588738&4294967295)<<4&4294967295|u>>>28))+((u=a+(e^t^i)+r[8]+2272392833&4294967295)<<11&4294967295|u>>>21))+((u=i+(a^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|u>>>16))+((u=t+(i^a^e)+r[14]+4259657740&4294967295)<<23&4294967295|u>>>9))+((u=e+(t^i^a)+r[1]+2763975236&4294967295)<<4&4294967295|u>>>28))+((u=a+(e^t^i)+r[4]+1272893353&4294967295)<<11&4294967295|u>>>21))+((u=i+(a^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|u>>>16))+((u=t+(i^a^e)+r[10]+3200236656&4294967295)<<23&4294967295|u>>>9))+((u=e+(t^i^a)+r[13]+681279174&4294967295)<<4&4294967295|u>>>28))+((u=a+(e^t^i)+r[0]+3936430074&4294967295)<<11&4294967295|u>>>21))+((u=i+(a^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|u>>>16))+((u=t+(i^a^e)+r[6]+76029189&4294967295)<<23&4294967295|u>>>9))+((u=e+(t^i^a)+r[9]+3654602809&4294967295)<<4&4294967295|u>>>28))+((u=a+(e^t^i)+r[12]+3873151461&4294967295)<<11&4294967295|u>>>21))+((u=i+(a^e^t)+r[15]+530742520&4294967295)<<16&4294967295|u>>>16))+((u=t+(i^a^e)+r[2]+3299628645&4294967295)<<23&4294967295|u>>>9))+((u=e+(i^(t|~a))+r[0]+4096336452&4294967295)<<6&4294967295|u>>>26))+((u=a+(t^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|u>>>22))+((u=i+(e^(a|~t))+r[14]+2878612391&4294967295)<<15&4294967295|u>>>17))+((u=t+(a^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|u>>>11))+((u=e+(i^(t|~a))+r[12]+1700485571&4294967295)<<6&4294967295|u>>>26))+((u=a+(t^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|u>>>22))+((u=i+(e^(a|~t))+r[10]+4293915773&4294967295)<<15&4294967295|u>>>17))+((u=t+(a^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|u>>>11))+((u=e+(i^(t|~a))+r[8]+1873313359&4294967295)<<6&4294967295|u>>>26))+((u=a+(t^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|u>>>22))+((u=i+(e^(a|~t))+r[6]+2734768916&4294967295)<<15&4294967295|u>>>17))+((u=t+(a^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|u>>>11))+((a=(e=t+((u=e+(i^(t|~a))+r[4]+4149444226&4294967295)<<6&4294967295|u>>>26))+((u=a+(t^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|u>>>22))^((i=a+((u=i+(e^(a|~t))+r[2]+718787259&4294967295)<<15&4294967295|u>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(i+(u<<21&4294967295|u>>>11))&4294967295,n.g[2]=n.g[2]+i&4294967295,n.g[3]=n.g[3]+a&4294967295}function nn(n,e){this.h=e;for(var t=[],r=!0,i=n.length-1;0<=i;i--){var a=0|n[i];r&&a==e||(t[i]=a,r=!1)}this.g=t}(qe=jn.prototype).Oa=function(n){this.M=n},qe.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Xb.g(),this.C=function Qb(n){return n.h||(n.h=n.i())}(this.u?this.u:Xb),this.g.onreadystatechange=Yr(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(a){return void FM(this,a)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const a of r.keys())t.set(a,r.get(a))}r=Array.from(t.keys()).find(a=>"content-type"==a.toLowerCase()),i=St.FormData&&n instanceof St.FormData,!(0<=Tb(gP,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[a,u]of t)this.g.setRequestHeader(a,u);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Wc(this),0<this.B&&((this.L=function a0(n){return Ns&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Yr(this.ua,this)):this.A=Gb(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){FM(this,a)}},qe.ua=function(){typeof wD<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,yr(this,"timeout"),this.abort(8))},qe.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,yr(this,"complete"),yr(this,"abort"),l0(this))},qe.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),l0(this,!0)),jn.$.N.call(this)},qe.La=function(){this.s||(this.G||this.v||this.l?u0(this):this.kb())},qe.kb=function(){u0(this)},qe.isActive=function(){return!!this.g},qe.da=function(){try{return 2<ts(this)?this.g.status:-1}catch{return-1}},qe.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},qe.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),qc(e)}},qe.Ia=function(){return this.m},qe.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(qe=Cf.prototype).ra=8,qe.H=1,qe.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const i=new wi(this,this.l,n);let a=this.s;if(this.U&&(a?(a=Og(a),TD(a,this.U)):a=this.U),null!==this.o||this.O||(i.I=a,a=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=m0(this,i,e),pn(t=Os(this.I),"RID",n),pn(t,"CVER",22),this.F&&pn(t,"X-HTTP-Session-Id",this.F),Ql(this,t),a&&(this.O?e="headers="+encodeURIComponent(String(Kc(a)))+"&"+e:this.o&&d0(t,this.o,a)),o0(this.i,i),this.bb&&pn(t,"TYPE","init"),this.P?(pn(t,"$req",e),pn(t,"SID","null"),i.aa=!0,Jb(i,t,null)):Jb(i,t,e),this.H=2}}else 3==this.H&&(n?p0(this,n):0==this.j.length||KD(this.i)||p0(this))},qe.Ma=function(){if(this.u=null,iT(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=gf(Yr(this.jb,this),n)}},qe.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Xr(10),h0(this),iT(this))},qe.ib=function(){null!=this.v&&(this.v=null,h0(this),_0(this),Xr(19))},qe.pb=function(n){n?(this.l.info("Successfully pinged google.com"),Xr(2)):(this.l.info("Failed to ping google.com"),Xr(1))},qe.isActive=function(){return!!this.h&&this.h.isActive(this)},(qe=E0.prototype).Ba=function(){},qe.Aa=function(){},qe.za=function(){},qe.ya=function(){},qe.isActive=function(){return!0},qe.Va=function(){},n_.prototype.g=function(n,e){return new Lr(n,e)},Bn(Lr,ar),Lr.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;Xr(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=v0(n,null,n.Y),Af(n)},Lr.prototype.close=function(){Jr(this.g)},Lr.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=jb(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&Af(e)},Lr.prototype.N=function(){this.g.h=null,delete this.j,Jr(this.g),delete this.g,Lr.$.N.call(this)},Bn(Xl,_f),Bn(aT,uo),Bn(Jl,E0),Jl.prototype.Ba=function(){yr(this.g,"a")},Jl.prototype.Aa=function(n){yr(this.g,new Xl(n))},Jl.prototype.za=function(n){yr(this.g,new aT)},Jl.prototype.ya=function(){yr(this.g,"b")},Bn(ho,function UM(){this.blockSize=-1}),ho.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},ho.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,i=this.h,a=0;a<e;){if(0==i)for(;a<=t;)r_(this,n,a),a+=this.blockSize;if("string"==typeof n){for(;a<e;)if(r[i++]=n.charCodeAt(a++),i==this.blockSize){r_(this,r),i=0;break}}else for(;a<e;)if(r[i++]=n[a++],i==this.blockSize){r_(this,r),i=0;break}}this.h=i,this.i+=e},ho.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var BM={};function i_(n){return-128<=n&&128>n?function Sb(n,e){var t=BM;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new nn([0|e],0>e?-1:0)}):new nn([0|n],0>n?-1:0)}function ns(n){if(isNaN(n)||!isFinite(n))return xf;if(0>n)return Vr(ns(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=uT;return new nn(e,0)}var uT=4294967296,xf=i_(0),lT=i_(1),jM=i_(16777216);function rs(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function mi(n){return-1==n.h}function Vr(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new nn(t,~n.h).add(lT)}function o_(n,e){return n.add(Vr(e))}function Mf(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function Ps(n,e){this.g=n,this.h=e}function s_(n,e){if(rs(e))throw Error("division by zero");if(rs(n))return new Ps(xf,xf);if(mi(n))return e=s_(Vr(n),e),new Ps(Vr(e.g),Vr(e.h));if(mi(e))return e=s_(n,Vr(e)),new Ps(Vr(e.g),e.h);if(30<n.g.length){if(mi(n)||mi(e))throw Error("slowDivide_ only works with positive integers.");for(var t=lT,r=e;0>=r.X(n);)t=dT(t),r=dT(r);var i=ed(t,1),a=ed(r,1);for(r=ed(r,2),t=ed(t,2);!rs(r);){var u=a.add(r);0>=u.X(n)&&(i=i.add(t),a=u),r=ed(r,1),t=ed(t,1)}return e=o_(n,i.R(e)),new Ps(i,e)}for(i=xf;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),u=(a=ns(t)).R(e);mi(u)||0<u.X(n);)u=(a=ns(t-=r)).R(e);rs(a)&&(a=lT),i=i.add(a),n=o_(n,u)}return new Ps(i,n)}function dT(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new nn(t,n.h)}function ed(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,i=[],a=0;a<r;a++)i[a]=0<e?n.D(a+t)>>>e|n.D(a+t+1)<<32-e:n.D(a+t);return new nn(i,n.h)}(qe=nn.prototype).ea=function(){if(mi(this))return-Vr(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:uT+r)*e,e*=uT}return n},qe.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(rs(this))return"0";if(mi(this))return"-"+Vr(this).toString(n);for(var e=ns(Math.pow(n,6)),t=this,r="";;){var i=s_(t,e).g,a=((0<(t=o_(t,i.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(rs(t=i))return a+r;for(;6>a.length;)a="0"+a;r=a+r}},qe.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},qe.X=function(n){return mi(n=o_(this,n))?-1:rs(n)?0:1},qe.abs=function(){return mi(this)?Vr(this):this},qe.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,i=0;i<=e;i++){var a=r+(65535&this.D(i))+(65535&n.D(i)),u=(a>>>16)+(this.D(i)>>>16)+(n.D(i)>>>16);r=u>>>16,t[i]=(u&=65535)<<16|(a&=65535)}return new nn(t,-2147483648&t[t.length-1]?-1:0)},qe.R=function(n){if(rs(this)||rs(n))return xf;if(mi(this))return mi(n)?Vr(this).R(Vr(n)):Vr(Vr(this).R(n));if(mi(n))return Vr(this.R(Vr(n)));if(0>this.X(jM)&&0>n.X(jM))return ns(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<n.g.length;i++){var a=this.D(r)>>>16,u=65535&this.D(r),h=n.D(i)>>>16,m=65535&n.D(i);t[2*r+2*i]+=u*m,Mf(t,2*r+2*i),t[2*r+2*i+1]+=a*m,Mf(t,2*r+2*i+1),t[2*r+2*i+1]+=u*h,Mf(t,2*r+2*i+1),t[2*r+2*i+2]+=a*h,Mf(t,2*r+2*i+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new nn(t,0)},qe.gb=function(n){return s_(this,n).h},qe.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new nn(t,this.h&n.h)},qe.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new nn(t,this.h|n.h)},qe.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new nn(t,this.h^n.h)},n_.prototype.createWebChannel=n_.prototype.g,Lr.prototype.send=Lr.prototype.u,Lr.prototype.open=Lr.prototype.m,Lr.prototype.close=Lr.prototype.close,Zg.NO_ERROR=0,Zg.TIMEOUT=8,Zg.HTTP_ERROR=6,Zb.COMPLETE="complete",MM.EventType=$l,$l.OPEN="a",$l.CLOSE="b",$l.ERROR="c",$l.MESSAGE="d",ar.prototype.listen=ar.prototype.O,jn.prototype.listenOnce=jn.prototype.P,jn.prototype.getLastError=jn.prototype.Sa,jn.prototype.getLastErrorCode=jn.prototype.Ia,jn.prototype.getStatus=jn.prototype.da,jn.prototype.getResponseJson=jn.prototype.Wa,jn.prototype.getResponseText=jn.prototype.ja,jn.prototype.send=jn.prototype.ha,jn.prototype.setWithCredentials=jn.prototype.Oa,ho.prototype.digest=ho.prototype.l,ho.prototype.reset=ho.prototype.reset,ho.prototype.update=ho.prototype.j,nn.prototype.add=nn.prototype.add,nn.prototype.multiply=nn.prototype.R,nn.prototype.modulo=nn.prototype.gb,nn.prototype.compare=nn.prototype.X,nn.prototype.toNumber=nn.prototype.ea,nn.prototype.toString=nn.prototype.toString,nn.prototype.getBits=nn.prototype.D,nn.fromNumber=ns,nn.fromString=function cT(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return Vr(cT(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=ns(Math.pow(e,8)),r=xf,i=0;i<n.length;i+=8){var a=Math.min(8,n.length-i),u=parseInt(n.substring(i,i+a),e);8>a?(a=ns(Math.pow(e,a)),r=r.R(a).add(ns(u))):r=(r=r.R(t)).add(ns(u))}return r};var $M=ji.createWebChannelTransport=function(){return new n_},_P=ji.getStatEventTarget=function(){return Kg()},w0=ji.ErrorCode=Zg,hT=ji.EventType=Zb,HM=ji.Event=Ma,fT=ji.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Rf=ji.FetchXmlHttpFactory=Wl,a_=ji.WebChannel=MM,pT=ji.XhrIo=jn,zM=ji.Md5=ho,Yc=ji.Integer=nn;const mT="@firebase/firestore";class ur{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ur.UNAUTHENTICATED=new ur(null),ur.GOOGLE_CREDENTIALS=new ur("google-credentials-uid"),ur.FIRST_PARTY=new ur("first-party-uid"),ur.MOCK_USER=new ur("mock-user");let td="9.23.0";const is=new Io.Yd("@firebase/firestore");function I0(){return is.logLevel}function Te(n,...e){if(is.logLevel<=Io.in.DEBUG){const t=e.map(D0);is.debug(`Firestore (${td}): ${n}`,...t)}}function Kn(n,...e){if(is.logLevel<=Io.in.ERROR){const t=e.map(D0);is.error(`Firestore (${td}): ${n}`,...t)}}function Mo(n,...e){if(is.logLevel<=Io.in.WARN){const t=e.map(D0);is.warn(`Firestore (${td}): ${n}`,...t)}}function D0(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function Qe(n="Unexpected state"){const e=`FIRESTORE (${td}) INTERNAL ASSERTION FAILED: `+n;throw Kn(e),new Error(e)}function nt(n,e){n||Qe()}function He(n,e){return n}const X={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class be extends $e.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class lr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class gT{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class WM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ur.UNAUTHENTICATED))}shutdown(){}}class KM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class ZM{constructor(e){this.t=e,this.currentUser=ur.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=_=>this.i!==i?(i=this.i,t(_)):Promise.resolve();let u=new lr;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new lr,e.enqueueRetryable(()=>a(this.currentUser))};const h=()=>{const _=u;e.enqueueRetryable((0,ne.Z)(function*(){yield _.promise,yield a(r.currentUser)}))},m=_=>{Te("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=_,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(_=>m(_)),setTimeout(()=>{if(!this.auth){const _=this.t.getImmediate({optional:!0});_?m(_):(Te("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new lr)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Te("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(nt("string"==typeof r.accessToken),new gT(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return nt(null===e||"string"==typeof e),new ur(e)}}class _T{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=ur.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class yT{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new _T(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(ur.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class vT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class YM{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=a=>{null!=a.error&&Te("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.T;return this.T=a.token,Te("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{Te("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.I.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.I.getImmediate({optional:!0});a?i(a):Te("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(nt("string"==typeof t.token),this.T=t.token,new vT(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function XM(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class bT{static A(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=XM(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[a]%62))}return r}}function It(n,e){return n<e?-1:n>e?1:0}function nd(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}class In{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new be(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new be(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new be(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new be(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return In.fromMillis(Date.now())}static fromDate(e){return In.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new In(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?It(this.nanoseconds,e.nanoseconds):It(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class rt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new rt(e)}static min(){return new rt(new In(0,0))}static max(){return new rt(new In(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Qc{constructor(e,t,r){void 0===t?t=0:t>e.length&&Qe(),void 0===r?r=e.length-t:r>e.length-t&&Qe(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Qc.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Qc?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),u=t.get(i);if(a<u)return-1;if(a>u)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Zt extends Qc{construct(e,t,r){return new Zt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new be(X.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Zt(t)}static emptyPath(){return new Zt([])}}const JM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class On extends Qc{construct(e,t,r){return new On(e,t,r)}static isValidIdentifier(e){return JM.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),On.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new On(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new be(X.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;i<e.length;){const h=e[i];if("\\"===h){if(i+1===e.length)throw new be(X.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[i+1];if("\\"!==m&&"."!==m&&"`"!==m)throw new be(X.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=m,i+=2}else"`"===h?(u=!u,i++):"."!==h||u?(r+=h,i++):(a(),i++)}if(a(),u)throw new be(X.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new On(t)}static emptyPath(){return new On([])}}class je{constructor(e){this.path=e}static fromPath(e){return new je(Zt.fromString(e))}static fromName(e){return new je(Zt.fromString(e).popFirst(5))}static empty(){return new je(Zt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Zt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Zt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new je(new Zt(e.slice()))}}function A0(n){return new Ii(n.readTime,n.key,-1)}class Ii{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ii(rt.min(),je.empty(),-1)}static max(){return new Ii(rt.max(),je.empty(),-1)}}function S0(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=je.comparator(n.documentKey,e.documentKey),0!==t?t:It(n.largestBatchId,e.largestBatchId))}const x0="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class M0{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Ls(n){return u_.apply(this,arguments)}function u_(){return u_=(0,ne.Z)(function*(n){if(n.code!==X.FAILED_PRECONDITION||n.message!==x0)throw n;Te("LocalStore","Unexpectedly lost primary lease")}),u_.apply(this,arguments)}class q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Qe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new q((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof q?t:q.resolve(t)}catch(t){return q.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):q.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):q.reject(t)}static resolve(e){return new q((t,r)=>{t(e)})}static reject(e){return new q((t,r)=>{r(e)})}static waitFor(e){return new q((t,r)=>{let i=0,a=0,u=!1;e.forEach(h=>{++i,h.next(()=>{++a,u&&a===i&&t()},m=>r(m))}),u=!0,a===i&&t()})}static or(e){let t=q.resolve(!1);for(const r of e)t=t.next(i=>i?q.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}static mapArray(e,t){return new q((r,i)=>{const a=e.length,u=new Array(a);let h=0;for(let m=0;m<a;m++){const _=m;t(e[_]).next(w=>{u[_]=w,++h,h===a&&r(u)},w=>i(w))}})}static doWhile(e,t){return new q((r,i)=>{const a=()=>{!0===e()?t().next(()=>{a()},i):r()};a()})}}function Fa(n){return"IndexedDbTransactionError"===n.name}let $i=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ot(i),this.ut=i=>r.writeSequenceNumber(i))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function Pf(n){return null==n}function Ff(n){return 0===n&&1/n==-1/0}function hR(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function fo(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function PT(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class vn{constructor(e,t){this.comparator=e,this.root=t||Jn.EMPTY}insert(e,t){return new vn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Jn.BLACK,null,null))}remove(e){return new vn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Jn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new h_(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new h_(this.root,e,this.comparator,!1)}getReverseIterator(){return new h_(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new h_(this.root,e,this.comparator,!0)}}class h_{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Jn{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??Jn.RED,this.left=i??Jn.EMPTY,this.right=a??Jn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new Jn(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Jn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Jn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Jn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Jn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Qe();const e=this.left.check();if(e!==this.right.check())throw Qe();return e+(this.isRed()?0:1)}}Jn.EMPTY=null,Jn.RED=!0,Jn.BLACK=!1,Jn.EMPTY=new class{constructor(){this.size=0}get key(){throw Qe()}get value(){throw Qe()}get color(){throw Qe()}get left(){throw Qe()}get right(){throw Qe()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Jn(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class bn{constructor(e){this.comparator=e,this.data=new vn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new FT(this.data.getIterator())}getIteratorFrom(e){return new FT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof bn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new bn(this.comparator);return t.data=e,t}}class FT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Ur{constructor(e){this.fields=e,e.sort(On.comparator)}static empty(){return new Ur([])}unionWith(e){let t=new bn(On.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Ur(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return nd(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class LT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class er{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new LT("Invalid base64 string: "+i):i}}(e);return new er(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new er(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return It(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}er.EMPTY_BYTE_STRING=new er("");const fR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function La(n){if(nt(!!n),"string"==typeof n){let e=0;const t=fR.exec(n);if(nt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Pn(n.seconds),nanos:Pn(n.nanos)}}function Pn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function po(n){return"string"==typeof n?er.fromBase64String(n):er.fromUint8Array(n)}function f_(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function p_(n){const e=n.mapValue.fields.__previous_value__;return f_(e)?p_(e):e}function id(n){const e=La(n.mapValue.fields.__local_write_time__.timestampValue);return new In(e.seconds,e.nanos)}class VT{constructor(e,t,r,i,a,u,h,m,_){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=h,this.longPollingOptions=m,this.useFetchStreams=_}}class Vs{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Vs("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Vs&&e.projectId===this.projectId&&e.database===this.database}}const Us={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Bs(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?f_(n)?4:O0(n)?9007199254740991:10:Qe()}function No(n,e){if(n===e)return!0;const t=Bs(n);if(t!==Bs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return id(n).isEqual(id(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=La(r.timestampValue),u=La(i.timestampValue);return a.seconds===u.seconds&&a.nanos===u.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,po(n.bytesValue).isEqual(po(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Pn(r.geoPointValue.latitude)===Pn(i.geoPointValue.latitude)&&Pn(r.geoPointValue.longitude)===Pn(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Pn(r.integerValue)===Pn(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=Pn(r.doubleValue),u=Pn(i.doubleValue);return a===u?Ff(a)===Ff(u):isNaN(a)&&isNaN(u)}return!1}(n,e);case 9:return nd(n.arrayValue.values||[],e.arrayValue.values||[],No);case 10:return function(r,i){const a=r.mapValue.fields||{},u=i.mapValue.fields||{};if(hR(a)!==hR(u))return!1;for(const h in a)if(a.hasOwnProperty(h)&&(void 0===u[h]||!No(a[h],u[h])))return!1;return!0}(n,e);default:return Qe()}var i}function Uf(n,e){return void 0!==(n.values||[]).find(t=>No(t,e))}function Va(n,e){if(n===e)return 0;const t=Bs(n),r=Bs(e);if(t!==r)return It(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return It(n.booleanValue,e.booleanValue);case 2:return function(i,a){const u=Pn(i.integerValue||i.doubleValue),h=Pn(a.integerValue||a.doubleValue);return u<h?-1:u>h?1:u===h?0:isNaN(u)?isNaN(h)?0:-1:1}(n,e);case 3:return g_(n.timestampValue,e.timestampValue);case 4:return g_(id(n),id(e));case 5:return It(n.stringValue,e.stringValue);case 6:return function(i,a){const u=po(i),h=po(a);return u.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const u=i.split("/"),h=a.split("/");for(let m=0;m<u.length&&m<h.length;m++){const _=It(u[m],h[m]);if(0!==_)return _}return It(u.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const u=It(Pn(i.latitude),Pn(a.latitude));return 0!==u?u:It(Pn(i.longitude),Pn(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const u=i.values||[],h=a.values||[];for(let m=0;m<u.length&&m<h.length;++m){const _=Va(u[m],h[m]);if(_)return _}return It(u.length,h.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){if(i===Us.mapValue&&a===Us.mapValue)return 0;if(i===Us.mapValue)return 1;if(a===Us.mapValue)return-1;const u=i.fields||{},h=Object.keys(u),m=a.fields||{},_=Object.keys(m);h.sort(),_.sort();for(let w=0;w<h.length&&w<_.length;++w){const D=It(h[w],_[w]);if(0!==D)return D;const S=Va(u[h[w]],m[_[w]]);if(0!==S)return S}return It(h.length,_.length)}(n.mapValue,e.mapValue);default:throw Qe()}}function g_(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return It(n,e);const t=La(n),r=La(e),i=It(t.seconds,r.seconds);return 0!==i?i:It(t.nanos,r.nanos)}function Ua(n){return __(n)}function __(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=La(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?po(n.bytesValue).toBase64():"referenceValue"in n?je.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const u of r.values||[])a?a=!1:i+=",",i+=__(u);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",u=!0;for(const h of i)u?u=!1:a+=",",a+=`${h}:${__(r.fields[h])}`;return a+"}"}(n.mapValue):Qe();var e}function k0(n){return!!n&&"integerValue"in n}function Bf(n){return!!n&&"arrayValue"in n}function UT(n){return!!n&&"nullValue"in n}function BT(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function jf(n){return!!n&&"mapValue"in n}function eu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return fo(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=eu(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=eu(n.arrayValue.values[t]);return e}return Object.assign({},n)}function O0(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}class br{constructor(e){this.value=e}static empty(){return new br({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!jf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=eu(t)}setAll(e){let t=On.emptyPath(),r={},i=[];e.forEach((u,h)=>{if(!t.isImmediateParentOf(h)){const m=this.getFieldsMap(t);this.applyChanges(m,r,i),r={},i=[],t=h.popLast()}u?r[h.lastSegment()]=eu(u):i.push(h.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());jf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return No(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];jf(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){fo(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new br(eu(this.value))}}function F0(n){const e=[];return fo(n.fields,(t,r)=>{const i=new On([t]);if(jf(r)){const a=F0(r.mapValue).fields;if(0===a.length)e.push(i);else for(const u of a)e.push(i.child(u))}else e.push(i)}),new Ur(e)}class Dn{constructor(e,t,r,i,a,u,h){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=a,this.data=u,this.documentState=h}static newInvalidDocument(e){return new Dn(e,0,rt.min(),rt.min(),rt.min(),br.empty(),0)}static newFoundDocument(e,t,r,i){return new Dn(e,1,t,rt.min(),r,i,0)}static newNoDocument(e,t){return new Dn(e,2,t,rt.min(),rt.min(),br.empty(),0)}static newUnknownDocument(e,t){return new Dn(e,3,t,rt.min(),rt.min(),br.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(rt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=br.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=br.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=rt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Dn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Dn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class $s{constructor(e,t){this.position=e,this.inclusive=t}}function HT(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],u=n.position[i];if(r=a.field.isKeyField()?je.comparator(je.fromName(u.referenceValue),t.key):Va(u,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function ti(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!No(n.position[t],e.position[t]))return!1;return!0}class ko{constructor(e,t="asc"){this.field=e,this.dir=t}}function mR(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class zT{}class Gt extends zT{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new _R(e,t,r):"array-contains"===t?new vR(e,r):"in"===t?new v_(e,r):"not-in"===t?new YT(e,r):"array-contains-any"===t?new bR(e,r):new Gt(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new KT(e,r):new yR(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Va(t,this.value)):null!==t&&Bs(this.value)===Bs(t)&&this.matchesComparison(Va(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Qe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class un extends zT{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new un(e,t)}matches(e){return tu(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function tu(n){return"and"===n.op}function GT(n){return function gR(n){for(const e of n.filters)if(e instanceof un)return!1;return!0}(n)&&tu(n)}function qT(n){if(n instanceof Gt)return n.field.canonicalString()+n.op.toString()+Ua(n.value);if(GT(n))return n.filters.map(e=>qT(e)).join(",");{const e=n.filters.map(t=>qT(t)).join(",");return`${n.op}(${e})`}}function sd(n,e){return n instanceof Gt?(t=n,(r=e)instanceof Gt&&t.op===r.op&&t.field.isEqual(r.field)&&No(t.value,r.value)):n instanceof un?function(t,r){return r instanceof un&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,a,u)=>i&&sd(a,r.filters[u]),!0)}(n,e):void Qe();var t,r}function y_(n){return n instanceof Gt?`${(e=n).field.canonicalString()} ${e.op} ${Ua(e.value)}`:n instanceof un?function(e){return e.op.toString()+" {"+e.getFilters().map(y_).join(" ,")+"}"}(n):"Filter";var e}class _R extends Gt{constructor(e,t,r){super(e,t,r),this.key=je.fromName(r.referenceValue)}matches(e){const t=je.comparator(e.key,this.key);return this.matchesComparison(t)}}class KT extends Gt{constructor(e,t){super(e,"in",t),this.keys=ZT(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class yR extends Gt{constructor(e,t){super(e,"not-in",t),this.keys=ZT(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function ZT(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>je.fromName(r.referenceValue))}class vR extends Gt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Bf(t)&&Uf(t.arrayValue,this.value)}}class v_ extends Gt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Uf(this.value.arrayValue,t)}}class YT extends Gt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Uf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Uf(this.value.arrayValue,t)}}class bR extends Gt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Bf(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Uf(this.value.arrayValue,r))}}class b_{constructor(e,t=null,r=[],i=[],a=null,u=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=u,this.endAt=h,this.dt=null}}function Hf(n,e=null,t=[],r=[],i=null,a=null,u=null){return new b_(n,e,t,r,i,a,u)}function ad(n){const e=He(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>qT(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Pf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Ua(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Ua(r)).join(",")),e.dt=t}return e.dt}function cd(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!mR(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!sd(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!ti(n.startAt,e.startAt)&&ti(n.endAt,e.endAt)}function E_(n){return je.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}class ss{constructor(e,t=null,r=[],i=[],a=null,u="F",h=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=u,this.startAt=h,this.endAt=m,this.wt=null,this._t=null}}function Gf(n){return new ss(n)}function XT(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function ru(n){const e=He(n);if(null===e.wt){e.wt=[];const t=function I_(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}(e),r=function JT(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new ko(t)),e.wt.push(new ko(On.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e.wt.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new ko(On.keyField(),a))}}}return e.wt}function ni(n){const e=He(n);if(!e._t)if("F"===e.limitType)e._t=Hf(e.path,e.collectionGroup,ru(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of ru(e))t.push(new ko(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new $s(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new $s(e.startAt.position,e.startAt.inclusive):null;e._t=Hf(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e._t}function T_(n,e,t){return new ss(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ud(n,e){return cd(ni(n),ni(e))&&n.limitType===e.limitType}function V0(n){return`${ad(ni(n))}|lt:${n.limitType}`}function U0(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>y_(r)).join(", ")}]`),Pf(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Ua(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Ua(r)).join(",")),`Target(${t})`}(ni(n))}; limitType=${n.limitType})`}function qf(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):je.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of ru(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,u){const h=HT(i,a,u);return i.inclusive?h<=0:h<0}(t.startAt,ru(t),r)||t.endAt&&!function(i,a,u){const h=HT(i,a,u);return i.inclusive?h>=0:h>0}(t.endAt,ru(t),r)));var t,r}function eC(n){return(e,t)=>{let r=!1;for(const i of ru(n)){const a=tC(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function tC(n,e,t){const r=n.field.isKeyField()?je.comparator(e.key,t.key):function(i,a,u){const h=a.data.field(i),m=u.data.field(i);return null!==h&&null!==m?Va(h,m):Qe()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Qe()}}class as{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){fo(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return PT(this.inner)}size(){return this.innerSize}}const nC=new vn(je.comparator);function gi(){return nC}const rC=new vn(je.comparator);function Wf(...n){let e=rC;for(const t of n)e=e.insert(t.key,t);return e}function ER(n){let e=rC;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Oo(){return C_()}function wR(){return C_()}function C_(){return new as(n=>n.toString(),(n,e)=>n.isEqual(e))}const wP=new vn(je.comparator),IP=new bn(je.comparator);function Nt(...n){let e=IP;for(const t of n)e=e.add(t);return e}const DP=new bn(It);function IR(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ff(e)?"-0":e}}function DR(n){return{integerValue:""+n}}function j0(n,e){return function IT(n){return"number"==typeof n&&Number.isInteger(n)&&!Ff(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}(e)?DR(e):IR(n,e)}class ld{constructor(){this._=void 0}}function oC(n,e,t){return n instanceof dd?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&f_(i)&&(i=p_(i)),i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof hd?CR(n,e):n instanceof iu?$0(n,e):function(r,i){const a=Kf(r,i),u=sC(a)+sC(r.gt);return k0(a)&&k0(r.gt)?DR(u):IR(r.serializer,u)}(n,e)}function TR(n,e,t){return n instanceof hd?CR(n,e):n instanceof iu?$0(n,e):t}function Kf(n,e){return n instanceof fd?k0(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class dd extends ld{}class hd extends ld{constructor(e){super(),this.elements=e}}function CR(n,e){const t=aC(e);for(const r of n.elements)t.some(i=>No(i,r))||t.push(r);return{arrayValue:{values:t}}}class iu extends ld{constructor(e){super(),this.elements=e}}function $0(n,e){let t=aC(e);for(const r of n.elements)t=t.filter(i=>!No(i,r));return{arrayValue:{values:t}}}class fd extends ld{constructor(e,t){super(),this.serializer=e,this.gt=t}}function sC(n){return Pn(n.integerValue||n.doubleValue)}function aC(n){return Bf(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Zf{constructor(e,t){this.version=e,this.transformResults=t}}class mn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new mn}static exists(e){return new mn(void 0,e)}static updateTime(e){return new mn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function S_(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class x_{}function cC(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new md(n.key,mn.none()):new pd(n.key,n.data,mn.none());{const t=n.data,r=br.empty();let i=new bn(On.comparator);for(let a of e.fields)if(!i.has(a)){let u=t.field(a);null===u&&a.length>1&&(a=a.popLast(),u=t.field(a)),null===u?r.delete(a):r.set(a,u),i=i.add(a)}return new Hs(n.key,r,new Ur(i.toArray()),mn.none())}}function SR(n,e,t){n instanceof pd?function(r,i,a){const u=r.value.clone(),h=lC(r.fieldTransforms,i,a.transformResults);u.setAll(h),i.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(n,e,t):n instanceof Hs?function(r,i,a){if(!S_(r.precondition,i))return void i.convertToUnknownDocument(a.version);const u=lC(r.fieldTransforms,i,a.transformResults),h=i.data;h.setAll(uC(r)),h.setAll(u),i.convertToFoundDocument(a.version,h).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Yf(n,e,t,r){return n instanceof pd?function(i,a,u,h){if(!S_(i.precondition,a))return u;const m=i.value.clone(),_=dC(i.fieldTransforms,h,a);return m.setAll(_),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),null}(n,e,t,r):n instanceof Hs?function(i,a,u,h){if(!S_(i.precondition,a))return u;const m=dC(i.fieldTransforms,h,a),_=a.data;return _.setAll(uC(i)),_.setAll(m),a.convertToFoundDocument(a.version,_).setHasLocalMutations(),null===u?null:u.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(w=>w.field))}(n,e,t,r):(u=t,S_(n.precondition,a=e)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):u);var a,u}function xR(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=Kf(r.transform,i||null);null!=a&&(null===t&&(t=br.empty()),t.set(r.field,a))}return t||null}function M_(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&nd(t,r,(i,a)=>function AR(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof hd&&r instanceof hd||t instanceof iu&&r instanceof iu?nd(t.elements,r.elements,No):t instanceof fd&&r instanceof fd?No(t.gt,r.gt):t instanceof dd&&r instanceof dd);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class pd extends x_{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Hs extends x_{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function uC(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function lC(n,e,t){const r=new Map;nt(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],u=a.transform,h=e.data.field(a.field);r.set(a.field,TR(u,h,t[i]))}return r}function dC(n,e,t){const r=new Map;for(const i of n){const a=i.transform,u=t.data.field(i.field);r.set(i.field,oC(a,u,e))}return r}class md extends x_{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class H0 extends x_{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class z0{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&SR(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Yf(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Yf(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=wR();return this.mutations.forEach(i=>{const a=e.get(i.key),u=a.overlayedDocument;let h=this.applyToLocalView(u,a.mutatedFields);h=t.has(i.key)?null:h;const m=cC(u,h);null!==m&&r.set(i.key,m),u.isValidDocument()||u.convertToNoDocument(rt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Nt())}isEqual(e){return this.batchId===e.batchId&&nd(this.mutations,e.mutations,(t,r)=>M_(t,r))&&nd(this.baseMutations,e.baseMutations,(t,r)=>M_(t,r))}}class G0{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){nt(e.mutations.length===r.length);let i=wP;const a=e.mutations;for(let u=0;u<a.length;u++)i=i.insert(a[u].key,r[u].version);return new G0(e,t,r,i)}}class R_{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class MR{constructor(e,t){this.count=e,this.unchangedNames=t}}var tr,qt;function RR(n){if(void 0===n)return Kn("GRPC error has no .code"),X.UNKNOWN;switch(n){case tr.OK:return X.OK;case tr.CANCELLED:return X.CANCELLED;case tr.UNKNOWN:return X.UNKNOWN;case tr.DEADLINE_EXCEEDED:return X.DEADLINE_EXCEEDED;case tr.RESOURCE_EXHAUSTED:return X.RESOURCE_EXHAUSTED;case tr.INTERNAL:return X.INTERNAL;case tr.UNAVAILABLE:return X.UNAVAILABLE;case tr.UNAUTHENTICATED:return X.UNAUTHENTICATED;case tr.INVALID_ARGUMENT:return X.INVALID_ARGUMENT;case tr.NOT_FOUND:return X.NOT_FOUND;case tr.ALREADY_EXISTS:return X.ALREADY_EXISTS;case tr.PERMISSION_DENIED:return X.PERMISSION_DENIED;case tr.FAILED_PRECONDITION:return X.FAILED_PRECONDITION;case tr.ABORTED:return X.ABORTED;case tr.OUT_OF_RANGE:return X.OUT_OF_RANGE;case tr.UNIMPLEMENTED:return X.UNIMPLEMENTED;case tr.DATA_LOSS:return X.DATA_LOSS;default:return Qe()}}(qt=tr||(tr={}))[qt.OK=0]="OK",qt[qt.CANCELLED=1]="CANCELLED",qt[qt.UNKNOWN=2]="UNKNOWN",qt[qt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qt[qt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qt[qt.NOT_FOUND=5]="NOT_FOUND",qt[qt.ALREADY_EXISTS=6]="ALREADY_EXISTS",qt[qt.PERMISSION_DENIED=7]="PERMISSION_DENIED",qt[qt.UNAUTHENTICATED=16]="UNAUTHENTICATED",qt[qt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qt[qt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qt[qt.ABORTED=10]="ABORTED",qt[qt.OUT_OF_RANGE=11]="OUT_OF_RANGE",qt[qt.UNIMPLEMENTED=12]="UNIMPLEMENTED",qt[qt.INTERNAL=13]="INTERNAL",qt[qt.UNAVAILABLE=14]="UNAVAILABLE",qt[qt.DATA_LOSS=15]="DATA_LOSS";class ri{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return Qf}static getOrCreateInstance(){return null===Qf&&(Qf=new ri),Qf}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let Qf=null;const NR=new Yc([4294967295,4294967295],0);function Z0(n){const e=function K0(){return new TextEncoder}().encode(n),t=new zM;return t.update(e),new Uint8Array(t.digest())}function hC(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Yc([t,r],0),new Yc([i,a],0)]}class Xf{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new mo(`Invalid padding: ${t}`);if(r<0)throw new mo(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new mo(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new mo(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=Yc.fromNumber(this.It)}Et(e,t,r){let i=e.add(t.multiply(Yc.fromNumber(r)));return 1===i.compare(NR)&&(i=new Yc([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=Z0(e),[r,i]=hC(t);for(let a=0;a<this.hashCount;a++){const u=this.Et(r,i,a);if(!this.At(u))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),u=new Xf(a,i,t);return r.forEach(h=>u.insert(h)),u}insert(e){if(0===this.It)return;const t=Z0(e),[r,i]=hC(t);for(let a=0;a<this.hashCount;a++){const u=this.Et(r,i,a);this.Rt(u)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class mo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class gd{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,ou.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new gd(rt.min(),i,new vn(It),gi(),Nt())}}class ou{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new ou(r,t,Nt(),Nt(),Nt())}}class _d{constructor(e,t,r,i){this.Pt=e,this.removedTargetIds=t,this.key=r,this.bt=i}}class fC{constructor(e,t){this.targetId=e,this.Vt=t}}class kR{constructor(e,t,r=er.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class Y0{constructor(){this.St=0,this.Dt=mC(),this.Ct=er.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=Nt(),t=Nt(),r=Nt();return this.Dt.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Qe()}}),new ou(this.Ct,this.xt,e,t,r)}Ft(){this.Nt=!1,this.Dt=mC()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class OR{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=gi(),this.zt=pC(),this.Wt=new vn(It)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const r=this.Zt(t);switch(e.state){case 0:this.te(t)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(t);break;case 3:this.te(t)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),r.$t(e.resumeToken));break;default:Qe()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((r,i)=>{this.te(i)&&t(i)})}ne(e){var t;const r=e.targetId,i=e.Vt.count,a=this.se(r);if(a){const u=a.target;if(E_(u))if(0===i){const h=new je(u.path);this.Yt(r,h,Dn.newNoDocument(h,rt.min()))}else nt(1===i);else{const h=this.ie(r);if(h!==i){const m=this.re(e,h);0!==m&&(this.ee(r),this.Wt=this.Wt.insert(r,2===m?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=ri.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(_,w,D){var S,N,U,W,oe,Re;const Be={localCacheCount:w,existenceFilterCount:D.count},Ve=D.unchangedNames;return Ve&&(Be.bloomFilter={applied:0===_,hashCount:null!==(S=Ve?.hashCount)&&void 0!==S?S:0,bitmapLength:null!==(W=null===(U=null===(N=Ve?.bits)||void 0===N?void 0:N.bitmap)||void 0===U?void 0:U.length)&&void 0!==W?W:0,padding:null!==(Re=null===(oe=Ve?.bits)||void 0===oe?void 0:oe.padding)&&void 0!==Re?Re:0}),Be}(m,h,e.Vt))}}}}re(e,t){const{unchangedNames:r,count:i}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:a="",padding:u=0},hashCount:h=0}=r;let m,_;try{m=po(a).toUint8Array()}catch(w){if(w instanceof LT)return Mo("Decoding the base64 bloom filter in existence filter failed ("+w.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw w}try{_=new Xf(m,u,h)}catch(w){return Mo(w instanceof mo?"BloomFilter error: ":"Applying bloom filter failed: ",w),1}return 0===_.It?1:i!==t-this.oe(e.targetId,_)?2:0}oe(e,t){const r=this.Gt.getRemoteKeysForTarget(e);let i=0;return r.forEach(a=>{const u=this.Gt.ue(),h=`projects/${u.projectId}/databases/${u.database}/documents/${a.path.canonicalString()}`;t.vt(h)||(this.Yt(e,a,null),i++)}),i}ce(e){const t=new Map;this.Qt.forEach((a,u)=>{const h=this.se(u);if(h){if(a.current&&E_(h.target)){const m=new je(h.target.path);null!==this.jt.get(m)||this.ae(u,m)||this.Yt(u,m,Dn.newNoDocument(m,e))}a.Mt&&(t.set(u,a.Ot()),a.Ft())}});let r=Nt();this.zt.forEach((a,u)=>{let h=!0;u.forEachWhile(m=>{const _=this.se(m);return!_||"TargetPurposeLimboResolution"===_.purpose||(h=!1,!1)}),h&&(r=r.add(a))}),this.jt.forEach((a,u)=>u.setReadTime(e));const i=new gd(e,t,this.Wt,this.jt,r);return this.jt=gi(),this.zt=pC(),this.Wt=new vn(It),i}Jt(e,t){if(!this.te(e))return;const r=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,r),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,r){if(!this.te(e))return;const i=this.Zt(e);this.ae(e,t)?i.Bt(t,1):i.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),r&&(this.jt=this.jt.insert(t,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new Y0,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new bn(It),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||Te("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new Y0),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function pC(){return new vn(je.comparator)}function mC(){return new vn(je.comparator)}const PR={asc:"ASCENDING",desc:"DESCENDING"},gC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},TP={and:"AND",or:"OR"};class _C{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Q0(n,e){return n.useProto3Json||Pf(e)?e:{value:e}}function su(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function FR(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function X0(n,e){return su(n,e.toTimestamp())}function $n(n){return nt(!!n),rt.fromTimestamp(function(e){const t=La(e);return new In(t.seconds,t.nanos)}(n))}function N_(n,e){return(t=n,new Zt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function yC(n){const e=Zt.fromString(n);return nt(np(e)),e}function yd(n,e){return N_(n.databaseId,e.path)}function Po(n,e){const t=yC(e);if(t.get(1)!==n.databaseId.projectId)throw new be(X.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new be(X.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new je(J0(t))}function Ba(n,e){return N_(n.databaseId,e)}function vd(n){return new Zt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function J0(n){return nt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function vC(n,e,t){return{name:yd(n,e),fields:t.value.mapValue.fields}}function LR(n,e){return{documents:[Ba(n,e.path)]}}function wC(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Ba(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Ba(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(m){if(0!==m.length)return BR(un.create(m,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const a=function(m){if(0!==m.length)return m.map(_=>{return{field:au((w=_).field),direction:UR(w.dir)};var w})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const u=Q0(n,e.limit);var h,m;return null!==u&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt={before:(h=e.startAt).inclusive,values:h.position}),e.endAt&&(t.structuredQuery.endAt={before:!(m=e.endAt).inclusive,values:m.position}),t}function tE(n){let e=function Jf(n){const e=yC(n);return 4===e.length?Zt.emptyPath():J0(e)}(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){nt(1===r);const w=t.from[0];w.allDescendants?i=w.collectionId:e=e.child(w.collectionId)}let a=[];t.where&&(a=function(w){const D=IC(w);return D instanceof un&&GT(D)?D.getFilters():[D]}(t.where));let u=[];t.orderBy&&(u=t.orderBy.map(w=>{return new ko(tp((D=w).field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction));var D}));let h=null;t.limit&&(h=function(w){let D;return D="object"==typeof w?w.value:w,Pf(D)?null:D}(t.limit));let m=null;var w;t.startAt&&(m=new $s((w=t.startAt).values||[],!!w.before));let _=null;return t.endAt&&(_=function(w){return new $s(w.values||[],!w.before)}(t.endAt)),function w_(n,e,t,r,i,a,u,h){return new ss(n,e,t,r,i,a,u,h)}(e,i,u,a,h,"F",m,_)}function IC(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=tp(e.unaryFilter.field);return Gt.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=tp(e.unaryFilter.field);return Gt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=tp(e.unaryFilter.field);return Gt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=tp(e.unaryFilter.field);return Gt.create(a,"!=",{nullValue:"NULL_VALUE"});default:return Qe()}}(n):void 0!==n.fieldFilter?Gt.create(tp((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Qe()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return un.create(e.compositeFilter.filters.map(t=>IC(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return Qe()}}(e.compositeFilter.op))}(n):Qe();var e}function UR(n){return PR[n]}function SP(n){return gC[n]}function xP(n){return TP[n]}function au(n){return{fieldPath:n.canonicalString()}}function tp(n){return On.fromServerFormat(n.fieldPath)}function BR(n){return n instanceof Gt?function(e){if("=="===e.op){if(BT(e.value))return{unaryFilter:{field:au(e.field),op:"IS_NAN"}};if(UT(e.value))return{unaryFilter:{field:au(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(BT(e.value))return{unaryFilter:{field:au(e.field),op:"IS_NOT_NAN"}};if(UT(e.value))return{unaryFilter:{field:au(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:au(e.field),op:SP(e.op),value:e.value}}}(n):n instanceof un?function(e){const t=e.getFilters().map(r=>BR(r));return 1===t.length?t[0]:{compositeFilter:{op:xP(e.op),filters:t}}}(n):Qe()}function jR(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function np(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class zs{constructor(e,t,r,i,a=rt.min(),u=rt.min(),h=er.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=h,this.expectedCount=m}withSequenceNumber(e){return new zs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new zs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new zs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new zs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class DC{constructor(e){this.fe=e}}function bd(n){const e=tE({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?T_(e,e.limit,"L"):e}class $a{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(Pn(e.integerValue));else if("doubleValue"in e){const r=Pn(e.doubleValue);isNaN(r)?this.ye(t,13):(this.ye(t,15),Ff(r)?t.pe(0):t.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie(`${r.seconds||""}`),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(po(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(t,45),t.pe(r.latitude||0),t.pe(r.longitude||0)}else"mapValue"in e?O0(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):Qe()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const r=e.fields||{};this.ye(t,55);for(const i of Object.keys(r))this.Te(i,t),this.me(r[i],t)}Pe(e,t){const r=e.values||[];this.ye(t,50);for(const i of r)this.me(i,t)}ve(e,t){this.ye(t,37),je.fromName(e).path.forEach(r=>{this.ye(t,60),this.be(r,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}$a.Ve=new $a;class WR{constructor(){this.rn=new F_}addToCollectionParentIndex(e,t){return this.rn.add(t),q.resolve()}getCollectionParents(e,t){return q.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return q.resolve()}deleteFieldIndex(e,t){return q.resolve()}getDocumentsMatchingTarget(e,t){return q.resolve(null)}getIndexType(e,t){return q.resolve(0)}getFieldIndexes(e,t){return q.resolve([])}getNextCollectionGroupToUpdate(e){return q.resolve(null)}getMinOffset(e,t){return q.resolve(Ii.min())}getMinOffsetFromCollectionGroup(e,t){return q.resolve(Ii.min())}updateCollectionGroup(e,t,r){return q.resolve()}updateIndexEntries(e,t){return q.resolve()}}class F_{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new bn(Zt.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new bn(Zt.comparator)).toArray()}}new Uint8Array(0);class ii{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new ii(e,ii.DEFAULT_COLLECTION_PERCENTILE,ii.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}ii.DEFAULT_COLLECTION_PERCENTILE=10,ii.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ii.DEFAULT=new ii(41943040,ii.DEFAULT_COLLECTION_PERCENTILE,ii.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ii.DISABLED=new ii(-1,0,0);class Id{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new Id(0)}static Mn(){return new Id(-1)}}class FP{constructor(){this.changes=new as(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Dn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?q.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class d{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class f{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&Yf(r.mutation,i,Ur.empty(),In.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Nt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Nt()){const i=Oo();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(a=>{let u=Wf();return a.forEach((h,m)=>{u=u.insert(h,m.overlayedDocument)}),u}))}getOverlayedDocuments(e,t){const r=Oo();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Nt()))}populateOverlays(e,t,r){const i=[];return r.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((u,h)=>{t.set(u,h)})})}computeViews(e,t,r,i){let a=gi();const u=C_(),h=C_();return t.forEach((m,_)=>{const w=r.get(_.key);i.has(_.key)&&(void 0===w||w.mutation instanceof Hs)?a=a.insert(_.key,_):void 0!==w?(u.set(_.key,w.mutation.getFieldMask()),Yf(w.mutation,_,w.mutation.getFieldMask(),In.now())):u.set(_.key,Ur.empty())}),this.recalculateAndSaveOverlays(e,a).next(m=>(m.forEach((_,w)=>u.set(_,w)),t.forEach((_,w)=>{var D;return h.set(_,new d(w,null!==(D=u.get(_))&&void 0!==D?D:null))}),h))}recalculateAndSaveOverlays(e,t){const r=C_();let i=new vn((u,h)=>u-h),a=Nt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(u=>{for(const h of u)h.keys().forEach(m=>{const _=t.get(m);if(null===_)return;let w=r.get(m)||Ur.empty();w=h.applyToLocalView(_,w),r.set(m,w);const D=(i.get(h.batchId)||Nt()).add(m);i=i.insert(h.batchId,D)})}).next(()=>{const u=[],h=i.getReverseIterator();for(;h.hasNext();){const m=h.getNext(),_=m.key,w=m.value,D=wR();w.forEach(S=>{if(!a.has(S)){const N=cC(t.get(S),r.get(S));null!==N&&D.set(S,N),a=a.add(S)}}),u.push(this.documentOverlayCache.saveOverlays(e,_,D))}return q.waitFor(u)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return je.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):function L0(n){return null!==n.collectionGroup}(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(a=>{const u=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):q.resolve(Oo());let h=-1,m=a;return u.next(_=>q.forEach(_,(w,D)=>(h<D.largestBatchId&&(h=D.largestBatchId),a.get(w)?q.resolve():this.remoteDocumentCache.getEntry(e,w).next(S=>{m=m.insert(w,S)}))).next(()=>this.populateOverlays(e,_,a)).next(()=>this.computeViews(e,m,_,Nt())).next(w=>({batchId:h,changes:ER(w)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new je(t)).next(r=>{let i=Wf();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let a=Wf();return this.indexManager.getCollectionParents(e,i).next(u=>q.forEach(u,h=>{const m=(_=t,w=h.child(i),new ss(w,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt));var _,w;return this.getDocumentsMatchingCollectionQuery(e,m,r).next(_=>{_.forEach((w,D)=>{a=a.insert(w,D)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i))).next(a=>{i.forEach((h,m)=>{const _=m.getKey();null===a.get(_)&&(a=a.insert(_,Dn.newInvalidDocument(_)))});let u=Wf();return a.forEach((h,m)=>{const _=i.get(h);void 0!==_&&Yf(_.mutation,m,Ur.empty(),In.now()),qf(t,m)&&(u=u.insert(h,m))}),u})}}class g{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return q.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var r;return this.cs.set(t.id,{id:(r=t).id,version:r.version,createTime:$n(r.createTime)}),q.resolve()}getNamedQuery(e,t){return q.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(r=t).name,query:bd(r.bundledQuery),readTime:$n(r.readTime)}),q.resolve();var r}}class y{constructor(){this.overlays=new vn(je.comparator),this.ls=new Map}getOverlay(e,t){return q.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Oo();return q.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.we(e,t,a)}),q.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.ls.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.ls.delete(r)),q.resolve()}getOverlaysForCollection(e,t,r){const i=Oo(),a=t.length+1,u=new je(t.child("")),h=this.overlays.getIteratorFrom(u);for(;h.hasNext();){const m=h.getNext().value,_=m.getKey();if(!t.isPrefixOf(_.path))break;_.path.length===a&&m.largestBatchId>r&&i.set(m.getKey(),m)}return q.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new vn((_,w)=>_-w);const u=this.overlays.getIterator();for(;u.hasNext();){const _=u.getNext().value;if(_.getKey().getCollectionGroup()===t&&_.largestBatchId>r){let w=a.get(_.largestBatchId);null===w&&(w=Oo(),a=a.insert(_.largestBatchId,w)),w.set(_.getKey(),_)}}const h=Oo(),m=a.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((_,w)=>h.set(_,w)),!(h.size()>=i)););return q.resolve(h)}we(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const u=this.ls.get(i.largestBatchId).delete(r.key);this.ls.set(i.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new R_(t,r));let a=this.ls.get(t);void 0===a&&(a=Nt(),this.ls.set(t,a)),this.ls.set(t,a.add(r.key))}}class b{constructor(){this.fs=new bn(I.ds),this.ws=new bn(I._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const r=new I(e,t);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ys(new I(e,t))}ps(e,t){e.forEach(r=>this.removeReference(r,t))}Is(e){const t=new je(new Zt([])),r=new I(t,e),i=new I(t,e+1),a=[];return this.ws.forEachInRange([r,i],u=>{this.ys(u),a.push(u.key)}),a}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new je(new Zt([])),r=new I(t,e),i=new I(t,e+1);let a=Nt();return this.ws.forEachInRange([r,i],u=>{a=a.add(u.key)}),a}containsKey(e){const t=new I(e,0),r=this.fs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class I{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return je.comparator(e.key,t.key)||It(e.As,t.As)}static _s(e,t){return It(e.As,t.As)||je.comparator(e.key,t.key)}}class C{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new bn(I.ds)}checkEmpty(e){return q.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const a=this.vs;this.vs++;const u=new z0(a,t,r,i);this.mutationQueue.push(u);for(const h of i)this.Rs=this.Rs.add(new I(h.key,a)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return q.resolve(u)}lookupMutationBatch(e,t){return q.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.bs(t+1),a=i<0?0:i;return q.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return q.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new I(t,0),i=new I(t,Number.POSITIVE_INFINITY),a=[];return this.Rs.forEachInRange([r,i],u=>{const h=this.Ps(u.As);a.push(h)}),q.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new bn(It);return t.forEach(i=>{const a=new I(i,0),u=new I(i,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([a,u],h=>{r=r.add(h.As)})}),q.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;je.isDocumentKey(a)||(a=a.child(""));const u=new I(new je(a),0);let h=new bn(It);return this.Rs.forEachWhile(m=>{const _=m.key.path;return!!r.isPrefixOf(_)&&(_.length===i&&(h=h.add(m.As)),!0)},u),q.resolve(this.Vs(h))}Vs(e){const t=[];return e.forEach(r=>{const i=this.Ps(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){nt(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return q.forEach(t.mutations,i=>{const a=new I(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,t){const r=new I(t,0),i=this.Rs.firstAfterOrEqual(r);return q.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return q.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class M{constructor(e){this.Ds=e,this.docs=new vn(je.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,u=this.Ds(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return q.resolve(r?r.document.mutableCopy():Dn.newInvalidDocument(t))}getEntries(e,t){let r=gi();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():Dn.newInvalidDocument(i))}),q.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let a=gi();const u=t.path,h=new je(u.child("")),m=this.docs.getIteratorFrom(h);for(;m.hasNext();){const{key:_,value:{document:w}}=m.getNext();if(!u.isPrefixOf(_.path))break;_.path.length>u.length+1||S0(A0(w),r)<=0||(i.has(w.key)||qf(t,w))&&(a=a.insert(w.key,w.mutableCopy()))}return q.resolve(a)}getAllFromCollectionGroup(e,t,r,i){Qe()}Cs(e,t){return q.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new L(this)}getSize(e){return q.resolve(this.size)}}class L extends FP{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.os.addEntry(e,i)):this.os.removeEntry(r)}),q.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class H{constructor(e){this.persistence=e,this.xs=new as(t=>ad(t),cd),this.lastRemoteSnapshotVersion=rt.min(),this.highestTargetId=0,this.Ns=0,this.ks=new b,this.targetCount=0,this.Ms=Id.kn()}forEachTarget(e,t){return this.xs.forEach((r,i)=>t(i)),q.resolve()}getLastRemoteSnapshotVersion(e){return q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return q.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),q.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ns&&(this.Ns=t),q.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new Id(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,q.resolve()}updateTargetData(e,t){return this.Fn(t),q.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,q.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.xs.forEach((u,h)=>{h.sequenceNumber<=t&&null===r.get(h.targetId)&&(this.xs.delete(u),a.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)}),q.waitFor(a).next(()=>i)}getTargetCount(e){return q.resolve(this.targetCount)}getTargetData(e,t){const r=this.xs.get(t)||null;return q.resolve(r)}addMatchingKeys(e,t,r){return this.ks.gs(t,r),q.resolve()}removeMatchingKeys(e,t,r){this.ks.ps(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(u=>{a.push(i.markPotentiallyOrphaned(e,u))}),q.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),q.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ks.Es(t);return q.resolve(r)}containsKey(e,t){return q.resolve(this.ks.containsKey(t))}}class se{constructor(e,t){this.$s={},this.overlays={},this.Os=new $i(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new H(this),this.indexManager=new WR,this.remoteDocumentCache=new M(r=>this.referenceDelegate.Ls(r)),this.serializer=new DC(t),this.qs=new g(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new y,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.$s[e.toKey()];return r||(r=new C(t,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,r){Te("MemoryPersistence","Starting transaction:",e);const i=new Ee(this.Os.next());return this.referenceDelegate.Us(),r(i).next(a=>this.referenceDelegate.Ks(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Gs(e,t){return q.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,t)))}}class Ee extends M0{constructor(e){super(),this.currentSequenceNumber=e}}class Pe{constructor(e){this.persistence=e,this.Qs=new b,this.js=null}static zs(e){return new Pe(e)}get Ws(){if(this.js)return this.js;throw Qe()}addReference(e,t,r){return this.Qs.addReference(r,t),this.Ws.delete(r.toString()),q.resolve()}removeReference(e,t,r){return this.Qs.removeReference(r,t),this.Ws.add(r.toString()),q.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),q.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(i=>this.Ws.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.Ws.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return q.forEach(this.Ws,r=>{const i=je.fromPath(r);return this.Hs(e,i).next(a=>{a||t.removeEntry(i,rt.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(r=>{r?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return q.or([()=>q.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class hp{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Fi=r,this.Bi=i}static Li(e,t){let r=Nt(),i=Nt();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new hp(e,t.fromCache,r,i)}}class jC{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Ki(e,t).next(a=>a||this.Gi(e,t,i,r)).next(a=>a||this.Qi(e,t))}Ki(e,t){if(XT(t))return q.resolve(null);let r=ni(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=T_(t,null,"F"),r=ni(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const u=Nt(...a);return this.Ui.getDocuments(e,u).next(h=>this.indexManager.getMinOffset(e,r).next(m=>{const _=this.ji(t,h);return this.zi(t,_,u,m.readTime)?this.Ki(e,T_(t,null,"F")):this.Wi(e,_,t,m)}))})))}Gi(e,t,r,i){return XT(t)||i.isEqual(rt.min())?this.Qi(e,t):this.Ui.getDocuments(e,r).next(a=>{const u=this.ji(t,a);return this.zi(t,u,r,i)?this.Qi(e,t):(I0()<=Io.in.DEBUG&&Te("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),U0(t)),this.Wi(e,u,t,function ET(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=rt.fromTimestamp(1e9===r?new In(t+1,0):new In(t,r));return new Ii(i,je.empty(),e)}(i,-1)))})}ji(e,t){let r=new bn(eC(e));return t.forEach((i,a)=>{qf(e,a)&&(r=r.add(a))}),r}zi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Qi(e,t){return I0()<=Io.in.DEBUG&&Te("QueryEngine","Using full collection scan to execute query:",U0(t)),this.Ui.getDocumentsMatchingQuery(e,t,Ii.min())}Wi(e,t,r,i){return this.Ui.getDocumentsMatchingQuery(e,r,i).next(a=>(t.forEach(u=>{a=a.insert(u.key,u)}),a))}}class eN{constructor(e,t,r,i){this.persistence=e,this.Hi=t,this.serializer=i,this.Ji=new vn(It),this.Yi=new as(a=>ad(a),cd),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new f(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function UP(n,e){return tN.apply(this,arguments)}function tN(){return tN=(0,ne.Z)(function*(n,e){const t=He(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,t.tr(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const u=[],h=[];let m=Nt();for(const _ of i){u.push(_.batchId);for(const w of _.mutations)m=m.add(w.key)}for(const _ of a){h.push(_.batchId);for(const w of _.mutations)m=m.add(w.key)}return t.localDocuments.getDocuments(r,m).next(_=>({er:_,removedBatchIds:u,addedBatchIds:h}))})})}),tN.apply(this,arguments)}function BP(n){const e=He(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function NB(n,e){const t=He(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function V_(n,e,t){return nN.apply(this,arguments)}function nN(){return nN=(0,ne.Z)(function*(n,e,t){const r=He(n),i=r.Ji.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,u=>r.persistence.referenceDelegate.removeTarget(u,i)))}catch(u){if(!Fa(u))throw u;Te("LocalStore",`Failed to update sequence numbers for target ${e}: ${u}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(i.target)}),nN.apply(this,arguments)}function $C(n,e,t){const r=He(n);let i=rt.min(),a=Nt();return r.persistence.runTransaction("Execute query","readonly",u=>function(h,m,_){const w=He(h),D=w.Yi.get(_);return void 0!==D?q.resolve(w.Ji.get(D)):w.Bs.getTargetData(m,_)}(r,u,ni(e)).next(h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(u,h.targetId).next(m=>{a=m})}).next(()=>r.Hi.getDocumentsMatchingQuery(u,e,t?i:rt.min(),t?a:Nt())).next(h=>(function zP(n,e,t){let r=n.Xi.get(e)||rt.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.Xi.set(e,r)}(r,function B0(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}(e),h),{documents:h,ir:a})))}class aN{constructor(){this.activeTargetIds=function iC(){return DP}()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class WP{constructor(){this.Hr=new aN,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,r){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new aN,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class PB{Yr(e){}shutdown(){}}class KP{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Te("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Te("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let GC=null;function uN(){return null===GC?GC=268435456+Math.round(2147483648*Math.random()):GC++,"0x"+GC.toString(16)}const FB={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class LB{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const Di="WebChannelConnection";class VB extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,r,i,a){const u=uN(),h=this.To(e,t);Te("RestConnection",`Sending RPC '${e}' ${u}:`,h,r);const m={};return this.Eo(m,i,a),this.Ao(e,h,m,r).then(_=>(Te("RestConnection",`Received RPC '${e}' ${u}: `,_),_),_=>{throw Mo("RestConnection",`RPC '${e}' ${u} failed with error: `,_,"url: ",h,"request:",r),_})}vo(e,t,r,i,a,u){return this.Io(e,t,r,i,a)}Eo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+td,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}To(e,t){return`${this.mo}/v1/${t}:${FB[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,r,i){const a=uN();return new Promise((u,h)=>{const m=new pT;m.setWithCredentials(!0),m.listenOnce(hT.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case w0.NO_ERROR:const w=m.getResponseJson();Te(Di,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(w)),u(w);break;case w0.TIMEOUT:Te(Di,`RPC '${e}' ${a} timed out`),h(new be(X.DEADLINE_EXCEEDED,"Request time out"));break;case w0.HTTP_ERROR:const D=m.getStatus();if(Te(Di,`RPC '${e}' ${a} failed with status:`,D,"response text:",m.getResponseText()),D>0){let S=m.getResponseJson();Array.isArray(S)&&(S=S[0]);const N=S?.error;if(N&&N.status&&N.message){const U=function(W){const oe=W.toLowerCase().replace(/_/g,"-");return Object.values(X).indexOf(oe)>=0?oe:X.UNKNOWN}(N.status);h(new be(U,N.message))}else h(new be(X.UNKNOWN,"Server responded with status "+m.getStatus()))}else h(new be(X.UNAVAILABLE,"Connection failed."));break;default:Qe()}}finally{Te(Di,`RPC '${e}' ${a} completed.`)}});const _=JSON.stringify(i);Te(Di,`RPC '${e}' ${a} sending request:`,i),m.send(t,"POST",_,r,15)})}Ro(e,t,r){const i=uN(),a=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=$M(),h=_P(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;void 0!==_&&(m.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(m.xmlHttpFactory=new Rf({})),this.Eo(m.initMessageHeaders,t,r),m.encodeInitMessageHeaders=!0;const w=a.join("");Te(Di,`Creating RPC '${e}' stream ${i}: ${w}`,m);const D=u.createWebChannel(w,m);let S=!1,N=!1;const U=new LB({ro:oe=>{N?Te(Di,`Not sending because RPC '${e}' stream ${i} is closed:`,oe):(S||(Te(Di,`Opening RPC '${e}' stream ${i} transport.`),D.open(),S=!0),Te(Di,`RPC '${e}' stream ${i} sending:`,oe),D.send(oe))},oo:()=>D.close()}),W=(oe,Re,Be)=>{oe.listen(Re,Ve=>{try{Be(Ve)}catch(et){setTimeout(()=>{throw et},0)}})};return W(D,a_.EventType.OPEN,()=>{N||Te(Di,`RPC '${e}' stream ${i} transport opened.`)}),W(D,a_.EventType.CLOSE,()=>{N||(N=!0,Te(Di,`RPC '${e}' stream ${i} transport closed`),U.wo())}),W(D,a_.EventType.ERROR,oe=>{N||(N=!0,Mo(Di,`RPC '${e}' stream ${i} transport errored:`,oe),U.wo(new be(X.UNAVAILABLE,"The operation could not be completed")))}),W(D,a_.EventType.MESSAGE,oe=>{var Re;if(!N){const Be=oe.data[0];nt(!!Be);const et=Be.error||(null===(Re=Be[0])||void 0===Re?void 0:Re.error);if(et){Te(Di,`RPC '${e}' stream ${i} received error:`,et);const Rt=et.status;let At=function(Ln){const Dr=tr[Ln];if(void 0!==Dr)return RR(Dr)}(Rt),Wt=et.message;void 0===At&&(At=X.INTERNAL,Wt="Unknown error status: "+Rt+" with message "+et.message),N=!0,U.wo(new be(At,Wt)),D.close()}else Te(Di,`RPC '${e}' stream ${i} received:`,Be),U._o(Be)}}),W(h,HM.STAT_EVENT,oe=>{oe.stat===fT.PROXY?Te(Di,`RPC '${e}' stream ${i} detected buffering proxy`):oe.stat===fT.NOPROXY&&Te(Di,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{U.fo()},0),U}}function qC(){return typeof document<"u"?document:null}function uE(n){return new _C(n,!0)}class lN{constructor(e,t,r=1e3,i=1.5,a=6e4){this.ii=e,this.timerId=t,this.Po=r,this.bo=i,this.Vo=a,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,t-r);i>0&&Te("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class YP{constructor(e,t,r,i,a,u,h,m){this.ii=e,this.$o=r,this.Oo=i,this.connection=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=h,this.listener=m,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new lN(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,ne.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,ne.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var r=this;return(0,ne.Z)(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():t&&t.code===X.RESOURCE_EXHAUSTED?(Kn(t.toString()),Kn("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):t&&t.code===X.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Fo===t&&this.Zo(r,i)},r=>{e(()=>{const i=new be(X.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(i)})})}Zo(e,t){const r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(i=>{r(()=>this.tu(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Go(){var e=this;this.state=5,this.qo.No((0,ne.Z)(function*(){e.state=0,e.start()}))}tu(e){return Te("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(Te("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class UB extends YP{constructor(e,t,r,i,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,u),this.serializer=a}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function EC(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(m=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===m?1:"REMOVE"===m?2:"CURRENT"===m?3:"RESET"===m?4:Qe(),i=e.targetChange.targetIds||[],a=function(m,_){return m.useProto3Json?(nt(void 0===_||"string"==typeof _),er.fromBase64String(_||"")):(nt(void 0===_||_ instanceof Uint8Array),er.fromUint8Array(_||new Uint8Array))}(n,e.targetChange.resumeToken),u=e.targetChange.cause,h=u&&function(m){const _=void 0===m.code?X.UNKNOWN:RR(m.code);return new be(_,m.message||"")}(u);t=new kR(r,i,a,h||null)}else if("documentChange"in e){const r=e.documentChange,i=Po(n,r.document.name),a=$n(r.document.updateTime),u=r.document.createTime?$n(r.document.createTime):rt.min(),h=new br({mapValue:{fields:r.document.fields}}),m=Dn.newFoundDocument(i,a,u,h);t=new _d(r.targetIds||[],r.removedTargetIds||[],m.key,m)}else if("documentDelete"in e){const r=e.documentDelete,i=Po(n,r.document),a=r.readTime?$n(r.readTime):rt.min(),u=Dn.newNoDocument(i,a);t=new _d([],r.removedTargetIds||[],u.key,u)}else if("documentRemove"in e){const r=e.documentRemove,i=Po(n,r.document);t=new _d([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return Qe();{const r=e.filter,{count:i=0,unchangedNames:a}=r,u=new MR(i,a);t=new fC(r.targetId,u)}}var m;return t}(this.serializer,e),r=function(i){if(!("targetChange"in i))return rt.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?rt.min():a.readTime?$n(a.readTime):rt.min()}(e);return this.listener.nu(t,r)}su(e){const t={};t.database=vd(this.serializer),t.addTarget=function(i,a){let u;const h=a.target;if(u=E_(h)?{documents:LR(i,h)}:{query:wC(i,h)},u.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){u.resumeToken=FR(i,a.resumeToken);const m=Q0(i,a.expectedCount);null!==m&&(u.expectedCount=m)}else if(a.snapshotVersion.compareTo(rt.min())>0){u.readTime=su(i,a.snapshotVersion.toTimestamp());const m=Q0(i,a.expectedCount);null!==m&&(u.expectedCount=m)}return u}(this.serializer,e);const r=function VR(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Qe()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Wo(t)}iu(e){const t={};t.database=vd(this.serializer),t.removeTarget=e,this.Wo(t)}}class BB extends YP{constructor(e,t,r,i,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,u),this.serializer=a,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(nt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function AP(n,e){return n&&n.length>0?(nt(void 0!==e),n.map(t=>function(r,i){let a=$n(r.updateTime?r.updateTime:i);return a.isEqual(rt.min())&&(a=$n(i)),new Zf(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=$n(e.commitTime);return this.listener.cu(r,t)}return nt(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=vd(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>function ep(n,e){let t;if(e instanceof pd)t={update:vC(n,e.key,e.value)};else if(e instanceof md)t={delete:yd(n,e.key)};else if(e instanceof Hs)t={update:vC(n,e.key,e.data),updateMask:jR(e.fieldMask)};else{if(!(e instanceof H0))return Qe();t={verify:yd(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const u=a.transform;if(u instanceof dd)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof hd)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof iu)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof fd)return{fieldPath:a.field.canonicalString(),increment:u.gt};throw Qe()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:X0(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:Qe()),t;var i}(this.serializer,r))};this.Wo(t)}}class jB extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.lu=!1}fu(){if(this.lu)throw new be(X.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Io(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new be(X.UNKNOWN,i.toString())})}vo(e,t,r,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,u])=>this.connection.vo(e,t,r,a,u,i)).catch(a=>{throw"FirebaseError"===a.name?(a.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new be(X.UNKNOWN,a.toString())})}terminate(){this.lu=!0}}class HB{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(Kn(t),this.mu=!1):Te("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class zB{constructor(e,t,r,i,a){var u=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=a,this.Pu.Yr(h=>{r.enqueueAndForget((0,ne.Z)(function*(){var m;Td(u)&&(Te("RemoteStore","Restarting streams for network reachability change."),yield(m=(0,ne.Z)(function*(_){const w=He(_);w.vu.add(4),yield U_(w),w.bu.set("Unknown"),w.vu.delete(4),yield lE(w)}),function(_){return m.apply(this,arguments)})(u))}))}),this.bu=new HB(r,i)}}function lE(n){return hN.apply(this,arguments)}function hN(){return hN=(0,ne.Z)(function*(n){if(Td(n))for(const e of n.Ru)yield e(!0)}),hN.apply(this,arguments)}function U_(n){return fN.apply(this,arguments)}function fN(){return fN=(0,ne.Z)(function*(n){for(const e of n.Ru)yield e(!1)}),fN.apply(this,arguments)}function WC(n,e){const t=He(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),gN(t)?mN(t):j_(t).Ko()&&pN(t,e))}function dE(n,e){const t=He(n),r=j_(t);t.Au.delete(e),r.Ko()&&QP(t,e),0===t.Au.size&&(r.Ko()?r.jo():Td(t)&&t.bu.set("Unknown"))}function pN(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(rt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}j_(n).su(e)}function QP(n,e){n.Vu.qt(e),j_(n).iu(e)}function mN(n){n.Vu=new OR({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),j_(n).start(),n.bu.gu()}function gN(n){return Td(n)&&!j_(n).Uo()&&n.Au.size>0}function Td(n){return 0===He(n).vu.size}function XP(n){n.Vu=void 0}function GB(n){return _N.apply(this,arguments)}function _N(){return _N=(0,ne.Z)(function*(n){n.Au.forEach((e,t)=>{pN(n,e)})}),_N.apply(this,arguments)}function qB(n,e){return yN.apply(this,arguments)}function yN(){return yN=(0,ne.Z)(function*(n,e){XP(n),gN(n)?(n.bu.Iu(e),mN(n)):n.bu.set("Unknown")}),yN.apply(this,arguments)}function WB(n,e,t){return vN.apply(this,arguments)}function vN(){return vN=(0,ne.Z)(function*(n,e,t){if(n.bu.set("Online"),e instanceof kR&&2===e.state&&e.cause)try{yield(r=(0,ne.Z)(function*(i,a){const u=a.cause;for(const h of a.targetIds)i.Au.has(h)&&(yield i.remoteSyncer.rejectListen(h,u),i.Au.delete(h),i.Vu.removeTarget(h))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){Te("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield KC(n,r)}else if(e instanceof _d?n.Vu.Ht(e):e instanceof fC?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(rt.min()))try{const r=yield BP(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const u=i.Vu.ce(a);return u.targetChanges.forEach((h,m)=>{if(h.resumeToken.approximateByteSize()>0){const _=i.Au.get(m);_&&i.Au.set(m,_.withResumeToken(h.resumeToken,a))}}),u.targetMismatches.forEach((h,m)=>{const _=i.Au.get(h);if(!_)return;i.Au.set(h,_.withResumeToken(er.EMPTY_BYTE_STRING,_.snapshotVersion)),QP(i,h);const w=new zs(_.target,h,m,_.sequenceNumber);pN(i,w)}),i.remoteSyncer.applyRemoteEvent(u)}(n,t))}catch(r){Te("RemoteStore","Failed to raise snapshot:",r),yield KC(n,r)}var r}),vN.apply(this,arguments)}function KC(n,e,t){return bN.apply(this,arguments)}function bN(){return bN=(0,ne.Z)(function*(n,e,t){if(!Fa(e))throw e;n.vu.add(1),yield U_(n),n.bu.set("Offline"),t||(t=()=>BP(n.localStore)),n.asyncQueue.enqueueRetryable((0,ne.Z)(function*(){Te("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield lE(n)}))}),bN.apply(this,arguments)}function JP(n,e){return e().catch(t=>KC(n,t,e))}function B_(n){return EN.apply(this,arguments)}function EN(){return EN=(0,ne.Z)(function*(n){const e=He(n),t=Cd(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;KB(e);)try{const i=yield NB(e.localStore,r);if(null===i){0===e.Eu.length&&t.jo();break}r=i.batchId,ZB(e,i)}catch(i){yield KC(e,i)}eF(e)&&tF(e)}),EN.apply(this,arguments)}function KB(n){return Td(n)&&n.Eu.length<10}function ZB(n,e){n.Eu.push(e);const t=Cd(n);t.Ko()&&t.ou&&t.uu(e.mutations)}function eF(n){return Td(n)&&!Cd(n).Uo()&&n.Eu.length>0}function tF(n){Cd(n).start()}function YB(n){return wN.apply(this,arguments)}function wN(){return wN=(0,ne.Z)(function*(n){Cd(n).hu()}),wN.apply(this,arguments)}function QB(n){return IN.apply(this,arguments)}function IN(){return IN=(0,ne.Z)(function*(n){const e=Cd(n);for(const t of n.Eu)e.uu(t.mutations)}),IN.apply(this,arguments)}function XB(n,e,t){return DN.apply(this,arguments)}function DN(){return DN=(0,ne.Z)(function*(n,e,t){const r=n.Eu.shift(),i=G0.from(r,e,t);yield JP(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield B_(n)}),DN.apply(this,arguments)}function JB(n,e){return TN.apply(this,arguments)}function TN(){return TN=(0,ne.Z)(function*(n,e){var t;e&&Cd(n).ou&&(yield(t=(0,ne.Z)(function*(r,i){if(function W0(n){switch(n){default:return Qe();case X.CANCELLED:case X.UNKNOWN:case X.DEADLINE_EXCEEDED:case X.RESOURCE_EXHAUSTED:case X.INTERNAL:case X.UNAVAILABLE:case X.UNAUTHENTICATED:return!1;case X.INVALID_ARGUMENT:case X.NOT_FOUND:case X.ALREADY_EXISTS:case X.PERMISSION_DENIED:case X.FAILED_PRECONDITION:case X.ABORTED:case X.OUT_OF_RANGE:case X.UNIMPLEMENTED:case X.DATA_LOSS:return!0}}(a=i.code)&&a!==X.ABORTED){const u=r.Eu.shift();Cd(r).Qo(),yield JP(r,()=>r.remoteSyncer.rejectFailedWrite(u.batchId,i)),yield B_(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),eF(n)&&tF(n)}),TN.apply(this,arguments)}function nF(n,e){return CN.apply(this,arguments)}function CN(){return CN=(0,ne.Z)(function*(n,e){const t=He(n);t.asyncQueue.verifyOperationInProgress(),Te("RemoteStore","RemoteStore received new credentials");const r=Td(t);t.vu.add(3),yield U_(t),r&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield lE(t)}),CN.apply(this,arguments)}function SN(){return SN=(0,ne.Z)(function*(n,e){const t=He(n);e?(t.vu.delete(2),yield lE(t)):e||(t.vu.add(2),yield U_(t),t.bu.set("Unknown"))}),SN.apply(this,arguments)}function j_(n){return n.Su||(n.Su=function(e,t,r){const i=He(e);return i.fu(),new UB(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:GB.bind(null,n),ao:qB.bind(null,n),nu:WB.bind(null,n)}),n.Ru.push(function(){var e=(0,ne.Z)(function*(t){t?(n.Su.Qo(),gN(n)?mN(n):n.bu.set("Unknown")):(yield n.Su.stop(),XP(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}function Cd(n){return n.Du||(n.Du=function(e,t,r){const i=He(e);return i.fu(),new BB(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:YB.bind(null,n),ao:JB.bind(null,n),au:QB.bind(null,n),cu:XB.bind(null,n)}),n.Ru.push(function(){var e=(0,ne.Z)(function*(t){t?(n.Du.Qo(),yield B_(n)):(yield n.Du.stop(),n.Eu.length>0&&(Te("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Du}class xN{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new lr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}static createAndSchedule(e,t,r,i,a){const u=Date.now()+r,h=new xN(e,t,u,i,a);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new be(X.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function $_(n,e){if(Kn("AsyncQueue",`${e}: ${n}`),Fa(n))return new be(X.UNAVAILABLE,`${e}: ${n}`);throw n}class H_{constructor(e){this.comparator=e?(t,r)=>e(t,r)||je.comparator(t.key,r.key):(t,r)=>je.comparator(t.key,r.key),this.keyedMap=Wf(),this.sortedSet=new vn(this.comparator)}static emptySet(e){return new H_(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof H_)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new H_;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class rF{constructor(){this.Cu=new vn(je.comparator)}track(e){const t=e.doc.key,r=this.Cu.get(t);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(t):1===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):Qe():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,r)=>{e.push(r)}),e}}class z_{constructor(e,t,r,i,a,u,h,m,_){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=h,this.excludesMetadataChanges=m,this.hasCachedResults=_}static fromInitialDocuments(e,t,r,i,a){const u=[];return t.forEach(h=>{u.push({type:0,doc:h})}),new z_(e,t,H_.emptySet(t),u,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ud(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class ej{constructor(){this.Nu=void 0,this.listeners=[]}}class tj{constructor(){this.queries=new as(e=>V0(e),ud),this.onlineState="Unknown",this.ku=new Set}}function RN(){return RN=(0,ne.Z)(function*(n,e){const t=He(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new ej),i)try{a.Nu=yield t.onListen(r)}catch(u){const h=$_(u,`Initialization of query '${U0(e.query)}' failed`);return void e.onError(h)}t.queries.set(r,a),a.listeners.push(e),e.Mu(t.onlineState),a.Nu&&e.$u(a.Nu)&&ON(t)}),RN.apply(this,arguments)}function kN(){return kN=(0,ne.Z)(function*(n,e){const t=He(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const u=a.listeners.indexOf(e);u>=0&&(a.listeners.splice(u,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),kN.apply(this,arguments)}function nj(n,e){const t=He(n);let r=!1;for(const i of e){const u=t.queries.get(i.query);if(u){for(const h of u.listeners)h.$u(i)&&(r=!0);u.Nu=i}}r&&ON(t)}function rj(n,e,t){const r=He(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function ON(n){n.ku.forEach(e=>{e.next()})}class PN{constructor(e,t,r){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new z_(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=z_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class sF{constructor(e){this.key=e}}class aF{constructor(e){this.key=e}}class cF{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=Nt(),this.mutatedKeys=Nt(),this.tc=eC(e),this.ec=new H_(this.tc)}get nc(){return this.Yu}sc(e,t){const r=t?t.ic:new rF,i=t?t.ec:this.ec;let a=t?t.mutatedKeys:this.mutatedKeys,u=i,h=!1;const m="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,_="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((w,D)=>{const S=i.get(w),N=qf(this.query,D)?D:null,U=!!S&&this.mutatedKeys.has(S.key),W=!!N&&(N.hasLocalMutations||this.mutatedKeys.has(N.key)&&N.hasCommittedMutations);let oe=!1;S&&N?S.data.isEqual(N.data)?U!==W&&(r.track({type:3,doc:N}),oe=!0):this.rc(S,N)||(r.track({type:2,doc:N}),oe=!0,(m&&this.tc(N,m)>0||_&&this.tc(N,_)<0)&&(h=!0)):!S&&N?(r.track({type:0,doc:N}),oe=!0):S&&!N&&(r.track({type:1,doc:S}),oe=!0,(m||_)&&(h=!0)),oe&&(N?(u=u.add(N),a=W?a.add(w):a.delete(w)):(u=u.delete(w),a=a.delete(w)))}),null!==this.query.limit)for(;u.size>this.query.limit;){const w="F"===this.query.limitType?u.last():u.first();u=u.delete(w.key),a=a.delete(w.key),r.track({type:1,doc:w})}return{ec:u,ic:r,zi:h,mutatedKeys:a}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const a=e.ic.xu();a.sort((_,w)=>function(D,S){const N=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Qe()}};return N(D)-N(S)}(_.type,w.type)||this.tc(_.doc,w.doc)),this.oc(r);const u=t?this.uc():[],h=0===this.Zu.size&&this.current?1:0,m=h!==this.Xu;return this.Xu=h,0!==a.length||m?{snapshot:new z_(this.query,e.ec,i,a,e.mutatedKeys,0===h,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:u}:{cc:u}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new rF,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=Nt(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const t=[];return e.forEach(r=>{this.Zu.has(r)||t.push(new aF(r))}),this.Zu.forEach(r=>{e.has(r)||t.push(new sF(r))}),t}hc(e){this.Yu=e.ir,this.Zu=Nt();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return z_.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class sj{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class aj{constructor(e){this.key=e,this.fc=!1}}class cj{constructor(e,t,r,i,a,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.dc={},this.wc=new as(h=>V0(h),ud),this._c=new Map,this.mc=new Set,this.gc=new vn(je.comparator),this.yc=new Map,this.Ic=new b,this.Tc={},this.Ec=new Map,this.Ac=Id.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function uj(n,e){return FN.apply(this,arguments)}function FN(){return FN=(0,ne.Z)(function*(n,e){const t=function s1(n){const e=He(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=uF.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=yj.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=hj.bind(null,e),e.dc.nu=nj.bind(null,e.eventManager),e.dc.Pc=rj.bind(null,e.eventManager),e}(n);let r,i;const a=t.wc.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.lc();else{const u=yield function L_(n,e){const t=He(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Bs.getTargetData(r,e).next(a=>a?(i=a,q.resolve(i)):t.Bs.allocateTargetId(r).next(u=>(i=new zs(e,u,"TargetPurposeListen",r.currentSequenceNumber),t.Bs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ji.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(r.targetId,r),t.Yi.set(e,r.targetId)),r})}(t.localStore,ni(e)),h=t.sharedClientState.addLocalQueryTarget(u.targetId);r=u.targetId,i=yield function LN(n,e,t,r,i){return VN.apply(this,arguments)}(t,e,r,"current"===h,u.resumeToken),t.isPrimaryClient&&WC(t.remoteStore,u)}return i}),FN.apply(this,arguments)}function VN(){return VN=(0,ne.Z)(function*(n,e,t,r,i){n.Rc=(D,S,N)=>{return(U=(0,ne.Z)(function*(W,oe,Re,Be){let Ve=oe.view.sc(Re);Ve.zi&&(Ve=yield $C(W.localStore,oe.query,!1).then(({documents:At})=>oe.view.sc(At,Ve)));const et=Be&&Be.targetChanges.get(oe.targetId),Rt=oe.view.applyChanges(Ve,W.isPrimaryClient,et);return KN(W,oe.targetId,Rt.cc),Rt.snapshot}),function(W,oe,Re,Be){return U.apply(this,arguments)})(n,D,S,N);var U};const a=yield $C(n.localStore,e,!0),u=new cF(e,a.ir),h=u.sc(a.documents),m=ou.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),_=u.applyChanges(h,n.isPrimaryClient,m);KN(n,t,_.cc);const w=new sj(e,t,u);return n.wc.set(e,w),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),_.snapshot}),VN.apply(this,arguments)}function lj(n,e){return UN.apply(this,arguments)}function UN(){return UN=(0,ne.Z)(function*(n,e){const t=He(n),r=t.wc.get(e),i=t._c.get(r.targetId);if(i.length>1)return t._c.set(r.targetId,i.filter(a=>!ud(a,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield V_(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),dE(t.remoteStore,r.targetId),G_(t,r.targetId)}).catch(Ls))):(G_(t,r.targetId),yield V_(t.localStore,r.targetId,!0))}),UN.apply(this,arguments)}function BN(){return BN=(0,ne.Z)(function*(n,e,t){const r=function a1(n){const e=He(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=fj.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=pj.bind(null,e),e}(n);try{const i=yield function(a,u){const h=He(a),m=In.now(),_=u.reduce((S,N)=>S.add(N.key),Nt());let w,D;return h.persistence.runTransaction("Locally write mutations","readwrite",S=>{let N=gi(),U=Nt();return h.Zi.getEntries(S,_).next(W=>{N=W,N.forEach((oe,Re)=>{Re.isValidDocument()||(U=U.add(oe))})}).next(()=>h.localDocuments.getOverlayedDocuments(S,N)).next(W=>{w=W;const oe=[];for(const Re of u){const Be=xR(Re,w.get(Re.key).overlayedDocument);null!=Be&&oe.push(new Hs(Re.key,Be,F0(Be.value.mapValue),mn.exists(!0)))}return h.mutationQueue.addMutationBatch(S,m,oe,u)}).next(W=>{D=W;const oe=W.applyToLocalDocumentSet(w,U);return h.documentOverlayCache.saveOverlays(S,W.batchId,oe)})}).then(()=>({batchId:D.batchId,changes:ER(w)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,u,h){let m=a.Tc[a.currentUser.toKey()];m||(m=new vn(It)),m=m.insert(u,h),a.Tc[a.currentUser.toKey()]=m}(r,i.batchId,t),yield fu(r,i.changes),yield B_(r.remoteStore)}catch(i){const a=$_(i,"Failed to persist write");t.reject(a)}}),BN.apply(this,arguments)}function uF(n,e){return jN.apply(this,arguments)}function jN(){return jN=(0,ne.Z)(function*(n,e){const t=He(n);try{const r=yield function RB(n,e){const t=He(n),r=e.snapshotVersion;let i=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const u=t.Zi.newChangeBuffer({trackRemovals:!0});i=t.Ji;const h=[];e.targetChanges.forEach((w,D)=>{const S=i.get(D);if(!S)return;h.push(t.Bs.removeMatchingKeys(a,w.removedDocuments,D).next(()=>t.Bs.addMatchingKeys(a,w.addedDocuments,D)));let N=S.withSequenceNumber(a.currentSequenceNumber);var U,W,oe;null!==e.targetMismatches.get(D)?N=N.withResumeToken(er.EMPTY_BYTE_STRING,rt.min()).withLastLimboFreeSnapshotVersion(rt.min()):w.resumeToken.approximateByteSize()>0&&(N=N.withResumeToken(w.resumeToken,r)),i=i.insert(D,N),W=N,oe=w,(0===(U=S).resumeToken.approximateByteSize()||W.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=3e8||oe.addedDocuments.size+oe.modifiedDocuments.size+oe.removedDocuments.size>0)&&h.push(t.Bs.updateTargetData(a,N))});let m=gi(),_=Nt();if(e.documentUpdates.forEach(w=>{e.resolvedLimboDocuments.has(w)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(a,w))}),h.push(function jP(n,e,t){let r=Nt(),i=Nt();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let u=gi();return t.forEach((h,m)=>{const _=a.get(h);m.isFoundDocument()!==_.isFoundDocument()&&(i=i.add(h)),m.isNoDocument()&&m.version.isEqual(rt.min())?(e.removeEntry(h,m.readTime),u=u.insert(h,m)):!_.isValidDocument()||m.version.compareTo(_.version)>0||0===m.version.compareTo(_.version)&&_.hasPendingWrites?(e.addEntry(m),u=u.insert(h,m)):Te("LocalStore","Ignoring outdated watch update for ",h,". Current version:",_.version," Watch version:",m.version)}),{nr:u,sr:i}})}(a,u,e.documentUpdates).next(w=>{m=w.nr,_=w.sr})),!r.isEqual(rt.min())){const w=t.Bs.getLastRemoteSnapshotVersion(a).next(D=>t.Bs.setTargetsMetadata(a,a.currentSequenceNumber,r));h.push(w)}return q.waitFor(h).next(()=>u.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,m,_)).next(()=>m)}).then(a=>(t.Ji=i,a))}(t.localStore,e);e.targetChanges.forEach((i,a)=>{const u=t.yc.get(a);u&&(nt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?u.fc=!0:i.modifiedDocuments.size>0?nt(u.fc):i.removedDocuments.size>0&&(nt(u.fc),u.fc=!1))}),yield fu(t,r,e)}catch(r){yield Ls(r)}}),jN.apply(this,arguments)}function lF(n,e,t){const r=He(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.wc.forEach((a,u)=>{const h=u.view.Mu(e);h.snapshot&&i.push(h.snapshot)}),function(a,u){const h=He(a);h.onlineState=u;let m=!1;h.queries.forEach((_,w)=>{for(const D of w.listeners)D.Mu(u)&&(m=!0)}),m&&ON(h)}(r.eventManager,e),i.length&&r.dc.nu(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function hj(n,e,t){return $N.apply(this,arguments)}function $N(){return $N=(0,ne.Z)(function*(n,e,t){const r=He(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.yc.get(e),a=i&&i.key;if(a){let u=new vn(je.comparator);u=u.insert(a,Dn.newNoDocument(a,rt.min()));const h=Nt().add(a),m=new gd(rt.min(),new Map,new vn(It),u,h);yield uF(r,m),r.gc=r.gc.remove(a),r.yc.delete(e),ZN(r)}else yield V_(r.localStore,e,!1).then(()=>G_(r,e,t)).catch(Ls)}),$N.apply(this,arguments)}function fj(n,e){return HN.apply(this,arguments)}function HN(){return HN=(0,ne.Z)(function*(n,e){const t=He(n),r=e.batch.batchId;try{const i=yield function MB(n,e){const t=He(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.Zi.newChangeBuffer({trackRemovals:!0});return function(u,h,m,_){const w=m.batch,D=w.keys();let S=q.resolve();return D.forEach(N=>{S=S.next(()=>_.getEntry(h,N)).next(U=>{const W=m.docVersions.get(N);nt(null!==W),U.version.compareTo(W)<0&&(w.applyToRemoteDocument(U,m),U.isValidDocument()&&(U.setReadTime(m.commitVersion),_.addEntry(U)))})}),S.next(()=>u.mutationQueue.removeMutationBatch(h,w))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let h=Nt();for(let m=0;m<u.mutationResults.length;++m)u.mutationResults[m].transformResults.length>0&&(h=h.add(u.batch.mutations[m].key));return h}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);WN(t,r,null),qN(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield fu(t,i)}catch(i){yield Ls(i)}}),HN.apply(this,arguments)}function pj(n,e,t){return zN.apply(this,arguments)}function zN(){return zN=(0,ne.Z)(function*(n,e,t){const r=He(n);try{const i=yield function(a,u){const h=He(a);return h.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let _;return h.mutationQueue.lookupMutationBatch(m,u).next(w=>(nt(null!==w),_=w.keys(),h.mutationQueue.removeMutationBatch(m,w))).next(()=>h.mutationQueue.performConsistencyCheck(m)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(m,_,u)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,_)).next(()=>h.localDocuments.getDocuments(m,_))})}(r.localStore,e);WN(r,e,t),qN(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield fu(r,i)}catch(i){yield Ls(i)}}),zN.apply(this,arguments)}function qN(n,e){(n.Ec.get(e)||[]).forEach(t=>{t.resolve()}),n.Ec.delete(e)}function WN(n,e,t){const r=He(n);let i=r.Tc[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.Tc[r.currentUser.toKey()]=i}}function G_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n._c.get(e))n.wc.delete(r),t&&n.dc.Pc(r,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(r=>{n.Ic.containsKey(r)||dF(n,r)})}function dF(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(dE(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),ZN(n))}function KN(n,e,t){for(const r of t)r instanceof sF?(n.Ic.addReference(r.key,e),gj(n,r)):r instanceof aF?(Te("SyncEngine","Document no longer in limbo: "+r.key),n.Ic.removeReference(r.key,e),n.Ic.containsKey(r.key)||dF(n,r.key)):Qe()}function gj(n,e){const t=e.key,r=t.path.canonicalString();n.gc.get(t)||n.mc.has(r)||(Te("SyncEngine","New document in limbo: "+t),n.mc.add(r),ZN(n))}function ZN(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new je(Zt.fromString(e)),r=n.Ac.next();n.yc.set(r,new aj(t)),n.gc=n.gc.insert(t,r),WC(n.remoteStore,new zs(ni(Gf(t.path)),r,"TargetPurposeLimboResolution",$i.ct))}}function fu(n,e,t){return YN.apply(this,arguments)}function YN(){return YN=(0,ne.Z)(function*(n,e,t){const r=He(n),i=[],a=[],u=[];var h;r.wc.isEmpty()||(r.wc.forEach((h,m)=>{u.push(r.Rc(m,e,t).then(_=>{if((_||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(m.targetId,_?.fromCache?"not-current":"current"),_){i.push(_);const w=hp.Li(m.targetId,_);a.push(w)}}))}),yield Promise.all(u),r.dc.nu(i),yield(h=(0,ne.Z)(function*(m,_){const w=He(m);try{yield w.persistence.runTransaction("notifyLocalViewChanges","readwrite",D=>q.forEach(_,S=>q.forEach(S.Fi,N=>w.persistence.referenceDelegate.addReference(D,S.targetId,N)).next(()=>q.forEach(S.Bi,N=>w.persistence.referenceDelegate.removeReference(D,S.targetId,N)))))}catch(D){if(!Fa(D))throw D;Te("LocalStore","Failed to update sequence numbers: "+D)}for(const D of _){const S=D.targetId;if(!D.fromCache){const N=w.Ji.get(S),W=N.withLastLimboFreeSnapshotVersion(N.snapshotVersion);w.Ji=w.Ji.insert(S,W)}}}),function(m,_){return h.apply(this,arguments)})(r.localStore,a))}),YN.apply(this,arguments)}function _j(n,e){return QN.apply(this,arguments)}function QN(){return QN=(0,ne.Z)(function*(n,e){const t=He(n);if(!t.currentUser.isEqual(e)){Te("SyncEngine","User change. New user:",e.toKey());const r=yield UP(t.localStore,e);t.currentUser=e,(i=t).Ec.forEach(u=>{u.forEach(h=>{h.reject(new be(X.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.Ec.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield fu(t,r.er)}var i}),QN.apply(this,arguments)}function yj(n,e){const t=He(n),r=t.yc.get(e);if(r&&r.fc)return Nt().add(r.key);{let i=Nt();const a=t._c.get(e);if(!a)return i;for(const u of a){const h=t.wc.get(u);i=i.unionWith(h.view.nc)}return i}}class ZC{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ne.Z)(function*(){t.serializer=uE(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return function VP(n,e,t,r){return new eN(n,e,t,r)}(this.persistence,new jC,e.initialUser,this.serializer)}createPersistence(e){return new se(Pe.zs,this.serializer)}createSharedClientState(e){return new WP}terminate(){var e=this;return(0,ne.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class q_{initialize(e,t){var r=this;return(0,ne.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>lF(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=_j.bind(null,r.syncEngine),yield function AN(n,e){return SN.apply(this,arguments)}(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new tj}createDatastore(e){const t=uE(e.databaseInfo.databaseId),r=new VB(e.databaseInfo);return new jB(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=h=>lF(this.syncEngine,h,0),u=KP.D()?new KP:new PB,new zB(t,r,i,a,u);var t,r,i,a,u}createSyncEngine(e,t){return function(r,i,a,u,h,m,_){const w=new cj(r,i,a,u,h,m);return _&&(w.vc=!0),w}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ne.Z)(function*(t){const r=He(t);Te("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield U_(r),r.Pu.shutdown(),r.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}class YC{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):Kn("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Rj{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=ur.UNAUTHENTICATED,this.clientId=bT.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var u=(0,ne.Z)(function*(h){Te("FirestoreClient","Received user=",h.uid),yield a.authCredentialListener(h),a.user=h});return function(h){return u.apply(this,arguments)}}()),this.appCheckCredentials.start(r,u=>(Te("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}getConfiguration(){var e=this;return(0,ne.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new be(X.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new lr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ne.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=$_(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function QC(n,e){return c1.apply(this,arguments)}function c1(){return c1=(0,ne.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Te("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,ne.Z)(function*(a){r.isEqual(a)||(yield UP(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),c1.apply(this,arguments)}function u1(n,e){return l1.apply(this,arguments)}function l1(){return l1=(0,ne.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield function d1(n){return h1.apply(this,arguments)}(n);Te("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>nF(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>nF(e.remoteStore,a)),n._onlineComponents=e}),l1.apply(this,arguments)}function h1(){return h1=(0,ne.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Te("FirestoreClient","Using user provided OfflineComponentProvider");try{yield QC(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function _F(n){return"FirebaseError"===n.name?n.code===X.FAILED_PRECONDITION||n.code===X.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}(t))throw t;Mo("Error using user provided cache. Falling back to memory cache: "+t),yield QC(n,new ZC)}}else Te("FirestoreClient","Using default OfflineComponentProvider"),yield QC(n,new ZC);return n._offlineComponents}),h1.apply(this,arguments)}function XC(n){return f1.apply(this,arguments)}function f1(){return f1=(0,ne.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Te("FirestoreClient","Using user provided OnlineComponentProvider"),yield u1(n,n._uninitializedComponentsProvider._online)):(Te("FirestoreClient","Using default OnlineComponentProvider"),yield u1(n,new q_))),n._onlineComponents}),f1.apply(this,arguments)}function W_(n){return m1.apply(this,arguments)}function m1(){return m1=(0,ne.Z)(function*(n){const e=yield XC(n),t=e.eventManager;return t.onListen=uj.bind(null,e.syncEngine),t.onUnlisten=lj.bind(null,e.syncEngine),t}),m1.apply(this,arguments)}function IF(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const DF=new Map;function g1(n,e,t){if(!t)throw new be(X.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function TF(n){if(!je.isDocumentKey(n))throw new be(X.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function CF(n){if(je.isDocumentKey(n))throw new be(X.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function eA(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":Qe()}function Qt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new be(X.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=eA(n);throw new be(X.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}class SF{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new be(X.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new be(X.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function Bj(n,e,t,r){if(!0===e&&!0===r)throw new be(X.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=IF(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(i){if(void 0!==i.timeoutSeconds){if(isNaN(i.timeoutSeconds))throw new be(X.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new be(X.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new be(X.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class hE{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new SF({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new be(X.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new be(X.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new SF(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new WM;switch(t.type){case"firstParty":return new yT(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new be(X.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=DF.get(e);t&&(Te("ComponentProvider","Removing Datastore"),DF.delete(e),t.terminate())}(this),Promise.resolve()}}class dr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ga(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new dr(this.firestore,e,this._key)}}class _i{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new _i(this.firestore,e,this._query)}}class Ga extends _i{constructor(e,t,r){super(e,t,Gf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new dr(this.firestore,null,new je(e))}withConverter(e){return new Ga(this.firestore,e,this._path)}}function $j(n,e,...t){if(n=(0,$e.m9)(n),g1("collection","path",e),n instanceof hE){const r=Zt.fromString(e,...t);return CF(r),new Ga(n,null,r)}{if(!(n instanceof dr||n instanceof Ga))throw new be(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Zt.fromString(e,...t));return CF(r),new Ga(n.firestore,null,r)}}function xF(n,e,...t){if(n=(0,$e.m9)(n),1===arguments.length&&(e=bT.A()),g1("doc","path",e),n instanceof hE){const r=Zt.fromString(e,...t);return TF(r),new dr(n,null,new je(r))}{if(!(n instanceof dr||n instanceof Ga))throw new be(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Zt.fromString(e,...t));return TF(r),new dr(n.firestore,n instanceof Ga?n.converter:null,new je(r))}}class Hj{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new lN(this,"async_queue_retry"),this.Xc=()=>{const t=qC();t&&Te("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=qC();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=qC();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new lr;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,ne.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!Fa(t))throw t;Te("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,Kn("INTERNAL UNHANDLED ERROR: ",function(a){let u=a.message||"";return a.stack&&(u=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),u}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=t,t}enqueueAfterDelay(e,t,r){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const i=xN.createAndSchedule(this,e,t,r,a=>this.na(a));return this.zc.push(i),i}Zc(){this.Wc&&Qe()}verifyOperationInProgress(){}sa(){var e=this;return(0,ne.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function _1(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class Fn extends hE{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Hj,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||RF(this),this._firestoreClient.terminate()}}function Gj(n,e){const t="object"==typeof n?n:(0,Un.getApp)(),r="string"==typeof n?n:e||"(default)",i=(0,Un._getProvider)(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=(0,$e.P0)("firestore");a&&function jj(n,e,t,r={}){var i;const a=(n=Qt(n,hE))._getSettings(),u=`${e}:${t}`;if("firestore.googleapis.com"!==a.host&&a.host!==u&&Mo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},a),{host:u,ssl:!1})),r.mockUserToken){let h,m;if("string"==typeof r.mockUserToken)h=r.mockUserToken,m=ur.MOCK_USER;else{h=(0,$e.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new be(X.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new ur(_)}n._authCredentials=new KM(new gT(h,m))}}(i,...a)}return i}function wr(n){return n._firestoreClient||RF(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function RF(n){var e,t,r;const i=n._freezeSettings(),a=(h=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new VT(n._databaseId,h,n._persistenceKey,(_=i).host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,IF(_.experimentalLongPollingOptions),_.useFetchStreams));var h,_;n._firestoreClient=new Rj(n._authCredentials,n._appCheckCredentials,n._queue,a),null!==(t=i.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=i.cache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}class fp{constructor(e){this._byteString=e}static fromBase64String(e){try{return new fp(er.fromBase64String(e))}catch(t){throw new be(X.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new fp(er.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class K_{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new be(X.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new On(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class y1{constructor(e){this._methodName=e}}class v1{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new be(X.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new be(X.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return It(this._lat,e._lat)||It(this._long,e._long)}}const Wj=/^__.*__$/;class OF{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Hs(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function PF(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Qe()}}class tA{constructor(e,t,r,i,a,u){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===a&&this.ua(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new tA(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.fa(e),i}da(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.ua(),i}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return rA(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(PF(this.ca)&&Wj.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class Zj{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||uE(e)}ya(e,t,r,i=!1){return new tA({ca:e,methodName:t,ga:r,path:On.emptyPath(),la:!1,ma:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}class pE extends y1{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof pE}}function pp(n,e){if(jF(n=(0,$e.m9)(n)))return w1("Unsupported field value:",e,n),function BF(n,e){const t={};return PT(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):fo(n,(r,i)=>{const a=pp(i,e.ha(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}(n,e);if(n instanceof y1)return function(t,r){if(!PF(r.ca))throw r._a(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const u of t){let h=pp(u,r.wa(a));null==h&&(h={nullValue:"NULL_VALUE"}),i.push(h),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,$e.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return j0(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=In.fromDate(t);return{timestampValue:su(r.serializer,i)}}if(t instanceof In){const i=new In(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:su(r.serializer,i)}}if(t instanceof v1)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof fp)return{bytesValue:FR(r.serializer,t._byteString)};if(t instanceof dr){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r._a(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:N_(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r._a(`Unsupported field value: ${eA(t)}`)}(n,e)}function jF(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof In||n instanceof v1||n instanceof fp||n instanceof dr||n instanceof y1)}function w1(n,e,t){if(!jF(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=eA(t);throw e._a("an object"===r?n+" a custom object":n+" "+r)}var r}function mE(n,e,t){if((e=(0,$e.m9)(e))instanceof K_)return e._internalPath;if("string"==typeof e)return nA(n,e);throw rA("Field path arguments must be of type string or ",n,!1,void 0,t)}const Jj=new RegExp("[~\\*/\\[\\]]");function nA(n,e,t){if(e.search(Jj)>=0)throw rA(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new K_(...e.split("."))._internalPath}catch{throw rA(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function rA(n,e,t,r,i){const a=r&&!r.isEmpty(),u=void 0!==i;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let m="";return(a||u)&&(m+=" (found",a&&(m+=` in field ${r}`),u&&(m+=` in document ${i}`),m+=")"),new be(X.INVALID_ARGUMENT,h+n+m)}function $F(n,e){return n.some(t=>t.isEqual(e))}class I1{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new dr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new e$(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(iA("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class e$ extends I1{data(){return super.data()}}function iA(n,e){return"string"==typeof e?nA(n,e):e instanceof K_?e._internalPath:e._delegate._internalPath}class n${convertValue(e,t="none"){switch(Bs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Pn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(po(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Qe()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return fo(e,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new v1(Pn(e.latitude),Pn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=p_(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(id(e));default:return null}}convertTimestamp(e){const t=La(e);return new In(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Zt.fromString(e);nt(np(r));const i=new Vs(r.get(1),r.get(3)),a=new je(r.popFirst(5));return i.isEqual(t)||Kn(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}class mp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Q_ extends I1{constructor(e,t,r,i,a,u){super(e,t,r,i,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new cA(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(iA("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class cA extends Q_{data(e={}){return super.data(e)}}class X_{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new mp(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new cA(this._firestore,this._userDataWriter,r.key,r,new mp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new be(X.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(u=>({type:"added",doc:new cA(r._firestore,r._userDataWriter,u.doc.key,u.doc,new mp(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(u=>i||3!==u.type).map(u=>{const h=new cA(r._firestore,r._userDataWriter,u.doc.key,u.doc,new mp(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let m=-1,_=-1;return 0!==u.type&&(m=a.indexOf(u.doc.key),a=a.delete(u.doc.key)),1!==u.type&&(a=a.add(u.doc),_=a.indexOf(u.doc.key)),{type:i$(u.type),doc:h,oldIndex:m,newIndex:_}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function i$(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Qe()}}class Ad extends n${constructor(e){super(),this.firestore=e}convertBytes(e){return new fp(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new dr(this.firestore,null,t)}}function o$(n,e,t,...r){n=Qt(n,dr);const i=Qt(n.firestore,Fn),a=function Z_(n){const e=n._freezeSettings(),t=uE(n._databaseId);return new Zj(n._databaseId,!!e.ignoreUndefinedProperties,t)}(i);let u;return u="string"==typeof(e=(0,$e.m9)(e))||e instanceof K_?function VF(n,e,t,r,i,a){const u=n.ya(1,e,t),h=[mE(e,r,t)],m=[i];if(a.length%2!=0)throw new be(X.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<a.length;S+=2)h.push(mE(e,a[S])),m.push(a[S+1]);const _=[],w=br.empty();for(let S=h.length-1;S>=0;--S)if(!$F(_,h[S])){const N=h[S];let U=m[S];U=(0,$e.m9)(U);const W=u.da(N);if(U instanceof pE)_.push(N);else{const oe=pp(U,W);null!=oe&&(_.push(N),w.set(N,oe))}}const D=new Ur(_);return new OF(w,D,u.fieldTransforms)}(a,"updateDoc",n._key,e,t,r):function LF(n,e,t,r){const i=n.ya(1,e,t);w1("Data must be an object, but it was:",i,r);const a=[],u=br.empty();fo(r,(m,_)=>{const w=nA(e,m,t);_=(0,$e.m9)(_);const D=i.da(w);if(_ instanceof pE)a.push(w);else{const S=pp(_,D);null!=S&&(a.push(w),u.set(w,S))}});const h=new Ur(a);return new OF(u,h,i.fieldTransforms)}(a,"updateDoc",n._key,e),_E(i,[u.toMutation(n._key,mn.exists(!0))])}function s$(n){return _E(Qt(n.firestore,Fn),[new md(n._key,mn.none())])}function _E(n,e){return function(t,r){const i=new lr;return t.asyncQueue.enqueueAndForget((0,ne.Z)(function*(){return function dj(n,e,t){return BN.apply(this,arguments)}(yield function p1(n){return XC(n).then(e=>e.syncEngine)}(t),r,i)})),i.promise}(wr(n),e)}!function(n,e=!0){td=Un.SDK_VERSION,(0,Un._registerComponent)(new ws.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const a=t.getProvider("app").getImmediate(),u=new Fn(new ZM(t.getProvider("auth-internal")),new YM(t.getProvider("app-check-internal")),function(h,m){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new be(X.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Vs(h.options.projectId,m)}(a,r),a);return i=Object.assign({useFetchStreams:e},i),u._setSettings(i),u},"PUBLIC").setMultipleInstances(!0)),(0,Un.registerVersion)(mT,"3.13.0",n),(0,Un.registerVersion)(mT,"3.13.0","esm2017")}();var pu=R(5592),rn=R(7398),v$={includeMetadataChanges:!1};function A1(n,e){return void 0===e&&(e=v$),new pu.y(function(t){var r=function a$(n,...e){var t,r,i;n=(0,$e.m9)(n);let a={includeMetadataChanges:!1},u=0;"object"!=typeof e[u]||_1(e[u])||(a=e[u],u++);const h={includeMetadataChanges:a.includeMetadataChanges};if(_1(e[u])){const D=e[u];e[u]=null===(t=D.next)||void 0===t?void 0:t.bind(D),e[u+1]=null===(r=D.error)||void 0===r?void 0:r.bind(D),e[u+2]=null===(i=D.complete)||void 0===i?void 0:i.bind(D)}let m,_,w;if(n instanceof dr)_=Qt(n.firestore,Fn),w=Gf(n._key.path),m={next:D=>{e[u]&&e[u](function C1(n,e,t){const r=t.docs.get(e._key),i=new Ad(n);return new Q_(n,i,e._key,r,new mp(t.hasPendingWrites,t.fromCache),e.converter)}(_,n,D))},error:e[u+1],complete:e[u+2]};else{const D=Qt(n,_i);_=Qt(D.firestore,Fn),w=D._query;const S=new Ad(_);m={next:N=>{e[u]&&e[u](new X_(_,S,D,N))},error:e[u+1],complete:e[u+2]},function HF(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new be(X.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(n._query)}return function(D,S,N,U){const W=new YC(U),oe=new PN(S,W,N);return D.asyncQueue.enqueueAndForget((0,ne.Z)(function*(){return function MN(n,e){return RN.apply(this,arguments)}(yield W_(D),oe)})),()=>{W.Dc(),D.asyncQueue.enqueueAndForget((0,ne.Z)(function*(){return function NN(n,e){return kN.apply(this,arguments)}(yield W_(D),oe)}))}}(wr(_),w,h,m)}(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function E$(n,e){return void 0===e&&(e={}),function b$(n){return A1(n,{includeMetadataChanges:!0})}(n).pipe((0,rn.U)(function(t){return QF(t,e)}))}function QF(n,e){void 0===e&&(e={});var t=n.data();return!n.exists()||"object"!=typeof t||null===t||e.idField&&(t[e.idField]=n.id),t}function A$(n,e){return void 0===e&&(e={}),function C$(n){return A1(n,{includeMetadataChanges:!0}).pipe((0,rn.U)(function(e){return e.docs}))}(n).pipe((0,rn.U)(function(t){return t.map(function(r){return QF(r,e)})}))}class yE{constructor(e){return e}}const tL="firestore",M1=new p.OlP("angularfire2.firestore-instances");function M$(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new yE(r)}}const R$={provide:class S${constructor(){return(0,tn.vb)(tL)}},deps:[[new p.FiY,M1]]},N$={provide:yE,useFactory:function x$(n,e){const t=(0,tn.JM)(tL,n,e);return t&&new yE(t)},deps:[[new p.FiY,M1],da]};let k$=(()=>{class n{constructor(){(0,Es.KN)("angularfire",tn.q4.full,"fst")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[N$,R$]}),n})();function O$(n,...e){return{ngModule:k$,providers:[{provide:M1,useFactory:M$(n),multi:!0,deps:[p.R0b,p.zs3,tn.HU,Yu,[new p.FiY,KI],[new p.FiY,Sa],...e]}]}}const nL=(0,tn.u3)(A$,!0),rL=(0,tn.u3)(E$,!0),iL=(0,tn.u3)($j,!0),oL=(0,tn.u3)(s$,!0),J_=(0,tn.u3)(xF,!0),P$=(0,tn.u3)(Gj,!0),sL=(0,tn.u3)(o$,!0);var Ct=R(2096),Ir=R(2459),F$=R(6321),Fo=R(9360),Lo=R(8251);function aL(n,e=F$.z){return(0,Fo.e)((t,r)=>{let i=null,a=null,u=null;const h=()=>{if(i){i.unsubscribe(),i=null;const _=a;a=null,r.next(_)}};function m(){const _=u+n,w=e.now();if(w<_)return i=this.schedule(void 0,_-w),void r.add(i);h()}t.subscribe((0,Lo.x)(r,_=>{a=_,u=e.now(),i||(i=e.schedule(m,n),r.add(i))},()=>{h(),r.complete()},void 0,()=>{a=i=null}))})}var Ks=R(4664),L$=R(3106);const cL="firebasestorage.googleapis.com",uL="storageBucket";class Zn extends $e.ZR{constructor(e,t,r=0){super(R1(e),`Firebase Storage: ${t} (${R1(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Zn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return R1(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var Hn=function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n}(Hn||{});function R1(n){return"storage/"+n}function N1(){return new Zn(Hn.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function lL(){return new Zn(Hn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function dL(){return new Zn(Hn.CANCELED,"User canceled the upload/download.")}function hL(){return new Zn(Hn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function ey(n){return new Zn(Hn.INVALID_ARGUMENT,n)}function fL(){return new Zn(Hn.APP_DELETED,"The Firebase app was deleted.")}function pL(n){return new Zn(Hn.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function vE(n,e){return new Zn(Hn.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function bE(n){throw new Zn(Hn.INTERNAL_ERROR,"Internal error: "+n)}class Ti{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Ti.makeFromUrl(e,t)}catch{return new Ti(e,"")}if(""===r.path)return r;throw function W$(n){return new Zn(Hn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",h=new RegExp("^gs://"+i+"(/(.*))?$","i");function _(et){et.path_=decodeURIComponent(et.path)}const D=t.replace(/[.]/g,"\\."),Ve=[{regex:h,indices:{bucket:1,path:3},postModify:function a(et){"/"===et.path.charAt(et.path.length-1)&&(et.path_=et.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${D}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:_},{regex:new RegExp(`^https?://${t===cL?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:_}];for(let et=0;et<Ve.length;et++){const Rt=Ve[et],At=Rt.regex.exec(e);if(At){let Ln=At[Rt.indices.path];Ln||(Ln=""),r=new Ti(At[Rt.indices.bucket],Ln),Rt.postModify(r);break}}if(null==r)throw function q$(n){return new Zn(Hn.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return r}}class X${constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function lA(n){return"string"==typeof n||n instanceof String}function mL(n){return k1()&&n instanceof Blob}function k1(){return typeof Blob<"u"&&!(0,$e.UG)()}function O1(n,e,t,r){if(r<e)throw ey(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw ey(`Invalid value for '${n}'. Expected ${t} or less.`)}function mu(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function gL(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var ty=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}(ty||{});function _L(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),a=-1!==e.indexOf(n);return t||i||a}class iH{constructor(e,t,r,i,a,u,h,m,_,w,D,S=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=u,this.callback_=h,this.errorCallback_=m,this.timeout_=_,this.progressCallback_=w,this.connectionFactory_=D,this.retry=S,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((N,U)=>{this.resolve_=N,this.reject_=U,this.start_()})}start_(){const t=(r,i)=>{const a=this.resolve_,u=this.reject_,h=i.connection;if(i.wasSuccessCode)try{const m=this.callback_(h,h.getResponse());!function tH(n){return void 0!==n}(m)?a():a(m)}catch(m){u(m)}else if(null!==h){const m=N1();m.serverResponse=h.getErrorText(),u(this.errorCallback_?this.errorCallback_(h,m):m)}else u(i.canceled?this.appDelete_?fL():dL():lL())};this.canceled_?t(0,new dA(!1,null,!0)):this.backoffId_=function J$(n,e,t){let r=1,i=null,a=null,u=!1,h=0;function m(){return 2===h}let _=!1;function w(...oe){_||(_=!0,e.apply(null,oe))}function D(oe){i=setTimeout(()=>{i=null,n(N,m())},oe)}function S(){a&&clearTimeout(a)}function N(oe,...Re){if(_)return void S();if(oe)return S(),void w.call(null,oe,...Re);if(m()||u)return S(),void w.call(null,oe,...Re);let Ve;r<64&&(r*=2),1===h?(h=2,Ve=0):Ve=1e3*(r+Math.random()),D(Ve)}let U=!1;function W(oe){U||(U=!0,S(),!_&&(null!==i?(oe||(h=2),clearTimeout(i),D(0)):oe||(h=1)))}return D(0),a=setTimeout(()=>{u=!0,W(!0)},t),W}((r,i)=>{if(i)return void r(!1,new dA(!1,null,!0));const a=this.connectionFactory_();this.pendingConnection_=a;const u=h=>{null!==this.progressCallback_&&this.progressCallback_(h.loaded,h.lengthComputable?h.total:-1)};null!==this.progressCallback_&&a.addUploadProgressListener(u),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&a.removeUploadProgressListener(u),this.pendingConnection_=null;const h=a.getErrorCode()===ty.NO_ERROR,m=a.getStatus();if(!h||_L(m,this.additionalRetryCodes_)&&this.retry){const w=a.getErrorCode()===ty.ABORT;return void r(!1,new dA(!1,null,w))}const _=-1!==this.successCodes_.indexOf(m);r(!0,new dA(_,a))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function eH(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class dA{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function dH(...n){const e=function lH(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(k1())return new Blob(n);throw new Zn(Hn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const Vo={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class P1{constructor(e,t){this.data=e,this.contentType=t||null}}function F1(n,e){switch(n){case Vo.RAW:return new P1(yL(e));case Vo.BASE64:case Vo.BASE64URL:return new P1(vL(n,e));case Vo.DATA_URL:return new P1(function mH(n){const e=new bL(n);return e.base64?vL(Vo.BASE64,e.rest):function pH(n){let e;try{e=decodeURIComponent(n)}catch{throw vE(Vo.DATA_URL,"Malformed data URL.")}return yL(e)}(e.rest)}(e),function gH(n){return new bL(n).contentType}(e))}throw N1()}function yL(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function vL(n,e){switch(n){case Vo.BASE64:{const i=-1!==e.indexOf("-"),a=-1!==e.indexOf("_");if(i||a)throw vE(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Vo.BASE64URL:{const i=-1!==e.indexOf("+"),a=-1!==e.indexOf("/");if(i||a)throw vE(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function fH(n){if(typeof atob>"u")throw function Q$(n){return new Zn(Hn.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(i){throw i.message.includes("polyfill")?i:vE(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class bL{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw vE(Vo.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function _H(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class qa{constructor(e,t){let r=0,i="";mL(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(mL(this.data_)){const i=function hH(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new qa(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new qa(r,!0)}}static getBlob(...e){if(k1()){const t=e.map(r=>r instanceof qa?r.data_:r);return new qa(dH.apply(null,t))}{const t=e.map(u=>lA(u)?F1(Vo.RAW,u).data:u.data_);let r=0;t.forEach(u=>{r+=u.byteLength});const i=new Uint8Array(r);let a=0;return t.forEach(u=>{for(let h=0;h<u.length;h++)i[a++]=u[h]}),new qa(i,!0)}}uploadData(){return this.data_}}function L1(n){let e;try{e=JSON.parse(n)}catch{return null}return function rH(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function EL(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function bH(n,e){return e}class Hi{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||bH}}let hA=null;function EE(){if(hA)return hA;const n=[];n.push(new Hi("bucket")),n.push(new Hi("generation")),n.push(new Hi("metageneration")),n.push(new Hi("name","fullPath",!0));const t=new Hi("name");t.xform=function e(a,u){return function EH(n){return!lA(n)||n.length<2?n:EL(n)}(u)},n.push(t);const i=new Hi("size");return i.xform=function r(a,u){return void 0!==u?Number(u):u},n.push(i),n.push(new Hi("timeCreated")),n.push(new Hi("updated")),n.push(new Hi("md5Hash",null,!0)),n.push(new Hi("cacheControl",null,!0)),n.push(new Hi("contentDisposition",null,!0)),n.push(new Hi("contentEncoding",null,!0)),n.push(new Hi("contentLanguage",null,!0)),n.push(new Hi("contentType",null,!0)),n.push(new Hi("metadata","customMetadata",!0)),hA=n,hA}function wL(n,e,t){const r=L1(e);return null===r?null:function IH(n,e,t){const r={type:"file"},i=t.length;for(let a=0;a<i;a++){const u=t[a];r[u.local]=u.xform(r,e[u.server])}return function wH(n,e){Object.defineProperty(n,"ref",{get:function t(){const a=new Ti(n.bucket,n.fullPath);return e._makeStorageReference(a)}})}(r,n),r}(n,r,t)}function V1(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}const IL="prefixes",DL="items";class Wa{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Ka(n){if(!n)throw N1()}function fA(n,e){return function t(r,i){const a=wL(n,i,e);return Ka(null!==a),a}}function ny(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function z$(){return new Zn(Hn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function H$(){return new Zn(Hn.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function $$(n){return new Zn(Hn.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function G$(n){return new Zn(Hn.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}(n.path):r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}}function wE(n){const e=ny(n);return function t(r,i){let a=e(r,i);return 404===r.getStatus()&&(a=function j$(n){return new Zn(Hn.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}(n.path)),a.serverResponse=i.serverResponse,a}}function TL(n,e,t){const i=mu(e.fullServerUrl(),n.host,n._protocol),u=n.maxOperationRetryTime,h=new Wa(i,"GET",fA(n,t),u);return h.errorHandler=wE(e),h}function xH(n,e,t,r,i){const a={};a.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(a.delimiter=t),r&&(a.pageToken=r),i&&(a.maxResults=i);const h=mu(e.bucketOnlyServerUrl(),n.host,n._protocol),_=n.maxOperationRetryTime,w=new Wa(h,"GET",function AH(n,e){return function t(r,i){const a=function CH(n,e,t){const r=L1(t);return null===r?null:function TH(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[IL])for(const i of t[IL]){const a=i.replace(/\/$/,""),u=n._makeStorageReference(new Ti(e,a));r.prefixes.push(u)}if(t[DL])for(const i of t[DL]){const a=n._makeStorageReference(new Ti(e,i.name));r.items.push(a)}return r}(n,e,r)}(n,e,i);return Ka(null!==a),a}}(n,e.bucket),_);return w.urlParams=a,w.errorHandler=ny(e),w}function AL(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function kH(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class pA{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function U1(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{Ka(!1)}return Ka(!!t&&-1!==(e||["active"]).indexOf(t)),t}const LH={STATE_CHANGED:"state_changed"},zi={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function B1(n){switch(n){case"running":case"pausing":case"canceling":return zi.RUNNING;case"paused":return zi.PAUSED;case"success":return zi.SUCCESS;case"canceled":return zi.CANCELED;default:return zi.ERROR}}class VH{constructor(e,t,r){if(function nH(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const a=e;this.next=a.next,this.error=a.error,this.complete=a.complete}}}function ry(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}let ML=null;class UH{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ty.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ty.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ty.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw bE("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw bE("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw bE("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw bE("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw bE("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class BH extends UH{initXhr(){this.xhr_.responseType="text"}}function Zs(){return ML?ML():new BH}class RL{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=EE(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(Hn.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const a=this.isExponentialBackoffExpired();if(_L(i.status,[])){if(!a)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=lL()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(Hn.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,a)=>{this._resolve=i,this._reject=a,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function OH(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),u=AL(e,r,i),h={name:u.fullPath},m=mu(a,n.host,n._protocol),w={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":u.contentType,"Content-Type":"application/json; charset=utf-8"},D=V1(u,t),U=new Wa(m,"POST",function N(W){let oe;U1(W);try{oe=W.getResponseHeader("X-Goog-Upload-URL")}catch{Ka(!1)}return Ka(lA(oe)),oe},n.maxUploadRetryTime);return U.urlParams=h,U.headers=w,U.body=D,U.errorHandler=ny(e),U}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Zs,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._uploadUrl=a,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function PH(n,e,t,r){const m=new Wa(t,"POST",function a(_){const w=U1(_,["active","final"]);let D=null;try{D=_.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Ka(!1)}D||Ka(!1);const S=Number(D);return Ka(!isNaN(S)),new pA(S,r.size(),"final"===w)},n.maxUploadRetryTime);return m.headers={"X-Goog-Upload-Command":"query"},m.errorHandler=ny(e),m}(this._ref.storage,this._ref._location,e,this._blob),a=this._ref.storage._makeRequest(i,Zs,t,r);this._request=a,a.getPromise().then(u=>{this._request=void 0,this._updateProgress(u.current),this._needToFetchStatus=!1,u.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new pA(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,a)=>{let u;try{u=function FH(n,e,t,r,i,a,u,h){const m=new pA(0,0);if(u?(m.current=u.current,m.total=u.total):(m.current=0,m.total=r.size()),r.size()!==m.total)throw function Z$(){return new Zn(Hn.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const _=m.total-m.current;let w=_;i>0&&(w=Math.min(w,i));const D=m.current;let N="";N=0===w?"finalize":_===w?"upload, finalize":"upload";const U={"X-Goog-Upload-Command":N,"X-Goog-Upload-Offset":`${m.current}`},W=r.slice(D,D+w);if(null===W)throw hL();const Ve=new Wa(t,"POST",function oe(et,Rt){const At=U1(et,["active","final"]),Wt=m.current+w,Ln=r.size();let Dr;return Dr="final"===At?fA(e,a)(et,Rt):null,new pA(Wt,Ln,"final"===At,Dr)},e.maxUploadRetryTime);return Ve.headers=U,Ve.body=W.uploadData(),Ve.progressCallback=h||null,Ve.errorHandler=ny(n),Ve}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(m){return this._error=m,void this._transition("error")}const h=this._ref.storage._makeRequest(u,Zs,i,a,!1);this._request=h,h.getPromise().then(m=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(m.current),m.finalized?(this._metadata=m.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=TL(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Zs,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function SL(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),u={"X-Goog-Upload-Protocol":"multipart"},m=function h(){let Ve="";for(let et=0;et<2;et++)Ve+=Math.random().toString().slice(2);return Ve}();u["Content-Type"]="multipart/related; boundary="+m;const _=AL(e,r,i),w=V1(_,t),N=qa.getBlob("--"+m+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+w+"\r\n--"+m+"\r\nContent-Type: "+_.contentType+"\r\n\r\n",r,"\r\n--"+m+"--");if(null===N)throw hL();const U={name:_.fullPath},W=mu(a,n.host,n._protocol),Re=n.maxUploadRetryTime,Be=new Wa(W,"POST",fA(n,t),Re);return Be.urlParams=U,Be.headers=u,Be.body=N.uploadData(),Be.errorHandler=ny(e),Be}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Zs,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=dL(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=B1(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const a=new VH(t||void 0,r||void 0,i||void 0);return this._addObserver(a),()=>{this._removeObserver(a)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(B1(this._state)){case zi.SUCCESS:ry(this._resolve.bind(null,this.snapshot))();break;case zi.CANCELED:case zi.ERROR:ry(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(B1(this._state)){case zi.RUNNING:case zi.PAUSED:e.next&&ry(e.next.bind(e,this.snapshot))();break;case zi.SUCCESS:e.complete&&ry(e.complete.bind(e))();break;default:e.error&&ry(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class gp{constructor(e,t){this._service=e,this._location=t instanceof Ti?t:Ti.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new gp(e,t)}get root(){const e=new Ti(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return EL(this._location.path)}get storage(){return this._service}get parent(){const e=function yH(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new Ti(this._location.bucket,e);return new gp(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw pL(e)}}function kL(n,e,t){return j1.apply(this,arguments)}function j1(){return j1=(0,ne.Z)(function*(n,e,t){const i=yield OL(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield kL(n,e,i.nextPageToken))}),j1.apply(this,arguments)}function OL(n,e){null!=e&&"number"==typeof e.maxResults&&O1("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=xH(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Zs)}function XH(n){n._throwIfRoot("getDownloadURL");const e=function MH(n,e,t){const i=mu(e.fullServerUrl(),n.host,n._protocol),u=n.maxOperationRetryTime,h=new Wa(i,"GET",function SH(n,e){return function t(r,i){const a=wL(n,i,e);return Ka(null!==a),function DH(n,e,t,r){const i=L1(e);if(null===i||!lA(i.downloadTokens))return null;const a=i.downloadTokens;if(0===a.length)return null;const u=encodeURIComponent;return a.split(",").map(_=>{const D=n.fullPath;return mu("/b/"+u(n.bucket)+"/o/"+u(D),t,r)+gL({alt:"media",token:_})})[0]}(a,i,n.host,n._protocol)}}(n,t),u);return h.errorHandler=wE(e),h}(n.storage,n._location,EE());return n.storage.makeRequestWithTokens(e,Zs).then(t=>{if(null===t)throw function Y$(){return new Zn(Hn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return t})}function PL(n,e){const t=function vH(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new Ti(n._location.bucket,t);return new gp(n.storage,r)}function FL(n,e){if(n instanceof $1){const t=n;if(null==t._bucket)throw function K$(){return new Zn(Hn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+uL+"' property when initializing the app?")}();const r=new gp(t,t._bucket);return null!=e?FL(r,e):r}return void 0!==e?PL(n,e):n}function n4(n,e){if(e&&function e4(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof $1)return function t4(n,e){return new gp(n,e)}(n,e);throw ey("To use ref(service, url), the first argument must be a Storage instance.")}return FL(n,e)}function LL(n,e){const t=e?.[uL];return null==t?null:Ti.makeFromBucketSpec(t,n)}class $1{constructor(e,t,r,i,a){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=cL,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Ti.makeFromBucketSpec(i,this._host):LL(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Ti.makeFromBucketSpec(this._url,e):LL(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){O1("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){O1("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,ne.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,ne.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new gp(this,e)}_makeRequest(e,t,r,i,a=!0){if(this._deleted)return new X$(fL());{const u=function uH(n,e,t,r,i,a,u=!0){const h=gL(n.urlParams),m=n.url+h,_=Object.assign({},n.headers);return function aH(n,e){e&&(n["X-Firebase-GMPID"]=e)}(_,e),function oH(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(_,t),function sH(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(_,a),function cH(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(_,r),new iH(m,n.method,_,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,u)}(e,this._appId,r,i,t,this._firebaseVersion,a);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}makeRequestWithTokens(e,t){var r=this;return(0,ne.Z)(function*(){const[i,a]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,a).getPromise()})()}}const VL="@firebase/storage";function jL(n,e){return n4(n=(0,$e.m9)(n),e)}function h4(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new $1(t,r,i,e,Un.SDK_VERSION)}!function f4(){(0,Un._registerComponent)(new ws.wA("storage",h4,"PUBLIC").setMultipleInstances(!0)),(0,Un.registerVersion)(VL,"0.11.2",""),(0,Un.registerVersion)(VL,"0.11.2","esm2017")}();class mA{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class HL{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new mA(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new mA(r,this,this._ref))},t)}on(e,t,r,i){let a;return t&&(a="function"==typeof t?u=>t(new mA(u,this,this._ref)):{next:t.next?u=>t.next(new mA(u,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,r||void 0,i||void 0)}}class zL{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new gu(e,this._service))}get items(){return this._delegate.items.map(e=>new gu(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class gu{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function d4(n,e){return PL(n,e)}(this._delegate,e);return new gu(t,this.storage)}get root(){return new gu(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new gu(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new HL(function i4(n,e,t){return function WH(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new RL(n,new qa(e),t)}(n=(0,$e.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=Vo.RAW,r){this._throwIfRoot("putString");const i=F1(t,e),a=Object.assign({},r);return null==a.contentType&&null!=i.contentType&&(a.contentType=i.contentType),new HL(new RL(this._delegate,new qa(i.data,!0),a),this)}listAll(){return function c4(n){return function ZH(n){const e={prefixes:[],items:[]};return kL(n,e).then(()=>e)}(n=(0,$e.m9)(n))}(this._delegate).then(e=>new zL(e,this.storage))}list(e){return function a4(n,e){return OL(n=(0,$e.m9)(n),e)}(this._delegate,e||void 0).then(t=>new zL(t,this.storage))}getMetadata(){return function o4(n){return function YH(n){n._throwIfRoot("getMetadata");const e=TL(n.storage,n._location,EE());return n.storage.makeRequestWithTokens(e,Zs)}(n=(0,$e.m9)(n))}(this._delegate)}updateMetadata(e){return function s4(n,e){return function QH(n,e){n._throwIfRoot("updateMetadata");const t=function RH(n,e,t,r){const a=mu(e.fullServerUrl(),n.host,n._protocol),h=V1(t,r),_=n.maxOperationRetryTime,w=new Wa(a,"PATCH",fA(n,r),_);return w.headers={"Content-Type":"application/json; charset=utf-8"},w.body=h,w.errorHandler=wE(e),w}(n.storage,n._location,e,EE());return n.storage.makeRequestWithTokens(t,Zs)}(n=(0,$e.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function u4(n){return XH(n=(0,$e.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function l4(n){return function JH(n){n._throwIfRoot("deleteObject");const e=function NH(n,e){const r=mu(e.fullServerUrl(),n.host,n._protocol),h=new Wa(r,"DELETE",function u(m,_){},n.maxOperationRetryTime);return h.successCodes=[200,204],h.errorHandler=wE(e),h}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Zs)}(n=(0,$e.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw pL(e)}}class GL{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(qL(e))throw ey("ref() expected a child path but got a URL, use refFromURL instead.");return new gu(jL(this._delegate,e),this)}refFromURL(e){if(!qL(e))throw ey("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Ti.makeFromUrl(e,this._delegate.host)}catch{throw ey("refFromUrl() expected a valid full URL but got an invalid one.")}return new gu(jL(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function $L(n,e,t,r={}){!function r4(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,$e.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function qL(n){return/^[A-Za-z]+:\/\//.test(n)}function _4(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new GL(t,r)}!function y4(n){const e={TaskState:zi,TaskEvent:LH,StringFormat:Vo,Storage:GL,Reference:gu};n.INTERNAL.registerComponent(new ws.wA("storage-compat",_4,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.3.2")}(L$.Z);var v4=R(7142);function WL(n){const e=function b4(n){return new pu.y(e=>{const t=u=>e.next(u);t(n.snapshot);const a=n.on("state_changed",t);return n.then(u=>{t(u),e.complete()},u=>{t(n.snapshot),(u=>{e.error(u)})(u)}),function(){a()}}).pipe(aL(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,rn.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function gA(n){return{getDownloadURL:()=>(0,Ct.of)(void 0).pipe(tn.fc,(0,Ks.w)(()=>n.getDownloadURL()),tn.iC),getMetadata:()=>(0,Ct.of)(void 0).pipe(tn.fc,(0,Ks.w)(()=>n.getMetadata()),tn.iC),delete:()=>(0,Ir.D)(n.delete()),child:e=>gA(n.child(e)),updateMetadata:e=>(0,Ir.D)(n.updateMetadata(e)),put:(e,t)=>WL(n.put(e,t)),putString:(e,t,r)=>WL(n.putString(e,t,r)),list:e=>(0,Ir.D)(n.list(e)),listAll:()=>(0,Ir.D)(n.listAll())}}const E4=new p.OlP("angularfire2.storageBucket"),w4=new p.OlP("angularfire2.storage.maxUploadRetryTime"),I4=new p.OlP("angularfire2.storage.maxOperationRetryTime"),D4=new p.OlP("angularfire2.storage.use-emulator");let H1=(()=>{class n{constructor(t,r,i,a,u,h,m,_,w,D){const S=(0,Or.on)(t,u,r);this.storage=(0,Or.cc)(`${S.name}.storage.${i}`,"AngularFireStorage",S.name,()=>{const N=u.runOutsideAngular(()=>S.storage(i||void 0)),U=w;return U&&N.useEmulator(...U),m&&N.setMaxUploadRetryTime(m),_&&N.setMaxOperationRetryTime(_),N},[m,_])}ref(t){return gA(this.storage.ref(t))}refFromURL(t){return gA(this.storage.refFromURL(t))}upload(t,r,i){return gA(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Or.Dh),p.LFG(Or.xv,8),p.LFG(E4,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(tn.HU),p.LFG(w4,8),p.LFG(I4,8),p.LFG(D4,8),p.LFG(Sa,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),T4=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),n})(),C4=(()=>{class n{constructor(){v4.Z.registerVersion("angularfire",tn.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[H1],imports:[T4]}),n})();var _A=R(4674),Ys=R(5619);const{isArray:S4}=Array,{getPrototypeOf:x4,prototype:M4,keys:R4}=Object;function KL(n){if(1===n.length){const e=n[0];if(S4(e))return{args:e,keys:null};if(function N4(n){return n&&"object"==typeof n&&x4(n)===M4}(e)){const t=R4(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var yA=R(2737);const{isArray:k4}=Array;function ZL(n){return(0,rn.U)(e=>function O4(n,e){return k4(e)?n(...e):n(e)}(n,e))}var IE=R(4564);function YL(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var P4=R(7103);function vA(...n){const e=(0,IE.yG)(n),t=(0,IE.jO)(n),{args:r,keys:i}=KL(n);if(0===r.length)return(0,Ir.D)([],e);const a=new pu.y(function F4(n,e,t=yA.y){return r=>{QL(e,()=>{const{length:i}=n,a=new Array(i);let u=i,h=i;for(let m=0;m<i;m++)QL(e,()=>{const _=(0,Ir.D)(n[m],e);let w=!1;_.subscribe((0,Lo.x)(r,D=>{a[m]=D,w||(w=!0,h--),h||r.next(t(a.slice()))},()=>{--u||r.complete()}))},r)},r)}}(r,e,i?u=>YL(i,u):yA.y));return t?a.pipe(ZL(t)):a}function QL(n,e,t){n?(0,P4.f)(t,n,e):e()}const DE=(0,R(2306).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var TE=R(7537);function bA(...n){return function V4(){return(0,TE.J)(1)}()((0,Ir.D)(n,(0,IE.yG)(n)))}var EA=R(4829);function XL(n){return new pu.y(e=>{(0,EA.Xf)(n()).subscribe(e)})}var U4=R(8407);function CE(n,e){const t=(0,_A.m)(n)?n:()=>n,r=i=>i.error(t());return new pu.y(e?i=>e.schedule(r,0,i):r)}var Sd=R(6232),z1=R(7394);function G1(){return(0,Fo.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Lo.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class JL extends pu.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Fo.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new z1.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Lo.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=z1.w0.EMPTY)}return e}refCount(){return G1()(this)}}var xd=R(8645);function _p(n){return n<=0?()=>Sd.E:(0,Fo.e)((e,t)=>{let r=0;e.subscribe((0,Lo.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function e2(...n){const e=(0,IE.yG)(n);return(0,Fo.e)((t,r)=>{(e?bA(n,t,e):bA(n,t)).subscribe(r)})}function _u(n,e){return(0,Fo.e)((t,r)=>{let i=0;t.subscribe((0,Lo.x)(r,a=>n.call(e,a,i++)&&r.next(a)))})}var Gi=R(1631);function wA(n){return(0,Fo.e)((e,t)=>{let r=!1;e.subscribe((0,Lo.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function t2(n=B4){return(0,Fo.e)((e,t)=>{let r=!1;e.subscribe((0,Lo.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function B4(){return new DE}function yp(n,e){const t=arguments.length>=2;return r=>r.pipe(n?_u((i,a)=>n(i,a,r)):yA.y,_p(1),t?wA(e):t2(()=>new DE))}function AE(n,e){return(0,_A.m)(e)?(0,Gi.z)(n,e,1):(0,Gi.z)(n,1)}var Ci=R(9397);function vp(n){return(0,Fo.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe((0,Lo.x)(t,void 0,void 0,u=>{a=(0,EA.Xf)(n(u,vp(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}function q1(n){return n<=0?()=>Sd.E:(0,Fo.e)((e,t)=>{let r=[];e.subscribe((0,Lo.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function SE(n){return(0,Fo.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}var G4=R(2420);function n2(n){return(0,Fo.e)((e,t)=>{(0,EA.Xf)(n).subscribe((0,Lo.x)(t,()=>t.complete(),G4.Z)),!t.closed&&e.subscribe(t)})}const kt="primary",xE=Symbol("RouteTitle");class q4{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function iy(n){return new q4(n)}function W4(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const u=r[a],h=n[a];if(u.startsWith(":"))i[u.substring(1)]=h;else if(u!==h.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Za(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!r2(n[i],e[i]))return!1;return!0}function r2(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function i2(n){return n.length>0?n[n.length-1]:null}function Md(n){return function A4(n){return!!n&&(n instanceof pu.y||(0,_A.m)(n.lift)&&(0,_A.m)(n.subscribe))}(n)?n:(0,p.QGY)(n)?(0,Ir.D)(Promise.resolve(n)):(0,Ct.of)(n)}const Z4={exact:function a2(n,e,t){if(!bp(n.segments,e.segments)||!IA(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!a2(n.children[r],e.children[r],t))return!1;return!0},subset:c2},o2={exact:function Y4(n,e){return Za(n,e)},subset:function Q4(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>r2(n[t],e[t]))},ignored:()=>!0};function s2(n,e,t){return Z4[t.paths](n.root,e.root,t.matrixParams)&&o2[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function c2(n,e,t){return u2(n,e,e.segments,t)}function u2(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!bp(i,t)||e.hasChildren()||!IA(i,t,r))}if(n.segments.length===t.length){if(!bp(n.segments,t)||!IA(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!c2(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(bp(n.segments,i)&&IA(n.segments,i,r)&&n.children[kt])&&u2(n.children[kt],e,a,r)}}function IA(n,e,t){return e.every((r,i)=>o2[t](n[i].parameters,r.parameters))}class oy{constructor(e=new gn([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=iy(this.queryParams)),this._queryParamMap}toString(){return e3.serialize(this)}}class gn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return DA(this)}}class ME{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=iy(this.parameters)),this._parameterMap}toString(){return h2(this)}}function bp(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let RE=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=p.Yz7({token:n,factory:function(){return new W1},providedIn:"root"})}return n})();class W1{parse(e){const t=new h3(e);return new oy(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${NE(e.root,!0)}`,r=function r3(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${TA(t)}=${TA(i)}`).join("&"):`${TA(t)}=${TA(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),i="string"==typeof e.fragment?`#${function t3(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${r}${i}`}}const e3=new W1;function DA(n){return n.segments.map(e=>h2(e)).join("/")}function NE(n,e){if(!n.hasChildren())return DA(n);if(e){const t=n.children[kt]?NE(n.children[kt],!1):"",r=[];return Object.entries(n.children).forEach(([i,a])=>{i!==kt&&r.push(`${i}:${NE(a,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function J4(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===kt&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==kt&&(t=t.concat(e(i,r)))}),t}(n,(r,i)=>i===kt?[NE(n.children[kt],!1)]:[`${i}:${NE(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[kt]?`${DA(n)}/${t[0]}`:`${DA(n)}/(${t.join("//")})`}}function l2(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function TA(n){return l2(n).replace(/%3B/gi,";")}function K1(n){return l2(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function CA(n){return decodeURIComponent(n)}function d2(n){return CA(n.replace(/\+/g,"%20"))}function h2(n){return`${K1(n.path)}${function n3(n){return Object.keys(n).map(e=>`;${K1(e)}=${K1(n[e])}`).join("")}(n.parameters)}`}const o3=/^[^\/()?;#]+/;function Z1(n){const e=n.match(o3);return e?e[0]:""}const s3=/^[^\/()?;=#]+/,c3=/^[^=?&#]+/,l3=/^[^&#]+/;class h3{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new gn([],{}):new gn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[kt]=new gn(e,t)),r}parseSegment(){const e=Z1(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new p.vHH(4009,!1);return this.capture(e),new ME(CA(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function a3(n){const e=n.match(s3);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Z1(this.remaining);i&&(r=i,this.capture(r))}e[CA(t)]=CA(r)}parseQueryParam(e){const t=function u3(n){const e=n.match(c3);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const u=function d3(n){const e=n.match(l3);return e?e[0]:""}(this.remaining);u&&(r=u,this.capture(r))}const i=d2(t),a=d2(r);if(e.hasOwnProperty(i)){let u=e[i];Array.isArray(u)||(u=[u],e[i]=u),u.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Z1(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new p.vHH(4010,!1);let a;r.indexOf(":")>-1?(a=r.slice(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=kt);const u=this.parseChildren();t[a]=1===Object.keys(u).length?u[kt]:new gn([],u),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new p.vHH(4011,!1)}}function f2(n){return n.segments.length>0?new gn([],{[kt]:n}):n}function p2(n){const e={};for(const r of Object.keys(n.children)){const a=p2(n.children[r]);if(r===kt&&0===a.segments.length&&a.hasChildren())for(const[u,h]of Object.entries(a.children))e[u]=h;else(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function f3(n){if(1===n.numberOfChildren&&n.children[kt]){const e=n.children[kt];return new gn(n.segments.concat(e.segments),e.children)}return n}(new gn(n.segments,e))}function Ep(n){return n instanceof oy}function m2(n){let e;const i=f2(function t(a){const u={};for(const m of a.children){const _=t(m);u[m.outlet]=_}const h=new gn(a.url,u);return a===n&&(e=h),h}(n.root));return e??i}function g2(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(0===e.length)return Y1(i,i,i,t,r);const a=function m3(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new y2(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,u)=>{if("object"==typeof a&&null!=a){if(a.outlets){const h={};return Object.entries(a.outlets).forEach(([m,_])=>{h[m]="string"==typeof _?_.split("/"):_}),[...i,{outlets:h}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===u?(a.split("/").forEach((h,m)=>{0==m&&"."===h||(0==m&&""===h?t=!0:".."===h?e++:""!=h&&i.push(h))}),i):[...i,a]},[]);return new y2(t,e,r)}(e);if(a.toRoot())return Y1(i,i,new gn([],{}),t,r);const u=function g3(n,e,t){if(n.isAbsolute)return new SA(e,!0,0);if(!t)return new SA(e,!1,NaN);if(null===t.parent)return new SA(t,!0,0);const r=AA(n.commands[0])?0:1;return function _3(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new p.vHH(4005,!1);i=r.segments.length}return new SA(r,!1,i-a)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(a,i,n),h=u.processChildren?OE(u.segmentGroup,u.index,a.commands):v2(u.segmentGroup,u.index,a.commands);return Y1(i,u.segmentGroup,h,t,r)}function AA(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function kE(n){return"object"==typeof n&&null!=n&&n.outlets}function Y1(n,e,t,r,i){let u,a={};r&&Object.entries(r).forEach(([m,_])=>{a[m]=Array.isArray(_)?_.map(w=>`${w}`):`${_}`}),u=n===e?t:_2(n,e,t);const h=f2(p2(u));return new oy(h,a,i)}function _2(n,e,t){const r={};return Object.entries(n.children).forEach(([i,a])=>{r[i]=a===e?t:_2(a,e,t)}),new gn(n.segments,r)}class y2{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&AA(r[0]))throw new p.vHH(4003,!1);const i=r.find(kE);if(i&&i!==i2(r))throw new p.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class SA{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function v2(n,e,t){if(n||(n=new gn([],{})),0===n.segments.length&&n.hasChildren())return OE(n,e,t);const r=function v3(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const u=n.segments[i],h=t[r];if(kE(h))break;const m=`${h}`,_=r<t.length-1?t[r+1]:null;if(i>0&&void 0===m)break;if(m&&_&&"object"==typeof _&&void 0===_.outlets){if(!E2(m,_,u))return a;r+=2}else{if(!E2(m,{},u))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new gn(n.segments.slice(0,r.pathIndex),{});return a.children[kt]=new gn(n.segments.slice(r.pathIndex),n.children),OE(a,0,i)}return r.match&&0===i.length?new gn(n.segments,{}):r.match&&!n.hasChildren()?Q1(n,e,t):r.match?OE(n,0,i):Q1(n,e,t)}function OE(n,e,t){if(0===t.length)return new gn(n.segments,{});{const r=function y3(n){return kE(n[0])?n[0].outlets:{[kt]:n}}(t),i={};if(Object.keys(r).some(a=>a!==kt)&&n.children[kt]&&1===n.numberOfChildren&&0===n.children[kt].segments.length){const a=OE(n.children[kt],e,t);return new gn(n.segments,a.children)}return Object.entries(r).forEach(([a,u])=>{"string"==typeof u&&(u=[u]),null!==u&&(i[a]=v2(n.children[a],e,u))}),Object.entries(n.children).forEach(([a,u])=>{void 0===r[a]&&(i[a]=u)}),new gn(n.segments,i)}}function Q1(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(kE(a)){const m=b3(a.outlets);return new gn(r,m)}if(0===i&&AA(t[0])){r.push(new ME(n.segments[e].path,b2(t[0]))),i++;continue}const u=kE(a)?a.outlets[kt]:`${a}`,h=i<t.length-1?t[i+1]:null;u&&h&&AA(h)?(r.push(new ME(u,b2(h))),i+=2):(r.push(new ME(u,{})),i++)}return new gn(r,{})}function b3(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=Q1(new gn([],{}),0,r))}),e}function b2(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function E2(n,e,t){return n==t.path&&Za(e,t.parameters)}const PE="imperative";class Ya{constructor(e,t){this.id=e,this.url=t}}class xA extends Ya{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Rd extends Ya{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class FE extends Ya{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class sy extends Ya{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class MA extends Ya{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class w2 extends Ya{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class E3 extends Ya{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class w3 extends Ya{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class I3 extends Ya{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class D3 extends Ya{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class T3{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class C3{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class A3{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class S3{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class x3{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class M3{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class I2{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class X1{}class J1{constructor(e){this.url=e}}class R3{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new LE,this.attachRef=null}}let LE=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new R3,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class D2{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=ek(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=ek(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=tk(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return tk(e,this._root).map(t=>t.value)}}function ek(n,e){if(n===e.value)return e;for(const t of e.children){const r=ek(n,t);if(r)return r}return null}function tk(n,e){if(n===e.value)return[e];for(const t of e.children){const r=tk(n,t);if(r.length)return r.unshift(e),r}return[]}class yu{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function ay(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class T2 extends D2{constructor(e,t){super(e),this.snapshot=t,nk(this,e)}toString(){return this.snapshot.toString()}}function C2(n,e){const t=function N3(n,e){const u=new RA([],{},{},"",{},kt,e,null,{});return new S2("",new yu(u,[]))}(0,e),r=new Ys.X([new ME("",{})]),i=new Ys.X({}),a=new Ys.X({}),u=new Ys.X({}),h=new Ys.X(""),m=new Nd(r,i,u,h,a,kt,e,t.root);return m.snapshot=t.root,new T2(new yu(m,[]),t)}class Nd{constructor(e,t,r,i,a,u,h,m){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=a,this.outlet=u,this.component=h,this._futureSnapshot=m,this.title=this.dataSubject?.pipe((0,rn.U)(_=>_[xE]))??(0,Ct.of)(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,rn.U)(e=>iy(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,rn.U)(e=>iy(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function A2(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function k3(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class RA{get title(){return this.data?.[xE]}constructor(e,t,r,i,a,u,h,m,_){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=u,this.component=h,this.routeConfig=m,this._resolve=_}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=iy(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=iy(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class S2 extends D2{constructor(e,t){super(t),this.url=e,nk(this,t)}toString(){return x2(this._root)}}function nk(n,e){e.value._routerState=n,e.children.forEach(t=>nk(n,t))}function x2(n){const e=n.children.length>0?` { ${n.children.map(x2).join(", ")} } `:"";return`${n.value}${e}`}function rk(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Za(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Za(e.params,t.params)||n.paramsSubject.next(t.params),function K4(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Za(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),Za(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function ik(n,e){const t=Za(n.params,e.params)&&function X4(n,e){return bp(n,e)&&n.every((t,r)=>Za(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||ik(n.parent,e.parent))}let ok=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=kt,this.activateEvents=new p.vpe,this.deactivateEvents=new p.vpe,this.attachEvents=new p.vpe,this.detachEvents=new p.vpe,this.parentContexts=(0,p.f3M)(LE),this.location=(0,p.f3M)(p.s_b),this.changeDetector=(0,p.f3M)(p.sBO),this.environmentInjector=(0,p.f3M)(p.lqb),this.inputBinder=(0,p.f3M)(NA,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new p.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new p.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new p.vHH(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new p.vHH(4013,!1);this._activatedRoute=t;const i=this.location,u=t.snapshot.component,h=this.parentContexts.getOrCreateContext(this.name).children,m=new O3(t,h,i.injector);this.activated=i.createComponent(u,{index:i.length,injector:m,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=p.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[p.TTD]})}return n})();class O3{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Nd?this.route:e===LE?this.childContexts:this.parent.get(e,t)}}const NA=new p.OlP("");let M2=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,i=vA([r.queryParams,r.params,r.data]).pipe((0,Ks.w)(([a,u,h],m)=>(h={...a,...u,...h},0===m?(0,Ct.of)(h):Promise.resolve(h)))).subscribe(a=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const u=(0,p.qFp)(r.component);if(u)for(const{templateName:h}of u.inputs)t.activatedComponentRef.setInput(h,a[h]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,i)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac})}return n})();function VE(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function F3(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return VE(n,r,i);return VE(n,r)})}(n,e,t);return new yu(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const u=a.route;return u.value._futureSnapshot=e.value,u.children=e.children.map(h=>VE(n,h)),u}}const r=function L3(n){return new Nd(new Ys.X(n.url),new Ys.X(n.params),new Ys.X(n.queryParams),new Ys.X(n.fragment),new Ys.X(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>VE(n,a));return new yu(r,i)}}const sk="ngNavigationCancelingError";function R2(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Ep(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=N2(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function N2(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[sk]=!0,r.cancellationCode=e,t&&(r.url=t),r}function k2(n){return n&&n[sk]}let O2=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=p.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[p.jDz],decls:1,vars:0,template:function(r,i){1&r&&p._UZ(0,"router-outlet")},dependencies:[ok],encapsulation:2})}return n})();function ak(n){const e=n.children&&n.children.map(ak),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==kt&&(t.component=O2),t}function Qs(n){return n.outlet||kt}function UE(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class G3{constructor(e,t,r,i,a){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=a}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),rk(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=ay(t);e.children.forEach(a=>{const u=a.value.outlet;this.deactivateRoutes(a,i[u],r),delete i[u]}),Object.values(i).forEach(a=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const u=r.getContext(i.outlet);u&&this.deactivateChildRoutes(e,t,u.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=ay(e);for(const u of Object.keys(a))this.deactivateRouteAndItsChildren(a[u],i);if(r&&r.outlet){const u=r.outlet.detach(),h=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:u,route:e,contexts:h})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=ay(e);for(const u of Object.keys(a))this.deactivateRouteAndItsChildren(a[u],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const i=ay(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new M3(a.value.snapshot))}),e.children.length&&this.forwardEvent(new S3(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(rk(i),i===a)if(i.component){const u=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,u.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const u=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const h=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),u.children.onOutletReAttached(h.contexts),u.attachRef=h.componentRef,u.route=h.route.value,u.outlet&&u.outlet.attach(h.componentRef,h.route.value),rk(h.route.value),this.activateChildRoutes(e,null,u.children)}else{const h=UE(i.snapshot);u.attachRef=null,u.route=i,u.injector=h,u.outlet&&u.outlet.activateWith(i,u.injector),this.activateChildRoutes(e,null,u.children)}}else this.activateChildRoutes(e,null,r)}}class P2{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class kA{constructor(e,t){this.component=e,this.route=t}}function q3(n,e,t){const r=n._root;return BE(r,e?e._root:null,t,[r.value])}function cy(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,p.Z0I)(n)?e.get(n):n:r}function BE(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=ay(e);return n.children.forEach(u=>{(function K3(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,u=e?e.value:null,h=t?t.getContext(n.value.outlet):null;if(u&&a.routeConfig===u.routeConfig){const m=function Z3(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!bp(n.url,e.url);case"pathParamsOrQueryParamsChange":return!bp(n.url,e.url)||!Za(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ik(n,e)||!Za(n.queryParams,e.queryParams);default:return!ik(n,e)}}(u,a,a.routeConfig.runGuardsAndResolvers);m?i.canActivateChecks.push(new P2(r)):(a.data=u.data,a._resolvedData=u._resolvedData),BE(n,e,a.component?h?h.children:null:t,r,i),m&&h&&h.outlet&&h.outlet.isActivated&&i.canDeactivateChecks.push(new kA(h.outlet.component,u))}else u&&jE(e,h,i),i.canActivateChecks.push(new P2(r)),BE(n,null,a.component?h?h.children:null:t,r,i)})(u,a[u.value.outlet],t,r.concat([u.value]),i),delete a[u.value.outlet]}),Object.entries(a).forEach(([u,h])=>jE(h,t.getContext(u),i)),i}function jE(n,e,t){const r=ay(n),i=n.value;Object.entries(r).forEach(([a,u])=>{jE(u,i.component?e?e.children.getContext(a):null:e,t)}),t.canDeactivateChecks.push(new kA(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function $E(n){return"function"==typeof n}function F2(n){return n instanceof DE||"EmptyError"===n?.name}const OA=Symbol("INITIAL_VALUE");function uy(){return(0,Ks.w)(n=>vA(n.map(e=>e.pipe(_p(1),e2(OA)))).pipe((0,rn.U)(e=>{for(const t of e)if(!0!==t){if(t===OA)return OA;if(!1===t||t instanceof oy)return t}return!0}),_u(e=>e!==OA),_p(1)))}function L2(n){return(0,U4.z)((0,Ci.b)(e=>{if(Ep(e))throw R2(0,e)}),(0,rn.U)(e=>!0===e))}class PA{constructor(e){this.segmentGroup=e||null}}class V2{constructor(e){this.urlTree=e}}function ly(n){return CE(new PA(n))}function U2(n){return CE(new V2(n))}class mz{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new p.vHH(4002,!1)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return(0,Ct.of)(r);if(i.numberOfChildren>1||!i.children[kt])return CE(new p.vHH(4e3,!1));i=i.children[kt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new oy(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([i,a])=>{if("string"==typeof a&&a.startsWith(":")){const h=a.substring(1);r[i]=t[h]}else r[i]=a}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let u={};return Object.entries(t.children).forEach(([h,m])=>{u[h]=this.createSegmentGroup(e,m,r,i)}),new gn(a,u)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new p.vHH(4001,!1);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}const ck={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function gz(n,e,t,r,i){const a=uk(n,e,t);return a.matched?(r=function U3(n,e){return n.providers&&!n._injector&&(n._injector=(0,p.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function hz(n,e,t,r){const i=e.canMatch;if(!i||0===i.length)return(0,Ct.of)(!0);const a=i.map(u=>{const h=cy(u,n);return Md(function tz(n){return n&&$E(n.canMatch)}(h)?h.canMatch(e,t):n.runInContext(()=>h(e,t)))});return(0,Ct.of)(a).pipe(uy(),L2())}(r,e,t).pipe((0,rn.U)(u=>!0===u?a:{...ck}))):(0,Ct.of)(a)}function uk(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...ck}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||W4)(t,n,e);if(!i)return{...ck};const a={};Object.entries(i.posParams??{}).forEach(([h,m])=>{a[h]=m.path});const u=i.consumed.length>0?{...a,...i.consumed[i.consumed.length-1].parameters}:a;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:u,positionalParamSegments:i.posParams??{}}}function B2(n,e,t,r){return t.length>0&&function vz(n,e,t){return t.some(r=>FA(n,e,r)&&Qs(r)!==kt)}(n,t,r)?{segmentGroup:new gn(e,yz(r,new gn(t,n.children))),slicedSegments:[]}:0===t.length&&function bz(n,e,t){return t.some(r=>FA(n,e,r))}(n,t,r)?{segmentGroup:new gn(n.segments,_z(n,0,t,r,n.children)),slicedSegments:t}:{segmentGroup:new gn(n.segments,n.children),slicedSegments:t}}function _z(n,e,t,r,i){const a={};for(const u of r)if(FA(n,t,u)&&!i[Qs(u)]){const h=new gn([],{});a[Qs(u)]=h}return{...i,...a}}function yz(n,e){const t={};t[kt]=e;for(const r of n)if(""===r.path&&Qs(r)!==kt){const i=new gn([],{});t[Qs(r)]=i}return t}function FA(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class Dz{constructor(e,t,r,i,a,u,h){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=a,this.paramsInheritanceStrategy=u,this.urlSerializer=h,this.allowRedirects=!0,this.applyRedirects=new mz(this.urlSerializer,this.urlTree)}noMatchError(e){return new p.vHH(4002,!1)}recognize(){const e=B2(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,kt).pipe(vp(t=>{if(t instanceof V2)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof PA?this.noMatchError(t):t}),(0,rn.U)(t=>{const r=new RA([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},kt,this.rootComponentType,null,{}),i=new yu(r,t),a=new S2("",i),u=function p3(n,e,t=null,r=null){return g2(m2(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return u.queryParams=this.urlTree.queryParams,a.url=this.urlSerializer.serialize(u),this.inheritParamsAndData(a._root),{state:a,tree:u}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,kt).pipe(vp(r=>{throw r instanceof PA?this.noMatchError(r):r}))}inheritParamsAndData(e){const t=e.value,r=A2(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i,!0)}processChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,Ir.D)(i).pipe(AE(a=>{const u=r.children[a],h=function H3(n,e){const t=n.filter(r=>Qs(r)===e);return t.push(...n.filter(r=>Qs(r)!==e)),t}(t,a);return this.processSegmentGroup(e,h,u,a)}),function $4(n,e){return(0,Fo.e)(function j4(n,e,t,r,i){return(a,u)=>{let h=t,m=e,_=0;a.subscribe((0,Lo.x)(u,w=>{const D=_++;m=h?n(m,w,D):(h=!0,w),r&&u.next(m)},i&&(()=>{h&&u.next(m),u.complete()})))}}(n,e,arguments.length>=2,!0))}((a,u)=>(a.push(...u),a)),wA(null),function H4(n,e){const t=arguments.length>=2;return r=>r.pipe(n?_u((i,a)=>n(i,a,r)):yA.y,q1(1),t?wA(e):t2(()=>new DE))}(),(0,Gi.z)(a=>{if(null===a)return ly(r);const u=j2(a);return function Tz(n){n.sort((e,t)=>e.value.outlet===kt?-1:t.value.outlet===kt?1:e.value.outlet.localeCompare(t.value.outlet))}(u),(0,Ct.of)(u)}))}processSegment(e,t,r,i,a,u){return(0,Ir.D)(t).pipe(AE(h=>this.processSegmentAgainstRoute(h._injector??e,t,h,r,i,a,u).pipe(vp(m=>{if(m instanceof PA)return(0,Ct.of)(null);throw m}))),yp(h=>!!h),vp(h=>{if(F2(h))return function wz(n,e,t){return 0===e.length&&!n.children[t]}(r,i,a)?(0,Ct.of)([]):ly(r);throw h}))}processSegmentAgainstRoute(e,t,r,i,a,u,h){return function Ez(n,e,t,r){return!!(Qs(n)===r||r!==kt&&FA(e,t,n))&&("**"===n.path||uk(e,n,t).matched)}(r,i,a,u)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,a,u,h):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,a,u):ly(i):ly(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,u){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,u):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,u)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?U2(a):this.applyRedirects.lineralizeSegments(r,a).pipe((0,Gi.z)(u=>{const h=new gn(u,{});return this.processSegment(e,t,h,u,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,u){const{matched:h,consumedSegments:m,remainingSegments:_,positionalParamSegments:w}=uk(t,i,a);if(!h)return ly(t);const D=this.applyRedirects.applyRedirectCommands(m,i.redirectTo,w);return i.redirectTo.startsWith("/")?U2(D):this.applyRedirects.lineralizeSegments(i,D).pipe((0,Gi.z)(S=>this.processSegment(e,r,t,S.concat(_),u,!1)))}matchSegmentAgainstRoute(e,t,r,i,a,u){let h;if("**"===r.path){const m=i.length>0?i2(i).parameters:{},_=new RA(i,m,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,$2(r),Qs(r),r.component??r._loadedComponent??null,r,H2(r));h=(0,Ct.of)({snapshot:_,consumedSegments:[],remainingSegments:[]}),t.children={}}else h=gz(t,r,i,e).pipe((0,rn.U)(({matched:m,consumedSegments:_,remainingSegments:w,parameters:D})=>m?{snapshot:new RA(_,D,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,$2(r),Qs(r),r.component??r._loadedComponent??null,r,H2(r)),consumedSegments:_,remainingSegments:w}:null));return h.pipe((0,Ks.w)(m=>null===m?ly(t):this.getChildConfig(e=r._injector??e,r,i).pipe((0,Ks.w)(({routes:_})=>{const w=r._loadedInjector??e,{snapshot:D,consumedSegments:S,remainingSegments:N}=m,{segmentGroup:U,slicedSegments:W}=B2(t,S,N,_);if(0===W.length&&U.hasChildren())return this.processChildren(w,_,U).pipe((0,rn.U)(Re=>null===Re?null:[new yu(D,Re)]));if(0===_.length&&0===W.length)return(0,Ct.of)([new yu(D,[])]);const oe=Qs(r)===a;return this.processSegment(w,_,U,W,oe?kt:a,!0).pipe((0,rn.U)(Re=>[new yu(D,Re)]))}))))}getChildConfig(e,t,r){return t.children?(0,Ct.of)({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?(0,Ct.of)({routes:t._loadedRoutes,injector:t._loadedInjector}):function dz(n,e,t,r){const i=e.canLoad;if(void 0===i||0===i.length)return(0,Ct.of)(!0);const a=i.map(u=>{const h=cy(u,n);return Md(function Q3(n){return n&&$E(n.canLoad)}(h)?h.canLoad(e,t):n.runInContext(()=>h(e,t)))});return(0,Ct.of)(a).pipe(uy(),L2())}(e,t,r).pipe((0,Gi.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,Ci.b)(a=>{t._loadedRoutes=a.routes,t._loadedInjector=a.injector})):function pz(n){return CE(N2(!1,3))}())):(0,Ct.of)({routes:[],injector:e})}}function Cz(n){const e=n.value.routeConfig;return e&&""===e.path}function j2(n){const e=[],t=new Set;for(const r of n){if(!Cz(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=j2(r.children);e.push(new yu(r.value,i))}return e.filter(r=>!t.has(r))}function $2(n){return n.data||{}}function H2(n){return n.resolve||{}}function z2(n){return"string"==typeof n.title||null===n.title}function lk(n){return(0,Ks.w)(e=>{const t=n(e);return t?(0,Ir.D)(t).pipe((0,rn.U)(()=>e)):(0,Ct.of)(e)})}const dy=new p.OlP("ROUTES");let dk=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,p.f3M)(p.Sil)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return(0,Ct.of)(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Md(t.loadComponent()).pipe((0,rn.U)(G2),(0,Ci.b)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=a}),SE(()=>{this.componentLoaders.delete(t)})),i=new JL(r,()=>new xd.x).pipe(G1());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return(0,Ct.of)({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const a=function kz(n,e,t,r){return Md(n.loadChildren()).pipe((0,rn.U)(G2),(0,Gi.z)(i=>i instanceof p.YKP||Array.isArray(i)?(0,Ct.of)(i):(0,Ir.D)(e.compileModuleAsync(i))),(0,rn.U)(i=>{r&&r(n);let a,u,h=!1;return Array.isArray(i)?(u=i,!0):(a=i.create(t).injector,u=a.get(dy,[],{optional:!0,self:!0}).flat()),{routes:u.map(ak),injector:a}}))}(r,this.compiler,t,this.onLoadEndListener).pipe(SE(()=>{this.childrenLoaders.delete(r)})),u=new JL(a,()=>new xd.x).pipe(G1());return this.childrenLoaders.set(r,u),u}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function G2(n){return function Oz(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let LA=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new xd.x,this.transitionAbortSubject=new xd.x,this.configLoader=(0,p.f3M)(dk),this.environmentInjector=(0,p.f3M)(p.lqb),this.urlSerializer=(0,p.f3M)(RE),this.rootContexts=(0,p.f3M)(LE),this.inputBindingEnabled=null!==(0,p.f3M)(NA,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,Ct.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new C3(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new T3(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t,r,i){return this.transitions=new Ys.X({id:0,currentUrlTree:r,currentRawUrl:r,currentBrowserUrl:r,extractedUrl:t.urlHandlingStrategy.extract(r),urlAfterRedirects:t.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:PE,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(_u(a=>0!==a.id),(0,rn.U)(a=>({...a,extractedUrl:t.urlHandlingStrategy.extract(a.rawUrl)})),(0,Ks.w)(a=>{this.currentTransition=a;let u=!1,h=!1;return(0,Ct.of)(a).pipe((0,Ci.b)(m=>{this.currentNavigation={id:m.id,initialUrl:m.rawUrl,extractedUrl:m.extractedUrl,trigger:m.source,extras:m.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Ks.w)(m=>{const _=m.currentBrowserUrl.toString(),w=!t.navigated||m.extractedUrl.toString()!==_||_!==m.currentUrlTree.toString();if(!w&&"reload"!==(m.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const S="";return this.events.next(new sy(m.id,this.urlSerializer.serialize(m.rawUrl),S,0)),m.resolve(null),Sd.E}if(t.urlHandlingStrategy.shouldProcessUrl(m.rawUrl))return(0,Ct.of)(m).pipe((0,Ks.w)(S=>{const N=this.transitions?.getValue();return this.events.next(new xA(S.id,this.urlSerializer.serialize(S.extractedUrl),S.source,S.restoredState)),N!==this.transitions?.getValue()?Sd.E:Promise.resolve(S)}),function Az(n,e,t,r,i,a){return(0,Gi.z)(u=>function Iz(n,e,t,r,i,a,u="emptyOnly"){return new Dz(n,e,t,r,i,u,a).recognize()}(n,e,t,r,u.extractedUrl,i,a).pipe((0,rn.U)(({state:h,tree:m})=>({...u,targetSnapshot:h,urlAfterRedirects:m}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),(0,Ci.b)(S=>{a.targetSnapshot=S.targetSnapshot,a.urlAfterRedirects=S.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:S.urlAfterRedirects};const N=new w2(S.id,this.urlSerializer.serialize(S.extractedUrl),this.urlSerializer.serialize(S.urlAfterRedirects),S.targetSnapshot);this.events.next(N)}));if(w&&t.urlHandlingStrategy.shouldProcessUrl(m.currentRawUrl)){const{id:S,extractedUrl:N,source:U,restoredState:W,extras:oe}=m,Re=new xA(S,this.urlSerializer.serialize(N),U,W);this.events.next(Re);const Be=C2(0,this.rootComponentType).snapshot;return this.currentTransition=a={...m,targetSnapshot:Be,urlAfterRedirects:N,extras:{...oe,skipLocationChange:!1,replaceUrl:!1}},(0,Ct.of)(a)}{const S="";return this.events.next(new sy(m.id,this.urlSerializer.serialize(m.extractedUrl),S,1)),m.resolve(null),Sd.E}}),(0,Ci.b)(m=>{const _=new E3(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(_)}),(0,rn.U)(m=>(this.currentTransition=a={...m,guards:q3(m.targetSnapshot,m.currentSnapshot,this.rootContexts)},a)),function rz(n,e){return(0,Gi.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:u}}=t;return 0===u.length&&0===a.length?(0,Ct.of)({...t,guardsResult:!0}):function iz(n,e,t,r){return(0,Ir.D)(n).pipe((0,Gi.z)(i=>function lz(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!a||0===a.length)return(0,Ct.of)(!0);const u=a.map(h=>{const m=UE(e)??i,_=cy(h,m);return Md(function ez(n){return n&&$E(n.canDeactivate)}(_)?_.canDeactivate(n,e,t,r):m.runInContext(()=>_(n,e,t,r))).pipe(yp())});return(0,Ct.of)(u).pipe(uy())}(i.component,i.route,t,e,r)),yp(i=>!0!==i,!0))}(u,r,i,n).pipe((0,Gi.z)(h=>h&&function Y3(n){return"boolean"==typeof n}(h)?function oz(n,e,t,r){return(0,Ir.D)(e).pipe(AE(i=>bA(function az(n,e){return null!==n&&e&&e(new A3(n)),(0,Ct.of)(!0)}(i.route.parent,r),function sz(n,e){return null!==n&&e&&e(new x3(n)),(0,Ct.of)(!0)}(i.route,r),function uz(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(u=>function W3(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(u)).filter(u=>null!==u).map(u=>XL(()=>{const h=u.guards.map(m=>{const _=UE(u.node)??t,w=cy(m,_);return Md(function J3(n){return n&&$E(n.canActivateChild)}(w)?w.canActivateChild(r,n):_.runInContext(()=>w(r,n))).pipe(yp())});return(0,Ct.of)(h).pipe(uy())}));return(0,Ct.of)(a).pipe(uy())}(n,i.path,t),function cz(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return(0,Ct.of)(!0);const i=r.map(a=>XL(()=>{const u=UE(e)??t,h=cy(a,u);return Md(function X3(n){return n&&$E(n.canActivate)}(h)?h.canActivate(e,n):u.runInContext(()=>h(e,n))).pipe(yp())}));return(0,Ct.of)(i).pipe(uy())}(n,i.route,t))),yp(i=>!0!==i,!0))}(r,a,n,e):(0,Ct.of)(h)),(0,rn.U)(h=>({...t,guardsResult:h})))})}(this.environmentInjector,m=>this.events.next(m)),(0,Ci.b)(m=>{if(a.guardsResult=m.guardsResult,Ep(m.guardsResult))throw R2(0,m.guardsResult);const _=new w3(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot,!!m.guardsResult);this.events.next(_)}),_u(m=>!!m.guardsResult||(this.cancelNavigationTransition(m,"",3),!1)),lk(m=>{if(m.guards.canActivateChecks.length)return(0,Ct.of)(m).pipe((0,Ci.b)(_=>{const w=new I3(_.id,this.urlSerializer.serialize(_.extractedUrl),this.urlSerializer.serialize(_.urlAfterRedirects),_.targetSnapshot);this.events.next(w)}),(0,Ks.w)(_=>{let w=!1;return(0,Ct.of)(_).pipe(function Sz(n,e){return(0,Gi.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return(0,Ct.of)(t);let a=0;return(0,Ir.D)(i).pipe(AE(u=>function xz(n,e,t,r){const i=n.routeConfig,a=n._resolve;return void 0!==i?.title&&!z2(i)&&(a[xE]=i.title),function Mz(n,e,t,r){const i=function Rz(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return(0,Ct.of)({});const a={};return(0,Ir.D)(i).pipe((0,Gi.z)(u=>function Nz(n,e,t,r){const i=UE(e)??r,a=cy(n,i);return Md(a.resolve?a.resolve(e,t):i.runInContext(()=>a(e,t)))}(n[u],e,t,r).pipe(yp(),(0,Ci.b)(h=>{a[u]=h}))),q1(1),function z4(n){return(0,rn.U)(()=>n)}(a),vp(u=>F2(u)?Sd.E:CE(u)))}(a,n,e,r).pipe((0,rn.U)(u=>(n._resolvedData=u,n.data=A2(n,t).resolve,i&&z2(i)&&(n.data[xE]=i.title),null)))}(u.route,r,n,e)),(0,Ci.b)(()=>a++),q1(1),(0,Gi.z)(u=>a===i.length?(0,Ct.of)(t):Sd.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),(0,Ci.b)({next:()=>w=!0,complete:()=>{w||this.cancelNavigationTransition(_,"",2)}}))}),(0,Ci.b)(_=>{const w=new D3(_.id,this.urlSerializer.serialize(_.extractedUrl),this.urlSerializer.serialize(_.urlAfterRedirects),_.targetSnapshot);this.events.next(w)}))}),lk(m=>{const _=w=>{const D=[];w.routeConfig?.loadComponent&&!w.routeConfig._loadedComponent&&D.push(this.configLoader.loadComponent(w.routeConfig).pipe((0,Ci.b)(S=>{w.component=S}),(0,rn.U)(()=>{})));for(const S of w.children)D.push(..._(S));return D};return vA(_(m.targetSnapshot.root)).pipe(wA(),_p(1))}),lk(()=>this.afterPreactivation()),(0,rn.U)(m=>{const _=function P3(n,e,t){const r=VE(n,e._root,t?t._root:void 0);return new T2(r,e)}(t.routeReuseStrategy,m.targetSnapshot,m.currentRouterState);return this.currentTransition=a={...m,targetRouterState:_},a}),(0,Ci.b)(()=>{this.events.next(new X1)}),((n,e,t,r)=>(0,rn.U)(i=>(new G3(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)))(this.rootContexts,t.routeReuseStrategy,m=>this.events.next(m),this.inputBindingEnabled),_p(1),(0,Ci.b)({next:m=>{u=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Rd(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects))),t.titleStrategy?.updateTitle(m.targetRouterState.snapshot),m.resolve(!0)},complete:()=>{u=!0}}),n2(this.transitionAbortSubject.pipe((0,Ci.b)(m=>{throw m}))),SE(()=>{u||h||this.cancelNavigationTransition(a,"",1),this.currentNavigation?.id===a.id&&(this.currentNavigation=null)}),vp(m=>{if(h=!0,k2(m))this.events.next(new FE(a.id,this.urlSerializer.serialize(a.extractedUrl),m.message,m.cancellationCode)),function V3(n){return k2(n)&&Ep(n.url)}(m)?this.events.next(new J1(m.url)):a.resolve(!1);else{this.events.next(new MA(a.id,this.urlSerializer.serialize(a.extractedUrl),m,a.targetSnapshot??void 0));try{a.resolve(t.errorHandler(m))}catch(_){a.reject(_)}}return Sd.E}))}))}cancelNavigationTransition(t,r,i){const a=new FE(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(a),t.resolve(!1)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function q2(n){return n!==PE}let W2=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(a=>a.outlet===kt);return r}getResolvedTitleForRoute(t){return t.data[xE]}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=p.Yz7({token:n,factory:function(){return(0,p.f3M)(Pz)},providedIn:"root"})}return n})(),Pz=(()=>{class n extends W2{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}static#e=this.\u0275fac=function(r){return new(r||n)(p.LFG(ih))};static#t=this.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Fz=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=p.Yz7({token:n,factory:function(){return(0,p.f3M)(Vz)},providedIn:"root"})}return n})();class Lz{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let Vz=(()=>{class n extends Lz{static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=p.n5z(n)))(i||n)}}();static#t=this.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const VA=new p.OlP("",{providedIn:"root",factory:()=>({})});let Uz=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=p.Yz7({token:n,factory:function(){return(0,p.f3M)(Bz)},providedIn:"root"})}return n})(),Bz=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var HE=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(HE||{});function K2(n,e){n.events.pipe(_u(t=>t instanceof Rd||t instanceof FE||t instanceof MA||t instanceof sy),(0,rn.U)(t=>t instanceof Rd||t instanceof sy?HE.COMPLETE:t instanceof FE&&(0===t.code||1===t.code)?HE.REDIRECTING:HE.FAILED),_u(t=>t!==HE.REDIRECTING),_p(1)).subscribe(()=>{e()})}function jz(n){throw n}function $z(n,e,t){return e.parse("/")}const Hz={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},zz={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let cs=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,p.f3M)(p.c2e),this.isNgZoneEnabled=!1,this._events=new xd.x,this.options=(0,p.f3M)(VA,{optional:!0})||{},this.pendingTasks=(0,p.f3M)(p.HDt),this.errorHandler=this.options.errorHandler||jz,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||$z,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,p.f3M)(Uz),this.routeReuseStrategy=(0,p.f3M)(Fz),this.titleStrategy=(0,p.f3M)(W2),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,p.f3M)(dy,{optional:!0})?.flat()??[],this.navigationTransitions=(0,p.f3M)(LA),this.urlSerializer=(0,p.f3M)(RE),this.location=(0,p.f3M)(ze),this.componentInputBindingEnabled=!!(0,p.f3M)(NA,{optional:!0}),this.eventsSubscription=new z1.w0,this.isNgZoneEnabled=(0,p.f3M)(p.R0b)instanceof p.R0b&&p.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new oy,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=C2(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(r=>{try{const{currentTransition:i}=this.navigationTransitions;if(null===i)return void(Z2(r)&&this._events.next(r));if(r instanceof xA)q2(i.source)&&(this.browserUrlTree=i.extractedUrl);else if(r instanceof sy)this.rawUrlTree=i.rawUrl;else if(r instanceof w2){if("eager"===this.urlUpdateStrategy){if(!i.extras.skipLocationChange){const a=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl);this.setBrowserUrl(a,i)}this.browserUrlTree=i.urlAfterRedirects}}else if(r instanceof X1)this.currentUrlTree=i.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl),this.routerState=i.targetRouterState,"deferred"===this.urlUpdateStrategy&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i),this.browserUrlTree=i.urlAfterRedirects);else if(r instanceof FE)0!==r.code&&1!==r.code&&(this.navigated=!0),(3===r.code||2===r.code)&&this.restoreHistory(i);else if(r instanceof J1){const a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||q2(i.source)};this.scheduleNavigation(a,PE,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}r instanceof MA&&this.restoreHistory(i,!0),r instanceof Rd&&(this.navigated=!0),Z2(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),PE,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const a={replaceUrl:!0},u=i?.navigationId?i:null;if(i){const m={...i};delete m.navigationId,delete m.\u0275routerPageId,0!==Object.keys(m).length&&(a.state=m)}const h=this.parseUrl(t);this.scheduleNavigation(h,r,u,a)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(ak),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:u,queryParamsHandling:h,preserveFragment:m}=r,_=m?this.currentUrlTree.fragment:u;let D,w=null;switch(h){case"merge":w={...this.currentUrlTree.queryParams,...a};break;case"preserve":w=this.currentUrlTree.queryParams;break;default:w=a||null}null!==w&&(w=this.removeEmptyProps(w));try{D=m2(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),D=this.currentUrlTree.root}return g2(D,t,w,_??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Ep(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,PE,null,r)}navigate(t,r={skipLocationChange:!1}){return function Gz(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new p.vHH(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...Hz}:!1===r?{...zz}:r,Ep(t))return s2(this.currentUrlTree,t,i);const a=this.parseUrl(t);return s2(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}scheduleNavigation(t,r,i,a,u){if(this.disposed)return Promise.resolve(!1);let h,m,_;u?(h=u.resolve,m=u.reject,_=u.promise):_=new Promise((D,S)=>{h=D,m=S});const w=this.pendingTasks.add();return K2(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(w))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:t,extras:a,resolve:h,reject:m,promise:_,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),_.catch(D=>Promise.reject(D))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const u={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",u)}else{const a={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",a)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const a=this.currentPageId-this.browserPageId;0!==a?this.location.historyGo(a):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===a&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Z2(n){return!(n instanceof X1||n instanceof J1)}let hy=(()=>{class n{constructor(t,r,i,a,u,h){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=a,this.el=u,this.locationStrategy=h,this.href=null,this.commands=null,this.onChanges=new xd.x,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const m=u.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===m||"area"===m,this.isAnchorElement?this.subscription=t.events.subscribe(_=>{_ instanceof Rd&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,a,u){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||i||a||u||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:(0,p.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const i=this.renderer,a=this.el.nativeElement;null!==r?i.setAttribute(a,t,r):i.removeAttribute(a,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(r){return new(r||n)(p.Y36(cs),p.Y36(Nd),p.$8M("tabindex"),p.Y36(p.Qsj),p.Y36(p.SBq),p.Y36(Ne))};static#t=this.\u0275dir=p.lG2({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){1&r&&p.NdJ("click",function(u){return i.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&r&&p.uIk("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",p.VuI],skipLocationChange:["skipLocationChange","skipLocationChange",p.VuI],replaceUrl:["replaceUrl","replaceUrl",p.VuI],routerLink:"routerLink"},standalone:!0,features:[p.Xq5,p.TTD]})}return n})();class Y2{}let Kz=(()=>{class n{constructor(t,r,i,a,u){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=u}setUpPreloading(){this.subscription=this.router.events.pipe(_u(t=>t instanceof Rd),AE(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r){a.providers&&!a._injector&&(a._injector=(0,p.MMx)(a.providers,t,`Route: ${a.path}`));const u=a._injector??t,h=a._loadedInjector??u;(a.loadChildren&&!a._loadedRoutes&&void 0===a.canLoad||a.loadComponent&&!a._loadedComponent)&&i.push(this.preloadConfig(u,a)),(a.children||a._loadedRoutes)&&i.push(this.processRoutes(h,a.children??a._loadedRoutes))}return(0,Ir.D)(i).pipe((0,TE.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):(0,Ct.of)(null);const a=i.pipe((0,Gi.z)(u=>null===u?(0,Ct.of)(void 0):(r._loadedRoutes=u.routes,r._loadedInjector=u.injector,this.processRoutes(u.injector??t,u.routes))));if(r.loadComponent&&!r._loadedComponent){const u=this.loader.loadComponent(r);return(0,Ir.D)([a,u]).pipe((0,TE.J)())}return a})}static#e=this.\u0275fac=function(r){return new(r||n)(p.LFG(cs),p.LFG(p.Sil),p.LFG(p.lqb),p.LFG(Y2),p.LFG(dk))};static#t=this.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const hk=new p.OlP("");let Q2=(()=>{class n{constructor(t,r,i,a,u={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=a,this.options=u,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},u.scrollPositionRestoration=u.scrollPositionRestoration||"disabled",u.anchorScrolling=u.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof xA?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Rd?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof sy&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof I2&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new I2(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){p.$Z()};static#t=this.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac})}return n})();function vu(n,e){return{\u0275kind:n,\u0275providers:e}}function J2(){const n=(0,p.f3M)(p.zs3);return e=>{const t=n.get(p.z2F);if(e!==t.components[0])return;const r=n.get(cs),i=n.get(eV);1===n.get(fk)&&r.initialNavigation(),n.get(tV,null,p.XFs.Optional)?.setUpPreloading(),n.get(hk,null,p.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const eV=new p.OlP("",{factory:()=>new xd.x}),fk=new p.OlP("",{providedIn:"root",factory:()=>1}),tV=new p.OlP("");function Xz(n){return vu(0,[{provide:tV,useExisting:Kz},{provide:Y2,useExisting:n}])}const nV=new p.OlP("ROUTER_FORROOT_GUARD"),eG=[ze,{provide:RE,useClass:W1},cs,LE,{provide:Nd,useFactory:function X2(n){return n.routerState.root},deps:[cs]},dk,[]];function tG(){return new p.PXZ("Router",cs)}let rV=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[eG,[],{provide:dy,multi:!0,useValue:t},{provide:nV,useFactory:oG,deps:[[cs,new p.FiY,new p.tp0]]},{provide:VA,useValue:r||{}},r?.useHash?{provide:Ne,useClass:at}:{provide:Ne,useClass:Ke},{provide:hk,useFactory:()=>{const n=(0,p.f3M)(na),e=(0,p.f3M)(p.R0b),t=(0,p.f3M)(VA),r=(0,p.f3M)(LA),i=(0,p.f3M)(RE);return t.scrollOffset&&n.setOffset(t.scrollOffset),new Q2(i,r,n,e,t)}},r?.preloadingStrategy?Xz(r.preloadingStrategy).\u0275providers:[],{provide:p.PXZ,multi:!0,useFactory:tG},r?.initialNavigation?sG(r):[],r?.bindToComponentInputs?vu(8,[M2,{provide:NA,useExisting:M2}]).\u0275providers:[],[{provide:iV,useFactory:J2},{provide:p.tb,multi:!0,useExisting:iV}]]}}static forChild(t){return{ngModule:n,providers:[{provide:dy,multi:!0,useValue:t}]}}static#e=this.\u0275fac=function(r){return new(r||n)(p.LFG(nV,8))};static#t=this.\u0275mod=p.oAB({type:n});static#n=this.\u0275inj=p.cJS({})}return n})();function oG(n){return"guarded"}function sG(n){return["disabled"===n.initialNavigation?vu(3,[{provide:p.ip1,multi:!0,useFactory:()=>{const e=(0,p.f3M)(cs);return()=>{e.setUpLocationChangeListener()}}},{provide:fk,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?vu(2,[{provide:fk,useValue:0},{provide:p.ip1,multi:!0,deps:[p.zs3],useFactory:e=>{const t=e.get(Ce,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(cs),a=e.get(eV);K2(i,()=>{r(!0)}),e.get(LA).afterPreactivation=()=>(r(!0),a.closed?(0,Ct.of)(void 0):a),i.initialNavigation()}))}}]).\u0275providers:[]]}const iV=new p.OlP("");let pk=(()=>{class n{constructor(){this.messages=[]}add(t){this.messages.push(t)}clear(){this.messages=[]}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function cG(n,e){if(1&n&&(p.TgZ(0,"div"),p._uU(1),p.qZA()),2&n){const t=e.$implicit;p.xp6(1),p.hij(" ",t," ")}}function uG(n,e){if(1&n){const t=p.EpF();p.TgZ(0,"div")(1,"h2"),p._uU(2,"Messages"),p.qZA(),p.TgZ(3,"button",1),p.NdJ("click",function(){p.CHM(t);const i=p.oxw();return p.KtG(i.messageService.clear())}),p._uU(4,"Clear messages"),p.qZA(),p.YNc(5,cG,2,1,"div",2),p.qZA()}if(2&n){const t=p.oxw();p.xp6(5),p.Q6J("ngForOf",t.messageService.messages)}}let lG=(()=>{class n{constructor(t){this.messageService=t}static#e=this.\u0275fac=function(r){return new(r||n)(p.Y36(pk))};static#t=this.\u0275cmp=p.Xpm({type:n,selectors:[["app-messages"]],decls:1,vars:1,consts:[[4,"ngIf"],["type","button",1,"clear",3,"click"],[4,"ngFor","ngForOf"]],template:function(r,i){1&r&&p.YNc(0,uG,6,1,"div",0),2&r&&p.Q6J("ngIf",i.messageService.messages.length)},dependencies:[yo,zr]})}return n})(),dG=(()=>{class n{constructor(){this.title="angular-tour-of-heroes-luginbuv"}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=p.Xpm({type:n,selectors:[["app-root"]],decls:13,vars:1,consts:[["routerLink","/dashboard"],["routerLink","/heroes"],["routerLink","/weapons"]],template:function(r,i){1&r&&(p.TgZ(0,"h1"),p._uU(1),p.qZA(),p.TgZ(2,"h2"),p._uU(3,"Navigation"),p.qZA(),p.TgZ(4,"nav")(5,"a",0),p._uU(6,"Dashboard"),p.qZA(),p.TgZ(7,"a",1),p._uU(8,"Heroes"),p.qZA(),p.TgZ(9,"a",2),p._uU(10,"Weapons"),p.qZA()(),p._UZ(11,"router-outlet")(12,"app-messages")),2&r&&(p.xp6(1),p.Oqu(i.title))},dependencies:[ok,hy,lG]})}return n})(),oV=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static#e=this.\u0275fac=function(r){return new(r||n)(p.Y36(p.Qsj),p.Y36(p.SBq))};static#t=this.\u0275dir=p.lG2({type:n})}return n})(),wp=(()=>{class n extends oV{static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=p.n5z(n)))(i||n)}}();static#t=this.\u0275dir=p.lG2({type:n,features:[p.qOj]})}return n})();const Qa=new p.OlP("NgValueAccessor"),pG={provide:Qa,useExisting:(0,p.Gpc)(()=>zE),multi:!0},gG=new p.OlP("CompositionEventMode");let zE=(()=>{class n extends oV{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function mG(){const n=B()?B().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static#e=this.\u0275fac=function(r){return new(r||n)(p.Y36(p.Qsj),p.Y36(p.SBq),p.Y36(gG,8))};static#t=this.\u0275dir=p.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&p.NdJ("input",function(u){return i._handleInput(u.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(u){return i._compositionEnd(u.target.value)})},features:[p._Bn([pG]),p.qOj]})}return n})();function kd(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}const Ai=new p.OlP("NgValidators"),Od=new p.OlP("NgAsyncValidators");function UA(n){return null}function gV(n){return null!=n}function _V(n){return(0,p.QGY)(n)?(0,Ir.D)(n):n}function yV(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function vV(n,e){return e.map(t=>t(n))}function bV(n){return n.map(e=>function yG(n){return!n.validate}(e)?e:t=>e.validate(t))}function mk(n){return null!=n?function EV(n){if(!n)return null;const e=n.filter(gV);return 0==e.length?null:function(t){return yV(vV(t,e))}}(bV(n)):null}function gk(n){return null!=n?function wV(n){if(!n)return null;const e=n.filter(gV);return 0==e.length?null:function(t){return function hG(...n){const e=(0,IE.jO)(n),{args:t,keys:r}=KL(n),i=new pu.y(a=>{const{length:u}=t;if(!u)return void a.complete();const h=new Array(u);let m=u,_=u;for(let w=0;w<u;w++){let D=!1;(0,EA.Xf)(t[w]).subscribe((0,Lo.x)(a,S=>{D||(D=!0,_--),h[w]=S},()=>m--,void 0,()=>{(!m||!D)&&(_||a.next(r?YL(r,h):h),a.complete())}))}});return e?i.pipe(ZL(e)):i}(vV(t,e).map(_V)).pipe((0,rn.U)(yV))}}(bV(n)):null}function IV(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function DV(n){return n._rawValidators}function TV(n){return n._rawAsyncValidators}function _k(n){return n?Array.isArray(n)?n:[n]:[]}function BA(n,e){return Array.isArray(n)?n.includes(e):n===e}function CV(n,e){const t=_k(e);return _k(n).forEach(i=>{BA(t,i)||t.push(i)}),t}function AV(n,e){return _k(e).filter(t=>!BA(n,t))}class SV{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=mk(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=gk(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class qi extends SV{get formDirective(){return null}get path(){return null}}class Pd extends SV{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class xV{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let yk=(()=>{class n extends xV{constructor(t){super(t)}static#e=this.\u0275fac=function(r){return new(r||n)(p.Y36(Pd,2))};static#t=this.\u0275dir=p.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&p.ekj("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[p.qOj]})}return n})(),vk=(()=>{class n extends xV{constructor(t){super(t)}static#e=this.\u0275fac=function(r){return new(r||n)(p.Y36(qi,10))};static#t=this.\u0275dir=p.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){2&r&&p.ekj("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[p.qOj]})}return n})();const GE="VALID",$A="INVALID",fy="PENDING",qE="DISABLED";function wk(n){return(HA(n)?n.validators:n)||null}function Ik(n,e){return(HA(e)?e.asyncValidators:n)||null}function HA(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class kV{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===GE}get invalid(){return this.status===$A}get pending(){return this.status==fy}get disabled(){return this.status===qE}get enabled(){return this.status!==qE}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(CV(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(CV(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(AV(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(AV(e,this._rawAsyncValidators))}hasValidator(e){return BA(this._rawValidators,e)}hasAsyncValidator(e){return BA(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=fy,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=qE,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=GE,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===GE||this.status===fy)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?qE:GE}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=fy,this._hasOwnPendingAsyncValidator=!0;const t=_V(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new p.vpe,this.statusChanges=new p.vpe}_calculateStatus(){return this._allControlsDisabled()?qE:this.errors?$A:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(fy)?fy:this._anyControlsHaveStatus($A)?$A:GE}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){HA(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function wG(n){return Array.isArray(n)?mk(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function IG(n){return Array.isArray(n)?gk(n):n||null}(this._rawAsyncValidators)}}class WE extends kV{constructor(e,t,r){super(wk(t),Ik(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function NV(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new p.vHH(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function RV(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new p.vHH(1e3,"");if(!r[t])throw new p.vHH(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,a)=>{r=t(r,i,a)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const Ip=new p.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>KE}),KE="always";function ZE(n,e,t=KE){Dk(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function CG(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&OV(n,e)})}(n,e),function SG(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function AG(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&OV(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function TG(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function GA(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),WA(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function qA(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Dk(n,e){const t=DV(n);null!==e.validator?n.setValidators(IV(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=TV(n);null!==e.asyncValidator?n.setAsyncValidators(IV(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();qA(e._rawValidators,i),qA(e._rawAsyncValidators,i)}function WA(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=DV(n);if(Array.isArray(i)&&i.length>0){const a=i.filter(u=>u!==e.validator);a.length!==i.length&&(t=!0,n.setValidators(a))}}if(null!==e.asyncValidator){const i=TV(n);if(Array.isArray(i)&&i.length>0){const a=i.filter(u=>u!==e.asyncValidator);a.length!==i.length&&(t=!0,n.setAsyncValidators(a))}}}const r=()=>{};return qA(e._rawValidators,r),qA(e._rawAsyncValidators,r),t}function OV(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function LV(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function VV(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const us=class extends kV{constructor(e=null,t,r){super(wk(t),Ik(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),HA(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=VV(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){LV(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){LV(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){VV(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};let xk=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=p.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return n})();const LG={provide:Qa,useExisting:(0,p.Gpc)(()=>KA),multi:!0};let KA=(()=>{class n extends wp{writeValue(t){this.setProperty("value",t??"")}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=p.n5z(n)))(i||n)}}();static#t=this.\u0275dir=p.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){1&r&&p.NdJ("input",function(u){return i.onChange(u.target.value)})("blur",function(){return i.onTouched()})},features:[p._Bn([LG]),p.qOj]})}return n})(),HV=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=p.oAB({type:n});static#n=this.\u0275inj=p.cJS({})}return n})();const Mk=new p.OlP("NgModelWithFormControlWarning"),$G={provide:qi,useExisting:(0,p.Gpc)(()=>QE)};let QE=(()=>{class n extends qi{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new p.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(WA(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return ZE(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){GA(t.control||null,t,!1),function NG(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function FV(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(GA(r||null,t),(n=>n instanceof us)(i)&&(ZE(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function PV(n,e){Dk(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function xG(n,e){return WA(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Dk(this.form,this),this._oldForm&&WA(this._oldForm,this)}_checkFormPresent(){}static#e=this.\u0275fac=function(r){return new(r||n)(p.Y36(Ai,10),p.Y36(Od,10),p.Y36(Ip,8))};static#t=this.\u0275dir=p.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){1&r&&p.NdJ("submit",function(u){return i.onSubmit(u)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[p._Bn([$G]),p.qOj,p.TTD]})}return n})();const GG={provide:Pd,useExisting:(0,p.Gpc)(()=>ZA)};let ZA=(()=>{class n extends Pd{set isDisabled(t){}static#e=this._ngModelWarningSentOnce=!1;constructor(t,r,i,a,u){super(),this._ngModelWarningConfig=u,this._added=!1,this.name=null,this.update=new p.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function Ak(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(a=>{a.constructor===zE?t=a:function RG(n){return Object.getPrototypeOf(n.constructor)===wp}(a)?r=a:i=a}),i||r||t||null}(0,a)}ngOnChanges(t){this._added||this._setUpControl(),function Ck(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function zA(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static#t=this.\u0275fac=function(r){return new(r||n)(p.Y36(qi,13),p.Y36(Ai,10),p.Y36(Od,10),p.Y36(Qa,10),p.Y36(Mk,8))};static#n=this.\u0275dir=p.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[p._Bn([GG]),p.qOj,p.TTD]})}return n})();const qG={provide:Qa,useExisting:(0,p.Gpc)(()=>YA),multi:!0};function KV(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let YA=(()=>{class n extends wp{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const i=KV(this._getOptionId(t),t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function WG(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=p.n5z(n)))(i||n)}}();static#t=this.\u0275dir=p.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){1&r&&p.NdJ("change",function(u){return i.onChange(u.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[p._Bn([qG]),p.qOj]})}return n})(),ZV=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(KV(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(r){return new(r||n)(p.Y36(p.SBq),p.Y36(p.Qsj),p.Y36(YA,9))};static#t=this.\u0275dir=p.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return n})();const KG={provide:Qa,useExisting:(0,p.Gpc)(()=>kk),multi:!0};function YV(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let kk=(()=>{class n extends wp{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const i=t.map(a=>this._getOptionId(a));r=(a,u)=>{a._setSelected(i.indexOf(u.toString())>-1)}}else r=(i,a)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const i=[],a=r.selectedOptions;if(void 0!==a){const u=a;for(let h=0;h<u.length;h++){const _=this._getOptionValue(u[h].value);i.push(_)}}else{const u=r.options;for(let h=0;h<u.length;h++){const m=u[h];if(m.selected){const _=this._getOptionValue(m.value);i.push(_)}}}this.value=i,t(i)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function ZG(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=p.n5z(n)))(i||n)}}();static#t=this.\u0275dir=p.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){1&r&&p.NdJ("change",function(u){return i.onChange(u.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[p._Bn([KG]),p.qOj]})}return n})(),QV=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(YV(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(YV(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(r){return new(r||n)(p.Y36(p.SBq),p.Y36(p.Qsj),p.Y36(kk,9))};static#t=this.\u0275dir=p.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return n})();function JV(n){return"number"==typeof n?n:parseFloat(n)}let Dp=(()=>{class n{constructor(){this._validator=UA}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):UA,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=p.lG2({type:n,features:[p.TTD]})}return n})();const YG={provide:Ai,useExisting:(0,p.Gpc)(()=>QA),multi:!0};let QA=(()=>{class n extends Dp{constructor(){super(...arguments),this.inputName="max",this.normalizeInput=t=>JV(t),this.createValidator=t=>function uV(n){return e=>{if(kd(e.value)||kd(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(t)}static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=p.n5z(n)))(i||n)}}();static#t=this.\u0275dir=p.lG2({type:n,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(r,i){2&r&&p.uIk("max",i._enabled?i.max:null)},inputs:{max:"max"},features:[p._Bn([YG]),p.qOj]})}return n})();const QG={provide:Ai,useExisting:(0,p.Gpc)(()=>XA),multi:!0};let XA=(()=>{class n extends Dp{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=t=>JV(t),this.createValidator=t=>function cV(n){return e=>{if(kd(e.value)||kd(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(t)}static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=p.n5z(n)))(i||n)}}();static#t=this.\u0275dir=p.lG2({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(r,i){2&r&&p.uIk("min",i._enabled?i.min:null)},inputs:{min:"min"},features:[p._Bn([QG]),p.qOj]})}return n})(),oU=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=p.oAB({type:n});static#n=this.\u0275inj=p.cJS({imports:[HV]})}return n})(),o6=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Ip,useValue:t.callSetDisabledState??KE}]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=p.oAB({type:n});static#n=this.\u0275inj=p.cJS({imports:[oU]})}return n})(),s6=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Mk,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Ip,useValue:t.callSetDisabledState??KE}]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=p.oAB({type:n});static#n=this.\u0275inj=p.cJS({imports:[oU]})}return n})();var a6=R(305);function sU(n,e){const t="object"==typeof e;return new Promise((r,i)=>{const a=new a6.Hp({next:u=>{r(u),a.unsubscribe()},error:i,complete:()=>{t?r(e.defaultValue):i(new DE)}});n.subscribe(a)})}let Pk=(()=>{class n{static#e=this.url="heroes";constructor(t,r){this.firestore=t,this.messageService=r,this.heroes=[]}getHeroes(){const t=iL(this.firestore,n.url);return this.messageService.add("Heroes loaded!"),nL(t,{idField:"id"})}getHero(t){var r=this;return(0,ne.Z)(function*(){const i=J_(r.firestore,n.url+"/"+t);return r.messageService.add("Hero "+t+" loaded!"),sU(rL(i,{idField:"id"}))})()}updateHero(t,r){const i=J_(this.firestore,n.url+"/"+t);return this.messageService.add("Hero update!"),sL(i,r)}deleteHero(t){const r=J_(this.firestore,n.url+"/"+t);return this.messageService.add("Hero delete!"),oL(r)}static#t=this.\u0275fac=function(r){return new(r||n)(p.LFG(yE),p.LFG(pk))};static#n=this.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function c6(n,e){if(1&n&&(p.TgZ(0,"a",1),p._uU(1),p.qZA()),2&n){const t=e.$implicit;p.MGl("routerLink","/hero/detail/",t.id,""),p.xp6(1),p.hij(" ",t.name,"\n")}}let u6=(()=>{class n{constructor(t){this.heroService=t,this.heroes=[],this.heroService.getHeroes().subscribe(r=>this.heroes=r)}static#e=this.\u0275fac=function(r){return new(r||n)(p.Y36(Pk))};static#t=this.\u0275cmp=p.Xpm({type:n,selectors:[["app-heroes"]],decls:1,vars:1,consts:[[3,"routerLink",4,"ngFor","ngForOf"],[3,"routerLink"]],template:function(r,i){1&r&&p.YNc(0,c6,2,2,"a",0),2&r&&p.Q6J("ngForOf",i.heroes)},dependencies:[yo,hy]})}return n})(),l6=(()=>{class n{constructor(t){this.heroService=t,this.heroes=[]}ngOnInit(){}static#e=this.\u0275fac=function(r){return new(r||n)(p.Y36(Pk))};static#t=this.\u0275cmp=p.Xpm({type:n,selectors:[["app-dashboard"]],decls:0,vars:0,template:function(r,i){}})}return n})(),Fk=(()=>{class n{static#e=this.url="weapons";constructor(t,r){this.firestore=t,this.messageService=r,this.weapons=[]}getWeapons(){const t=iL(this.firestore,n.url);return this.messageService.add("Weapons loaded!"),nL(t,{idField:"id"})}getWeapon(t){var r=this;return(0,ne.Z)(function*(){const i=J_(r.firestore,n.url+"/"+t);return r.messageService.add("Weapon "+t+" loaded!"),sU(rL(i,{idField:"id"}))})()}updateWeapon(t,r){const i=J_(this.firestore,n.url+"/"+t);return this.messageService.add("Weapon update!"),sL(i,r)}deleteWeapon(t){const r=J_(this.firestore,n.url+"/"+t);return this.messageService.add("Weapon delete!"),oL(r)}static#t=this.\u0275fac=function(r){return new(r||n)(p.LFG(yE),p.LFG(pk))};static#n=this.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function d6(n,e){if(1&n&&p._UZ(0,"img",21),2&n){const t=p.oxw(2);p.Q6J("src",t.imageDataUrl.toString(),p.LSH)}}function h6(n,e){if(1&n&&(p.TgZ(0,"option",22),p._uU(1),p.qZA()),2&n){const t=e.$implicit;p.Q6J("value",t.id),p.xp6(1),p.Oqu(t.name)}}function f6(n,e){if(1&n){const t=p.EpF();p.TgZ(0,"div")(1,"h2"),p._uU(2),p.qZA(),p.TgZ(3,"form",2)(4,"label",3),p._uU(5,"Picture: "),p.qZA(),p.TgZ(6,"input",4),p.NdJ("change",function(i){p.CHM(t);const a=p.oxw();return p.KtG(a.onFileSelected(i))}),p.qZA(),p.YNc(7,d6,1,1,"img",5),p._UZ(8,"input",6),p.TgZ(9,"label",7),p._uU(10,"Name: "),p.qZA(),p._UZ(11,"input",8),p.TgZ(12,"label",7),p._uU(13,"Health: "),p.qZA(),p.TgZ(14,"input",9),p.NdJ("click",function(){p.CHM(t);const i=p.oxw();return p.KtG(i.enableForm())}),p.qZA(),p.TgZ(15,"label",10),p._uU(16,"Attack: "),p.qZA(),p.TgZ(17,"input",11),p.NdJ("click",function(){p.CHM(t);const i=p.oxw();return p.KtG(i.enableForm())}),p.qZA(),p.TgZ(18,"label",12),p._uU(19,"Defense: "),p.qZA(),p.TgZ(20,"input",13),p.NdJ("click",function(){p.CHM(t);const i=p.oxw();return p.KtG(i.enableForm())}),p.qZA(),p.TgZ(21,"label",14),p._uU(22,"Dash: "),p.qZA(),p.TgZ(23,"input",15),p.NdJ("click",function(){p.CHM(t);const i=p.oxw();return p.KtG(i.enableForm())}),p.qZA(),p.TgZ(24,"label",16),p._uU(25,"Choose a weapon:"),p.qZA(),p.TgZ(26,"select",17),p.YNc(27,h6,2,2,"option",18),p.qZA()(),p.TgZ(28,"p"),p._uU(29),p.qZA(),p.TgZ(30,"button",19),p.NdJ("click",function(){p.CHM(t);const i=p.oxw();return p.KtG(i.updateHero())}),p._uU(31,"Save"),p.qZA(),p.TgZ(32,"button",20),p.NdJ("click",function(){p.CHM(t);const i=p.oxw();return p.KtG(i.deleteHero())}),p._uU(33,"Delete"),p.qZA()()}if(2&n){const t=p.oxw();p.xp6(2),p.AsE("",t.hero.name," ",t.hero.id,""),p.xp6(1),p.Q6J("formGroup",t.skillsForms),p.xp6(4),p.Q6J("ngIf",t.imageDataUrl),p.xp6(20),p.Q6J("ngForOf",t.weapons),p.xp6(2),p.hij("Experience left: ",t.experience,""),p.xp6(1),p.Q6J("disabled",t.enableForm())}}let p6=(()=>{class n{constructor(t,r,i,a,u){this.storage=t,this.location=r,this.heroService=i,this.route=a,this.weaponService=u,this.weapons=[],this.experience=0,this.imageDataUrl=null,this.skillsForms=new WE({name:new us(""),attack:new us(""),health:new us(""),dash:new us(""),defense:new us(""),image:new us("")}),this.getHero(),this.weaponService.getWeapons().subscribe(h=>this.weapons=h)}goBack(){this.location.back()}enableForm(){return null!=this.hero&&(this.hero.name=this.skillsForms.value.name,this.hero.attack=this.skillsForms.value.attack,this.hero.health=this.skillsForms.value.health,this.hero.dash=this.skillsForms.value.dash,this.hero.defense=this.skillsForms.value.defense,this.experience=this.hero.experience-this.hero.attack-this.hero.health-this.hero.dash-this.hero.defense),!(0==this.experience&&""!=this.hero?.name&&null!=this.imageDataUrl)}onFileSelected(t){const r=new FileReader;r.onload=i=>{this.imageDataUrl=i.target?.result,this.skillsForms.patchValue({image:t.target.files[0]})},r.readAsDataURL(t.target.files[0])}getHero(){var t=this;return(0,ne.Z)(function*(){const r=String(t.route.snapshot.paramMap.get("id"));try{const i=yield t.heroService.getHero(r);t.hero=i,t.skillsForms.patchValue({name:t.hero.name,attack:t.hero.attack,health:t.hero.health,dash:t.hero.dash,defense:t.hero.defense,image:t.hero.image}),t.experience=t.hero.experience,t.imageDataUrl=t.hero.image||null}catch(i){console.error(i)}})()}updateHero(){const t=String(this.route.snapshot.paramMap.get("id")),r={name:this.skillsForms.value.name||"",attack:this.skillsForms.value.attack||0,health:this.skillsForms.value.health||0,dash:this.skillsForms.value.dash||0,defense:this.skillsForms.value.defense||0,image:this.skillsForms.value.image||""},i=`heroes/${t}/image.jpg`,a=this.storage.ref(i);this.storage.upload(i,this.skillsForms.value.image).snapshotChanges().pipe(SE(()=>{a.getDownloadURL().subscribe(u=>{r.image=u,this.heroService.updateHero(t,r)})})).subscribe()}deleteHero(){const t=String(this.route.snapshot.paramMap.get("id"));this.heroService.deleteHero(t).then(()=>{this.goBack()}).catch(r=>{console.error(r)})}static#e=this.\u0275fac=function(r){return new(r||n)(p.Y36(H1),p.Y36(ze),p.Y36(Pk),p.Y36(Nd),p.Y36(Fk))};static#t=this.\u0275cmp=p.Xpm({type:n,selectors:[["app-hero-detail"]],decls:3,vars:1,consts:[["type","button",3,"click"],[4,"ngIf"],[2,"display","flex","flex-direction","column","width","200px",3,"formGroup"],["for","image"],["type","file",3,"change"],["alt","Selected Image",3,"src",4,"ngIf"],["id","image","type","hidden","formControlName","image"],["for","name"],["id","name","type","text","formControlName","name"],["id","name","type","number","formControlName","health","max","37","min","1",3,"click"],["for","first-name"],["id","first-name","type","number","formControlName","attack","max","37","min","1",3,"click"],["for","last-name"],["id","last-name","type","number","formControlName","defense","max","37","min","1",3,"click"],["for","email"],["id","email","type","number","formControlName","dash","max","37","min","1",3,"click"],["for","heroSelector"],["id","heroSelector","formControlName","selectedHero"],[3,"value",4,"ngFor","ngForOf"],["type","submit",3,"disabled","click"],["type","submit",3,"click"],["alt","Selected Image",3,"src"],[3,"value"]],template:function(r,i){1&r&&(p.TgZ(0,"button",0),p.NdJ("click",function(){return i.goBack()}),p._uU(1,"go back"),p.qZA(),p.YNc(2,f6,34,7,"div",1)),2&r&&(p.xp6(2),p.Q6J("ngIf",i.hero))},dependencies:[yo,zr,xk,ZV,QV,zE,KA,YA,yk,vk,XA,QA,QE,ZA]})}return n})();function m6(n,e){if(1&n&&(p.TgZ(0,"a",1),p._uU(1),p.qZA()),2&n){const t=e.$implicit;p.MGl("routerLink","/weapon/detail/",t.id,""),p.xp6(1),p.hij(" ",t.name,"\n")}}let g6=(()=>{class n{constructor(t){this.weaponService=t,this.weapons=[],this.weaponService.getWeapons().subscribe(r=>this.weapons=r)}static#e=this.\u0275fac=function(r){return new(r||n)(p.Y36(Fk))};static#t=this.\u0275cmp=p.Xpm({type:n,selectors:[["app-weapons"]],decls:1,vars:1,consts:[[3,"routerLink",4,"ngFor","ngForOf"],[3,"routerLink"]],template:function(r,i){1&r&&p.YNc(0,m6,2,2,"a",0),2&r&&p.Q6J("ngForOf",i.weapons)},dependencies:[yo,hy]})}return n})();function _6(n,e){if(1&n&&p._UZ(0,"img",14),2&n){const t=p.oxw(2);p.Q6J("src",t.imageDataUrl.toString(),p.LSH)}}function y6(n,e){if(1&n){const t=p.EpF();p.TgZ(0,"div")(1,"h2"),p._uU(2),p.qZA(),p.TgZ(3,"form",2)(4,"label",3),p._uU(5,"Picture: "),p.qZA(),p.TgZ(6,"input",4),p.NdJ("change",function(i){p.CHM(t);const a=p.oxw();return p.KtG(a.onFileSelected(i))}),p.qZA(),p.YNc(7,_6,1,1,"img",5),p._UZ(8,"input",6),p.TgZ(9,"label",7),p._uU(10,"Name: "),p.qZA(),p._UZ(11,"input",8),p.TgZ(12,"label",9),p._uU(13,"Damage: "),p.qZA(),p.TgZ(14,"input",10),p.NdJ("change",function(){p.CHM(t);const i=p.oxw();return p.KtG(i.enableForm())}),p.qZA(),p.TgZ(15,"label",9),p._uU(16,"Knockback: "),p.qZA(),p.TgZ(17,"input",11),p.NdJ("change",function(){p.CHM(t);const i=p.oxw();return p.KtG(i.enableForm())}),p.qZA()(),p.TgZ(18,"p"),p._uU(19),p.qZA(),p.TgZ(20,"button",12),p.NdJ("click",function(){p.CHM(t);const i=p.oxw();return p.KtG(i.updateWeapon())}),p._uU(21,"Save"),p.qZA(),p.TgZ(22,"button",13),p.NdJ("click",function(){p.CHM(t);const i=p.oxw();return p.KtG(i.deleteWeapon())}),p._uU(23,"Delete"),p.qZA()()}if(2&n){const t=p.oxw();p.xp6(2),p.AsE("",t.weapon.name," ",t.weapon.id,""),p.xp6(1),p.Q6J("formGroup",t.skillsForms),p.xp6(4),p.Q6J("ngIf",t.imageDataUrl),p.xp6(12),p.hij("Experience left: ",t.experience,""),p.xp6(1),p.Q6J("disabled",t.enableForm())}}const v6=[{path:"",redirectTo:"/dashboard",pathMatch:"full"},{path:"dashboard",component:l6},{path:"hero/detail/:id",component:p6},{path:"heroes",component:u6},{path:"weapons",component:g6},{path:"weapon/detail/:id",component:(()=>{class n{constructor(t,r,i,a){this.storage=t,this.location=r,this.weaponService=i,this.route=a,this.experience=0,this.imageDataUrl=null,this.skillsForms=new WE({name:new us(""),damage:new us(""),knockback:new us(""),image:new us("")}),this.getWeapon()}goBack(){this.location.back()}enableForm(){return this.experience=-this.skillsForms.value.damage-this.skillsForms.value.knockback,this.experience!==this.weapon?.experience}onFileSelected(t){const r=new FileReader;r.onload=i=>{this.imageDataUrl=i.target?.result,this.skillsForms.patchValue({image:t.target.files[0]})},r.readAsDataURL(t.target.files[0])}getWeapon(){var t=this;return(0,ne.Z)(function*(){const r=String(t.route.snapshot.paramMap.get("id"));try{const i=yield t.weaponService.getWeapon(r);t.weapon=i,t.skillsForms.patchValue({name:t.weapon.name,damage:t.weapon.damage,knockback:t.weapon.knockback,image:t.weapon.image}),t.experience=t.weapon.experience,t.imageDataUrl=t.weapon.image||null}catch(i){console.error(i)}})()}updateWeapon(){const t=String(this.route.snapshot.paramMap.get("id")),r={name:this.skillsForms.value.name||"",damage:this.skillsForms.value.damage||0,knockback:this.skillsForms.value.knockback||0,image:this.skillsForms.value.image||""},i=`weapons/${t}/image.jpg`,a=this.storage.ref(i);this.storage.upload(i,this.skillsForms.value.image).snapshotChanges().pipe(SE(()=>{a.getDownloadURL().subscribe(u=>{r.image=u,this.weaponService.updateWeapon(t,r)})})).subscribe()}deleteWeapon(){const t=String(this.route.snapshot.paramMap.get("id"));this.weaponService.deleteWeapon(t).then(()=>{this.goBack()}).catch(r=>{console.error(r)})}static#e=this.\u0275fac=function(r){return new(r||n)(p.Y36(H1),p.Y36(ze),p.Y36(Fk),p.Y36(Nd))};static#t=this.\u0275cmp=p.Xpm({type:n,selectors:[["app-weapon-detail"]],decls:3,vars:1,consts:[["type","button",3,"click"],[4,"ngIf"],[2,"display","flex","flex-direction","column","width","200px",3,"formGroup"],["for","image"],["type","file",3,"change"],["alt","Selected Image",3,"src",4,"ngIf"],["id","image","type","hidden","formControlName","image"],["for","name"],["id","name","type","text","formControlName","name"],["for","first-name"],["id","first-name","type","number","formControlName","damage","max","5","min","-5",3,"change"],["id","first-name","type","number","formControlName","knockback","max","5","min","-5",3,"change"],["type","submit",3,"disabled","click"],["type","submit",3,"click"],["alt","Selected Image",3,"src"]],template:function(r,i){1&r&&(p.TgZ(0,"button",0),p.NdJ("click",function(){return i.goBack()}),p._uU(1,"go back"),p.qZA(),p.YNc(2,y6,24,6,"div",1)),2&r&&(p.xp6(2),p.Q6J("ngIf",i.weapon))},dependencies:[zr,xk,zE,KA,yk,vk,XA,QA,QE,ZA]})}return n})()}];let Lk,b6=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=p.oAB({type:n});static#n=this.\u0275inj=p.cJS({imports:[rV.forRoot(v6),rV]})}return n})();try{Lk=typeof Intl<"u"&&Intl.v8BreakIterator}catch{Lk=!1}let XE,aU=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function Tt(n){return n===jp}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!Lk)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static#e=this.\u0275fac=function(r){return new(r||n)(p.LFG(p.Lbi))};static#t=this.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function JA(n){return function E6(){if(null==XE&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>XE=!0}))}finally{XE=XE||!1}return XE}()?n:!!n.capture}function uU(n){return Array.isArray(n)?n:[n]}const dU=new Set;let Cp,N6=(()=>{class n{constructor(t,r){this._platform=t,this._nonce=r,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):O6}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function k6(n,e){if(!dU.has(n))try{Cp||(Cp=document.createElement("style"),e&&(Cp.nonce=e),Cp.setAttribute("type","text/css"),document.head.appendChild(Cp)),Cp.sheet&&(Cp.sheet.insertRule(`@media ${n} {body{ }}`,0),dU.add(n))}catch(t){console.error(t)}}(t,this._nonce),this._matchMedia(t)}static#e=this.\u0275fac=function(r){return new(r||n)(p.LFG(aU),p.LFG(p.Ojb,8))};static#t=this.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function O6(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let P6=(()=>{class n{constructor(t,r){this._mediaMatcher=t,this._zone=r,this._queries=new Map,this._destroySubject=new xd.x}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return hU(uU(t)).some(i=>this._registerQuery(i).mql.matches)}observe(t){let a=vA(hU(uU(t)).map(u=>this._registerQuery(u).observable));return a=bA(a.pipe(_p(1)),a.pipe(function R6(n){return _u((e,t)=>n<=t)}(1),aL(0))),a.pipe((0,rn.U)(u=>{const h={matches:!1,breakpoints:{}};return u.forEach(({matches:m,query:_})=>{h.matches=h.matches||m,h.breakpoints[_]=m}),h}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const r=this._mediaMatcher.matchMedia(t),a={observable:new pu.y(u=>{const h=m=>this._zone.run(()=>u.next(m));return r.addListener(h),()=>{r.removeListener(h)}}).pipe(e2(r),(0,rn.U)(({matches:u})=>({query:t,matches:u})),n2(this._destroySubject)),mql:r};return this._queries.set(t,a),a}static#e=this.\u0275fac=function(r){return new(r||n)(p.LFG(N6),p.LFG(p.R0b))};static#t=this.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function hU(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}const gU="cdk-high-contrast-black-on-white",_U="cdk-high-contrast-white-on-black",Uk="cdk-high-contrast-active";let q6=(()=>{class n{constructor(t,r){this._platform=t,this._document=r,this._breakpointSubscription=(0,p.f3M)(P6).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(t):null,a=(i&&i.backgroundColor||"").replace(/ /g,"");switch(t.remove(),a){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(Uk,gU,_U),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?t.add(Uk,gU):2===r&&t.add(Uk,_U)}}static#e=this.\u0275fac=function(r){return new(r||n)(p.LFG(aU),p.LFG(de))};static#t=this.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),yU=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=p.oAB({type:n});static#n=this.\u0275inj=p.cJS({})}return n})();const Y6=new p.OlP("mat-sanity-checks",{providedIn:"root",factory:function Z6(){return!0}});let tS=(()=>{class n{constructor(t,r,i){this._sanityChecks=r,this._document=i,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!function D6(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}static#e=this.\u0275fac=function(r){return new(r||n)(p.LFG(q6),p.LFG(Y6,8),p.LFG(de))};static#t=this.\u0275mod=p.oAB({type:n});static#n=this.\u0275inj=p.cJS({imports:[yU,yU]})}return n})();const EU=JA({passive:!0,capture:!0});class J6{constructor(){this._events=new Map,this._delegateEventHandler=e=>{const t=function I6(n){return n.composedPath?n.composedPath()[0]:n.target}(e);t&&this._events.get(e.type)?.forEach((r,i)=>{(i===t||i.contains(t))&&r.forEach(a=>a.handleEvent(e))})}}addHandler(e,t,r,i){const a=this._events.get(t);if(a){const u=a.get(r);u?u.add(i):a.set(r,new Set([i]))}else this._events.set(t,new Map([[r,new Set([i])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,EU)})}removeHandler(e,t,r){const i=this._events.get(e);if(!i)return;const a=i.get(t);a&&(a.delete(r),0===a.size&&i.delete(t),0===i.size&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,EU)))}}class Bk{static#e=this._eventManager=new J6;constructor(e,t,r,i){this._target=e,this._ngZone=t,this._platform=i,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=lU(r))}fadeInRipple(e,t,r={}){const i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),a={...wU,...r.animation},u=r.radius||function t5(n,e,t){const r=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),i=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(r*r+i*i)}(e,t,i),h=e-i.left,m=t-i.top,_=a.enterDuration,w=document.createElement("div");w.classList.add("mat-ripple-element"),w.style.left=h-u+"px",w.style.top=m-u+"px",w.style.height=2*u+"px",w.style.width=2*u+"px",null!=r.color&&(w.style.backgroundColor=r.color),w.style.transitionDuration=`${_}ms`,this._containerElement.appendChild(w);const D=window.getComputedStyle(w),N=D.transitionDuration,U="none"===D.transitionProperty||"0s"===N||"0s, 0s"===N||0===i.width&&0===i.height,W=new X6(this,w,r,U);w.style.transform="scale3d(1, 1, 1)",W.state=0,r.persistent||(this._mostRecentTransientRipple=W);return!U&&(_||a.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const Re=()=>this._finishRippleTransition(W),Be=()=>this._destroyRipple(W);w.addEventListener("transitionend",Re),w.addEventListener("transitioncancel",Be)}),this._activeRipples.set(W,null),(U||!_)&&this._finishRippleTransition(W),W}fadeOutRipple(e){if(2===e.state||3===e.state)return;const t=e.element,r={...wU,...e.config.animation};t.style.transitionDuration=`${r.exitDuration}ms`,t.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!r.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=lU(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,DU.forEach(r=>{Bk._eventManager.addHandler(this._ngZone,r,t,this)}))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{TU.forEach(t=>{this._triggerElement.addEventListener(t,this,IU)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){0===e.state?this._startFadeOutTransition(e):2===e.state&&this._destroyRipple(e)}_startFadeOutTransition(e){const t=e===this._mostRecentTransientRipple,{persistent:r}=e.config;e.state=1,!r&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,null!==t&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel)),e.element.remove()}_onMousedown(e){const t=function H6(n){return 0===n.buttons||0===n.detail}(e),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!r&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!function z6(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;if(t)for(let r=0;r<t.length;r++)this.fadeInRipple(t[r].clientX,t[r].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const e=this._triggerElement;e&&(DU.forEach(t=>Bk._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&TU.forEach(t=>e.removeEventListener(t,this,IU)))}}let n5=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=p.oAB({type:n});static#n=this.\u0275inj=p.cJS({imports:[tS,tS]})}return n})(),o5=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=p.oAB({type:n});static#n=this.\u0275inj=p.cJS({imports:[tS,n5,tS]})}return n})();class CU{}class s5{}const bu="*";function AU(n,e=null){return{type:2,steps:n,options:e}}function SU(n){return{type:6,styles:n,offset:null}}class ew{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class xU{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const a=this.players.length;0==a?queueMicrotask(()=>this._onFinish()):this.players.forEach(u=>{u.onDone(()=>{++t==a&&this._onFinish()}),u.onDestroy(()=>{++r==a&&this._onDestroy()}),u.onStart(()=>{++i==a&&this._onStart()})}),this.totalTime=this.players.reduce((u,h)=>Math.max(u,h.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}function MU(n){return new p.vHH(3e3,!1)}function Fd(n){switch(n.length){case 0:return new ew;case 1:return n[0];default:return new xU(n)}}function RU(n,e,t=new Map,r=new Map){const i=[],a=[];let u=-1,h=null;if(e.forEach(m=>{const _=m.get("offset"),w=_==u,D=w&&h||new Map;m.forEach((S,N)=>{let U=N,W=S;if("offset"!==N)switch(U=n.normalizePropertyName(U,i),W){case"!":W=t.get(N);break;case bu:W=r.get(N);break;default:W=n.normalizeStyleValue(N,U,W,i)}D.set(U,W)}),w||a.push(D),h=D,u=_}),i.length)throw function x5(n){return new p.vHH(3502,!1)}();return a}function $k(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&Hk(t,"start",n)));break;case"done":n.onDone(()=>r(t&&Hk(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&Hk(t,"destroy",n)))}}function Hk(n,e,t){const a=zk(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),u=n._data;return null!=u&&(a._data=u),a}function zk(n,e,t,r,i="",a=0,u){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:a,disabled:!!u}}function Uo(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function NU(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}const j5=(()=>typeof document>"u"?null:document.documentElement)();function Gk(n){const e=n.parentNode||n.host||null;return e===j5?null:e}let Ap=null,kU=!1;function OU(n,e){for(;e;){if(e===n)return!0;e=Gk(e)}return!1}function PU(n,e,t){if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]}let FU=(()=>{class n{validateStyleProperty(t){return function H5(n){Ap||(Ap=function z5(){return typeof document<"u"?document.body:null}()||{},kU=!!Ap.style&&"WebkitAppearance"in Ap.style);let e=!0;return Ap.style&&!function $5(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Ap.style,!e&&kU&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Ap.style)),e}(t)}matchesElement(t,r){return!1}containsElement(t,r){return OU(t,r)}getParentElement(t){return Gk(t)}query(t,r,i){return PU(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,a,u,h=[],m){return new ew(i,a)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac})}return n})(),qk=(()=>{class n{static#e=this.NOOP=new FU}return n})();const G5=1e3,Wk="ng-enter",nS="ng-leave",rS="ng-trigger",iS=".ng-trigger",VU="ng-animating",Kk=".ng-animating";function Eu(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:Zk(parseFloat(e[1]),e[2])}function Zk(n,e){return"s"===e?n*G5:n}function oS(n,e,t){return n.hasOwnProperty("duration")?n:function W5(n,e,t){let i,a=0,u="";if("string"==typeof n){const h=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===h)return e.push(MU()),{duration:0,delay:0,easing:""};i=Zk(parseFloat(h[1]),h[2]);const m=h[3];null!=m&&(a=Zk(parseFloat(m),h[4]));const _=h[5];_&&(u=_)}else i=n;if(!t){let h=!1,m=e.length;i<0&&(e.push(function a5(){return new p.vHH(3100,!1)}()),h=!0),a<0&&(e.push(function c5(){return new p.vHH(3101,!1)}()),h=!0),h&&e.splice(m,0,MU())}return{duration:i,delay:a,easing:u}}(n,e,t)}function tw(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function UU(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function Ld(n,e=new Map,t){if(t)for(let[r,i]of t)e.set(r,i);for(let[r,i]of n)e.set(r,i);return e}function Xa(n,e,t){e.forEach((r,i)=>{const a=Qk(i);t&&!t.has(i)&&t.set(i,n.style[a]),n.style[a]=r})}function Sp(n,e){e.forEach((t,r)=>{const i=Qk(r);n.style[i]=""})}function nw(n){return Array.isArray(n)?1==n.length?n[0]:AU(n):n}const Yk=new RegExp("{{\\s*(.+?)\\s*}}","g");function jU(n){let e=[];if("string"==typeof n){let t;for(;t=Yk.exec(n);)e.push(t[1]);Yk.lastIndex=0}return e}function rw(n,e,t){const r=n.toString(),i=r.replace(Yk,(a,u)=>{let h=e[u];return null==h&&(t.push(function l5(n){return new p.vHH(3003,!1)}()),h=""),h.toString()});return i==r?n:i}function sS(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const Y5=/-+([a-z0-9])/g;function Qk(n){return n.replace(Y5,(...e)=>e[1].toUpperCase())}function Bo(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function d5(n){return new p.vHH(3004,!1)}()}}function $U(n,e){return window.getComputedStyle(n)[e]}const aS="*";function J5(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function eq(n,e,t){if(":"==n[0]){const m=function tq(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function T5(n){return new p.vHH(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof m)return void e.push(m);n=m}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function D5(n){return new p.vHH(3015,!1)}()),e;const i=r[1],a=r[2],u=r[3];e.push(HU(i,u));"<"==a[0]&&!(i==aS&&u==aS)&&e.push(HU(u,i))}(r,t,e)):t.push(n),t}const cS=new Set(["true","1"]),uS=new Set(["false","0"]);function HU(n,e){const t=cS.has(n)||uS.has(n),r=cS.has(e)||uS.has(e);return(i,a)=>{let u=n==aS||n==i,h=e==aS||e==a;return!u&&t&&"boolean"==typeof i&&(u=i?cS.has(n):uS.has(n)),!h&&r&&"boolean"==typeof a&&(h=a?cS.has(e):uS.has(e)),u&&h}}const nq=new RegExp("s*:selfs*,?","g");function Xk(n,e,t,r){return new rq(n).build(e,t,r)}class rq{constructor(e){this._driver=e}build(e,t,r){const i=new sq(t);return this._resetContextStyleTimingState(i),Bo(this,nw(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const a=[],u=[];return"@"==e.name.charAt(0)&&t.errors.push(function f5(){return new p.vHH(3006,!1)}()),e.definitions.forEach(h=>{if(this._resetContextStyleTimingState(t),0==h.type){const m=h,_=m.name;_.toString().split(/\s*,\s*/).forEach(w=>{m.name=w,a.push(this.visitState(m,t))}),m.name=_}else if(1==h.type){const m=this.visitTransition(h,t);r+=m.queryCount,i+=m.depCount,u.push(m)}else t.errors.push(function p5(){return new p.vHH(3007,!1)}())}),{type:7,name:e.name,states:a,transitions:u,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const a=new Set,u=i||{};r.styles.forEach(h=>{h instanceof Map&&h.forEach(m=>{jU(m).forEach(_=>{u.hasOwnProperty(_)||a.add(_)})})}),a.size&&(sS(a.values()),t.errors.push(function m5(n,e){return new p.vHH(3008,!1)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=Bo(this,nw(e.animation),t);return{type:1,matchers:J5(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:xp(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>Bo(this,r,t)),options:xp(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const a=e.steps.map(u=>{t.currentTime=r;const h=Bo(this,u,t);return i=Math.max(i,t.currentTime),h});return t.currentTime=i,{type:3,steps:a,options:xp(e.options)}}visitAnimate(e,t){const r=function cq(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return Jk(oS(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(a=>"{"==a.charAt(0)&&"{"==a.charAt(1))){const a=Jk(0,0,"");return a.dynamic=!0,a.strValue=t,a}const i=oS(t,e);return Jk(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,a=e.styles?e.styles:SU({});if(5==a.type)i=this.visitKeyframes(a,t);else{let u=e.styles,h=!1;if(!u){h=!0;const _={};r.easing&&(_.easing=r.easing),u=SU(_)}t.currentTime+=r.duration+r.delay;const m=this.visitStyle(u,t);m.isEmptyStep=h,i=m}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let h of i)"string"==typeof h?h===bu?r.push(h):t.errors.push(new p.vHH(3002,!1)):r.push(UU(h));let a=!1,u=null;return r.forEach(h=>{if(h instanceof Map&&(h.has("easing")&&(u=h.get("easing"),h.delete("easing")),!a))for(let m of h.values())if(m.toString().indexOf("{{")>=0){a=!0;break}}),{type:6,styles:r,easing:u,offset:e.offset,containsDynamicStyles:a,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,a=t.currentTime;r&&a>0&&(a-=r.duration+r.delay),e.styles.forEach(u=>{"string"!=typeof u&&u.forEach((h,m)=>{const _=t.collectedStyles.get(t.currentQuerySelector),w=_.get(m);let D=!0;w&&(a!=i&&a>=w.startTime&&i<=w.endTime&&(t.errors.push(function _5(n,e,t,r,i){return new p.vHH(3010,!1)}()),D=!1),a=w.startTime),D&&_.set(m,{startTime:a,endTime:i}),t.options&&function Z5(n,e,t){const r=e.params||{},i=jU(n);i.length&&i.forEach(a=>{r.hasOwnProperty(a)||t.push(function u5(n){return new p.vHH(3001,!1)}())})}(h,t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function y5(){return new p.vHH(3011,!1)}()),r;let a=0;const u=[];let h=!1,m=!1,_=0;const w=e.steps.map(Re=>{const Be=this._makeStyleAst(Re,t);let Ve=null!=Be.offset?Be.offset:function aq(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(Be.styles),et=0;return null!=Ve&&(a++,et=Be.offset=Ve),m=m||et<0||et>1,h=h||et<_,_=et,u.push(et),Be});m&&t.errors.push(function v5(){return new p.vHH(3012,!1)}()),h&&t.errors.push(function b5(){return new p.vHH(3200,!1)}());const D=e.steps.length;let S=0;a>0&&a<D?t.errors.push(function E5(){return new p.vHH(3202,!1)}()):0==a&&(S=1/(D-1));const N=D-1,U=t.currentTime,W=t.currentAnimateTimings,oe=W.duration;return w.forEach((Re,Be)=>{const Ve=S>0?Be==N?1:S*Be:u[Be],et=Ve*oe;t.currentTime=U+W.delay+et,W.duration=et,this._validateStyleAst(Re,t),Re.offset=Ve,r.styles.push(Re)}),r}visitReference(e,t){return{type:8,animation:Bo(this,nw(e.animation),t),options:xp(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:xp(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:xp(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[a,u]=function iq(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(nq,"")),n=n.replace(/@\*/g,iS).replace(/@\w+/g,t=>iS+"-"+t.slice(1)).replace(/:animating/g,Kk),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+a:a,Uo(t.collectedStyles,t.currentQuerySelector,new Map);const h=Bo(this,nw(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:a,limit:i.limit||0,optional:!!i.optional,includeSelf:u,animation:h,originalSelector:e.selector,options:xp(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function w5(){return new p.vHH(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:oS(e.timings,t.errors,!0);return{type:12,animation:Bo(this,nw(e.animation),t),timings:r,options:null}}}class sq{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function xp(n){return n?(n=tw(n)).params&&(n.params=function oq(n){return n?tw(n):null}(n.params)):n={},n}function Jk(n,e,t){return{duration:n,delay:e,easing:t}}function eO(n,e,t,r,i,a,u=null,h=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:a,totalTime:i+a,easing:u,subTimeline:h}}class lS{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const dq=new RegExp(":enter","g"),fq=new RegExp(":leave","g");function tO(n,e,t,r,i,a=new Map,u=new Map,h,m,_=[]){return(new pq).buildKeyframes(n,e,t,r,i,a,u,h,m,_)}class pq{buildKeyframes(e,t,r,i,a,u,h,m,_,w=[]){_=_||new lS;const D=new nO(e,t,_,i,a,w,[]);D.options=m;const S=m.delay?Eu(m.delay):0;D.currentTimeline.delayNextStep(S),D.currentTimeline.setStyles([u],null,D.errors,m),Bo(this,r,D);const N=D.timelines.filter(U=>U.containsAnimation());if(N.length&&h.size){let U;for(let W=N.length-1;W>=0;W--){const oe=N[W];if(oe.element===t){U=oe;break}}U&&!U.allowOnlyTimelineStyles()&&U.setStyles([h],null,D.errors,m)}return N.length?N.map(U=>U.buildKeyframes()):[eO(t,[],[],[],0,S,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),a=t.currentTimeline.currentTime,u=this._visitSubInstructions(r,i,i.options);a!=u&&t.transformIntoNewTimeline(u)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(const i of e){const a=i?.delay;if(a){const u="number"==typeof a?a:Eu(rw(a,i?.params??{},t.errors));r.delayNextStep(u)}}}_visitSubInstructions(e,t,r){let a=t.currentTimeline.currentTime;const u=null!=r.duration?Eu(r.duration):null,h=null!=r.delay?Eu(r.delay):null;return 0!==u&&e.forEach(m=>{const _=t.appendInstructionToTimeline(m,u,h);a=Math.max(a,_.duration+_.delay)}),a}visitReference(e,t){t.updateOptions(e.options,!0),Bo(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const a=e.options;if(a&&(a.params||a.delay)&&(i=t.createSubContext(a),i.transformIntoNewTimeline(),null!=a.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=dS);const u=Eu(a.delay);i.delayNextStep(u)}e.steps.length&&(e.steps.forEach(u=>Bo(this,u,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const a=e.options&&e.options.delay?Eu(e.options.delay):0;e.steps.forEach(u=>{const h=t.createSubContext(e.options);a&&h.delayNextStep(a),Bo(this,u,h),i=Math.max(i,h.currentTimeline.currentTime),r.push(h.currentTimeline)}),r.forEach(u=>t.currentTimeline.mergeTimelineCollectedStyles(u)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return oS(t.params?rw(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const a=e.style;5==a.type?this.visitKeyframes(a,t):(t.incrementTime(r.duration),this.visitStyle(a,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const a=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(a):r.setStyles(e.styles,a,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,a=r.duration,h=t.createSubContext().currentTimeline;h.easing=r.easing,e.styles.forEach(m=>{h.forwardTime((m.offset||0)*a),h.setStyles(m.styles,m.easing,t.errors,t.options),h.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(h),t.transformIntoNewTimeline(i+a),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},a=i.delay?Eu(i.delay):0;a&&(6===t.previousNode.type||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=dS);let u=r;const h=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=h.length;let m=null;h.forEach((_,w)=>{t.currentQueryIndex=w;const D=t.createSubContext(e.options,_);a&&D.delayNextStep(a),_===t.element&&(m=D.currentTimeline),Bo(this,e.animation,D),D.currentTimeline.applyStylesToKeyframe(),u=Math.max(u,D.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(u),m&&(t.currentTimeline.mergeTimelineCollectedStyles(m),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,a=e.timings,u=Math.abs(a.duration),h=u*(t.currentQueryTotal-1);let m=u*t.currentQueryIndex;switch(a.duration<0?"reverse":a.easing){case"reverse":m=h-m;break;case"full":m=r.currentStaggerTime}const w=t.currentTimeline;m&&w.delayNextStep(m);const D=w.currentTime;Bo(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-D+(i.startTime-r.currentTimeline.startTime)}}const dS={};class nO{constructor(e,t,r,i,a,u,h,m){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=a,this.errors=u,this.timelines=h,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=dS,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=m||new hS(this._driver,t,0),h.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=Eu(r.duration)),null!=r.delay&&(i.delay=Eu(r.delay));const a=r.params;if(a){let u=i.params;u||(u=this.options.params={}),Object.keys(a).forEach(h=>{(!t||!u.hasOwnProperty(h))&&(u[h]=rw(a[h],u,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,a=new nO(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return a.previousNode=this.previousNode,a.currentAnimateTimings=this.currentAnimateTimings,a.options=this._copyOptions(),a.updateOptions(e),a.currentQueryIndex=this.currentQueryIndex,a.currentQueryTotal=this.currentQueryTotal,a.parentContext=this,this.subContextCount++,a}transformIntoNewTimeline(e){return this.previousNode=dS,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},a=new mq(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(a),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,a,u){let h=[];if(i&&h.push(this.element),e.length>0){e=(e=e.replace(dq,"."+this._enterClassName)).replace(fq,"."+this._leaveClassName);let _=this._driver.query(this.element,e,1!=r);0!==r&&(_=r<0?_.slice(_.length+r,_.length):_.slice(0,r)),h.push(..._)}return!a&&0==h.length&&u.push(function I5(n){return new p.vHH(3014,!1)}()),h}}class hS{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new hS(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||bu),this._currentKeyframe.set(t,bu);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);const a=i&&i.params||{},u=function gq(n,e){const t=new Map;let r;return n.forEach(i=>{if("*"===i){r=r||e.keys();for(let a of r)t.set(a,bu)}else Ld(i,t)}),t}(e,this._globalTimelineStyles);for(let[h,m]of u){const _=rw(m,a,r);this._pendingStyles.set(h,_),this._localTimelineStyles.has(h)||this._backFill.set(h,this._globalTimelineStyles.get(h)??bu),this._updateStyle(h,_)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((h,m)=>{const _=Ld(h,new Map,this._backFill);_.forEach((w,D)=>{"!"===w?e.add(D):w===bu&&t.add(D)}),r||_.set("offset",m/this.duration),i.push(_)});const a=e.size?sS(e.values()):[],u=t.size?sS(t.values()):[];if(r){const h=i[0],m=new Map(h);h.set("offset",0),m.set("offset",1),i=[h,m]}return eO(this.element,i,a,u,this.duration,this.startTime,this.easing,!1)}}class mq extends hS{constructor(e,t,r,i,a,u,h=!1){super(e,t,u.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=a,this._stretchStartingKeyframe=h,this.timings={duration:u.duration,delay:u.delay,easing:u.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const a=[],u=r+t,h=t/u,m=Ld(e[0]);m.set("offset",0),a.push(m);const _=Ld(e[0]);_.set("offset",qU(h)),a.push(_);const w=e.length-1;for(let D=1;D<=w;D++){let S=Ld(e[D]);const N=S.get("offset");S.set("offset",qU((t+N*r)/u)),a.push(S)}r=u,t=0,i="",e=a}return eO(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function qU(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class rO{}const _q=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class yq extends rO{normalizePropertyName(e,t){return Qk(e)}normalizeStyleValue(e,t,r,i){let a="";const u=r.toString().trim();if(_q.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)a="px";else{const h=r.match(/^[+-]?[\d\.]+([a-z]*)$/);h&&0==h[1].length&&i.push(function h5(n,e){return new p.vHH(3005,!1)}())}return u+a}}function WU(n,e,t,r,i,a,u,h,m,_,w,D,S){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:a,toState:r,toStyles:u,timelines:h,queriedElements:m,preStyleProps:_,postStyleProps:w,totalTime:D,errors:S}}const iO={};class KU{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function vq(n,e,t,r,i){return n.some(a=>a(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return void 0!==e&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,a,u,h,m,_,w){const D=[],S=this.ast.options&&this.ast.options.params||iO,U=this.buildStyles(r,h&&h.params||iO,D),W=m&&m.params||iO,oe=this.buildStyles(i,W,D),Re=new Set,Be=new Map,Ve=new Map,et="void"===i,Rt={params:bq(W,S),delay:this.ast.options?.delay},At=w?[]:tO(e,t,this.ast.animation,a,u,U,oe,Rt,_,D);let Wt=0;if(At.forEach(Dr=>{Wt=Math.max(Dr.duration+Dr.delay,Wt)}),D.length)return WU(t,this._triggerName,r,i,et,U,oe,[],[],Be,Ve,Wt,D);At.forEach(Dr=>{const Js=Dr.element,lB=Uo(Be,Js,new Set);Dr.preStyleProps.forEach(Mp=>lB.add(Mp));const ow=Uo(Ve,Js,new Set);Dr.postStyleProps.forEach(Mp=>ow.add(Mp)),Js!==t&&Re.add(Js)});const Ln=sS(Re.values());return WU(t,this._triggerName,r,i,et,U,oe,At,Ln,Be,Ve,Wt)}}function bq(n,e){const t=tw(e);for(const r in n)n.hasOwnProperty(r)&&null!=n[r]&&(t[r]=n[r]);return t}class Eq{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r=new Map,i=tw(this.defaultParams);return Object.keys(e).forEach(a=>{const u=e[a];null!==u&&(i[a]=u)}),this.styles.styles.forEach(a=>{"string"!=typeof a&&a.forEach((u,h)=>{u&&(u=rw(u,i,t));const m=this.normalizer.normalizePropertyName(h,t);u=this.normalizer.normalizeStyleValue(h,m,u,t),r.set(h,u)})}),r}}class Iq{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new Eq(i.style,i.options&&i.options.params||{},r))}),ZU(this.states,"true","1"),ZU(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new KU(e,i,this.states))}),this.fallbackTransition=function Dq(n,e,t){return new KU(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(u,h)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(u=>u.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function ZU(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const Tq=new lS;class Cq{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const r=[],a=Xk(this._driver,t,r,[]);if(r.length)throw function M5(n){return new p.vHH(3503,!1)}();this._animations.set(e,a)}_buildPlayer(e,t,r){const i=e.element,a=RU(this._normalizer,e.keyframes,t,r);return this._driver.animate(i,a,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],a=this._animations.get(e);let u;const h=new Map;if(a?(u=tO(this._driver,t,a,Wk,nS,new Map,new Map,r,Tq,i),u.forEach(w=>{const D=Uo(h,w.element,new Map);w.postStyleProps.forEach(S=>D.set(S,null))})):(i.push(function R5(){return new p.vHH(3300,!1)}()),u=[]),i.length)throw function N5(n){return new p.vHH(3504,!1)}();h.forEach((w,D)=>{w.forEach((S,N)=>{w.set(N,this._driver.computeStyle(D,N,bu))})});const _=Fd(u.map(w=>{const D=h.get(w.element);return this._buildPlayer(w,new Map,D)}));return this._playersById.set(e,_),_.onDestroy(()=>this.destroy(e)),this.players.push(_),_}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function k5(n){return new p.vHH(3301,!1)}();return t}listen(e,t,r,i){const a=zk(t,"","","");return $k(this._getPlayer(e),r,a,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const a=this._getPlayer(e);switch(r){case"play":a.play();break;case"pause":a.pause();break;case"reset":a.reset();break;case"restart":a.restart();break;case"finish":a.finish();break;case"init":a.init();break;case"setPosition":a.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const YU="ng-animate-queued",oO="ng-animate-disabled",Rq=[],QU={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Nq={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Xs="__ng_removed";class sO{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function Fq(n){return n??null}(r?e.value:e),r){const a=tw(e);delete a.value,this.options=a}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const iw="void",aO=new sO(iw);class kq{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,ls(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw function O5(n,e){return new p.vHH(3302,!1)}();if(null==r||0==r.length)throw function P5(n){return new p.vHH(3303,!1)}();if(!function Lq(n){return"start"==n||"done"==n}(r))throw function F5(n,e){return new p.vHH(3400,!1)}();const a=Uo(this._elementListeners,e,[]),u={name:t,phase:r,callback:i};a.push(u);const h=Uo(this._engine.statesByElement,e,new Map);return h.has(t)||(ls(e,rS),ls(e,rS+"-"+t),h.set(t,aO)),()=>{this._engine.afterFlush(()=>{const m=a.indexOf(u);m>=0&&a.splice(m,1),this._triggers.has(t)||h.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function L5(n){return new p.vHH(3401,!1)}();return t}trigger(e,t,r,i=!0){const a=this._getTrigger(t),u=new cO(this.id,t,e);let h=this._engine.statesByElement.get(e);h||(ls(e,rS),ls(e,rS+"-"+t),this._engine.statesByElement.set(e,h=new Map));let m=h.get(t);const _=new sO(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&m&&_.absorbOptions(m.options),h.set(t,_),m||(m=aO),_.value!==iw&&m.value===_.value){if(!function Bq(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const a=t[i];if(!e.hasOwnProperty(a)||n[a]!==e[a])return!1}return!0}(m.params,_.params)){const W=[],oe=a.matchStyles(m.value,m.params,W),Re=a.matchStyles(_.value,_.params,W);W.length?this._engine.reportError(W):this._engine.afterFlush(()=>{Sp(e,oe),Xa(e,Re)})}return}const S=Uo(this._engine.playersByElement,e,[]);S.forEach(W=>{W.namespaceId==this.id&&W.triggerName==t&&W.queued&&W.destroy()});let N=a.matchTransition(m.value,_.value,e,_.params),U=!1;if(!N){if(!i)return;N=a.fallbackTransition,U=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:N,fromState:m,toState:_,player:u,isFallbackTransition:U}),U||(ls(e,YU),u.onStart(()=>{my(e,YU)})),u.onDone(()=>{let W=this.players.indexOf(u);W>=0&&this.players.splice(W,1);const oe=this._engine.playersByElement.get(e);if(oe){let Re=oe.indexOf(u);Re>=0&&oe.splice(Re,1)}}),this.players.push(u),S.push(u),u}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,iS,!0);r.forEach(i=>{if(i[Xs])return;const a=this._engine.fetchNamespacesByElement(i);a.size?a.forEach(u=>u.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const a=this._engine.statesByElement.get(e),u=new Map;if(a){const h=[];if(a.forEach((m,_)=>{if(u.set(_,m.value),this._triggers.has(_)){const w=this.trigger(e,_,iw,i);w&&h.push(w)}}),h.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,u),r&&Fd(h).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(a=>{const u=a.name;if(i.has(u))return;i.add(u);const m=this._triggers.get(u).fallbackTransition,_=r.get(u)||aO,w=new sO(iw),D=new cO(this.id,u,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:u,transition:m,fromState:_,toState:w,player:D,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const a=r.players.length?r.playersByQueriedElement.get(e):[];if(a&&a.length)i=!0;else{let u=e;for(;u=u.parentNode;)if(r.statesByElement.get(u)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const a=e[Xs];(!a||a===QU)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){ls(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const a=r.element,u=this._elementListeners.get(a);u&&u.forEach(h=>{if(h.name==r.triggerName){const m=zk(a,r.triggerName,r.fromState.value,r.toState.value);m._data=e,$k(r.player,h.phase,m,h.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const a=r.transition.ast.depCount,u=i.transition.ast.depCount;return 0==a||0==u?a-u:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}}class Oq{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,a)=>{}}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new kq(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let u=!1,h=this.driver.getParentElement(t);for(;h;){const m=i.get(h);if(m){const _=r.indexOf(m);r.splice(_+1,0,e),u=!0;break}h=this.driver.getParentElement(h)}u||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const r=this._fetchNamespace(e);this.namespacesByHostElement.delete(r.hostElement);const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1),r.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r)for(let i of r.values())if(i.namespaceId){const a=this._fetchNamespace(i.namespaceId);a&&t.add(a)}return t}trigger(e,t,r,i){if(fS(t)){const a=this._fetchNamespace(e);if(a)return a.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!fS(t))return;const a=t[Xs];if(a&&a.setForRemoval){a.setForRemoval=!1,a.setForMove=!0;const u=this.collectedLeaveElements.indexOf(t);u>=0&&this.collectedLeaveElements.splice(u,1)}if(e){const u=this._fetchNamespace(e);u&&u.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),ls(e,oO)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),my(e,oO))}removeNode(e,t,r){if(fS(t)){const i=e?this._fetchNamespace(e):null;i?i.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r);const a=this.namespacesByHostElement.get(t);a&&a.id!==e&&a.removeNode(t,r)}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,r,i,a){this.collectedLeaveElements.push(t),t[Xs]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:a}}listen(e,t,r,i,a){return fS(t)?this._fetchNamespace(e).listen(t,r,i,a):()=>{}}_buildInstruction(e,t,r,i,a){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,a)}destroyInnerAnimations(e){let t=this.driver.query(e,iS,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,Kk,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Fd(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[Xs];if(t&&t.setForRemoval){if(e[Xs]=QU,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(oO)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)ls(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?Fd(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function V5(n){return new p.vHH(3402,!1)}()}_flushAnimations(e,t){const r=new lS,i=[],a=new Map,u=[],h=new Map,m=new Map,_=new Map,w=new Set;this.disabledNodes.forEach(it=>{w.add(it);const ht=this.driver.query(it,".ng-animate-queued",!0);for(let bt=0;bt<ht.length;bt++)w.add(ht[bt])});const D=this.bodyNode,S=Array.from(this.statesByElement.keys()),N=eB(S,this.collectedEnterElements),U=new Map;let W=0;N.forEach((it,ht)=>{const bt=Wk+W++;U.set(ht,bt),it.forEach(en=>ls(en,bt))});const oe=[],Re=new Set,Be=new Set;for(let it=0;it<this.collectedLeaveElements.length;it++){const ht=this.collectedLeaveElements[it],bt=ht[Xs];bt&&bt.setForRemoval&&(oe.push(ht),Re.add(ht),bt.hasAnimation?this.driver.query(ht,".ng-star-inserted",!0).forEach(en=>Re.add(en)):Be.add(ht))}const Ve=new Map,et=eB(S,Array.from(Re));et.forEach((it,ht)=>{const bt=nS+W++;Ve.set(ht,bt),it.forEach(en=>ls(en,bt))}),e.push(()=>{N.forEach((it,ht)=>{const bt=U.get(ht);it.forEach(en=>my(en,bt))}),et.forEach((it,ht)=>{const bt=Ve.get(ht);it.forEach(en=>my(en,bt))}),oe.forEach(it=>{this.processLeaveNode(it)})});const Rt=[],At=[];for(let it=this._namespaceList.length-1;it>=0;it--)this._namespaceList[it].drainQueuedTransitions(t).forEach(bt=>{const en=bt.player,oi=bt.element;if(Rt.push(en),this.collectedEnterElements.length){const Si=oi[Xs];if(Si&&Si.setForMove){if(Si.previousTriggersValues&&Si.previousTriggersValues.has(bt.triggerName)){const Rp=Si.previousTriggersValues.get(bt.triggerName),ds=this.statesByElement.get(bt.element);if(ds&&ds.has(bt.triggerName)){const gS=ds.get(bt.triggerName);gS.value=Rp,ds.set(bt.triggerName,gS)}}return void en.destroy()}}const Ja=!D||!this.driver.containsElement(D,oi),jo=Ve.get(oi),Vd=U.get(oi),Yn=this._buildInstruction(bt,r,Vd,jo,Ja);if(Yn.errors&&Yn.errors.length)return void At.push(Yn);if(Ja)return en.onStart(()=>Sp(oi,Yn.fromStyles)),en.onDestroy(()=>Xa(oi,Yn.toStyles)),void i.push(en);if(bt.isFallbackTransition)return en.onStart(()=>Sp(oi,Yn.fromStyles)),en.onDestroy(()=>Xa(oi,Yn.toStyles)),void i.push(en);const fB=[];Yn.timelines.forEach(Si=>{Si.stretchStartingKeyframe=!0,this.disabledNodes.has(Si.element)||fB.push(Si)}),Yn.timelines=fB,r.append(oi,Yn.timelines),u.push({instruction:Yn,player:en,element:oi}),Yn.queriedElements.forEach(Si=>Uo(h,Si,[]).push(en)),Yn.preStyleProps.forEach((Si,Rp)=>{if(Si.size){let ds=m.get(Rp);ds||m.set(Rp,ds=new Set),Si.forEach((gS,dO)=>ds.add(dO))}}),Yn.postStyleProps.forEach((Si,Rp)=>{let ds=_.get(Rp);ds||_.set(Rp,ds=new Set),Si.forEach((gS,dO)=>ds.add(dO))})});if(At.length){const it=[];At.forEach(ht=>{it.push(function U5(n,e){return new p.vHH(3505,!1)}())}),Rt.forEach(ht=>ht.destroy()),this.reportError(it)}const Wt=new Map,Ln=new Map;u.forEach(it=>{const ht=it.element;r.has(ht)&&(Ln.set(ht,ht),this._beforeAnimationBuild(it.player.namespaceId,it.instruction,Wt))}),i.forEach(it=>{const ht=it.element;this._getPreviousPlayers(ht,!1,it.namespaceId,it.triggerName,null).forEach(en=>{Uo(Wt,ht,[]).push(en),en.destroy()})});const Dr=oe.filter(it=>nB(it,m,_)),Js=new Map;JU(Js,this.driver,Be,_,bu).forEach(it=>{nB(it,m,_)&&Dr.push(it)});const ow=new Map;N.forEach((it,ht)=>{JU(ow,this.driver,new Set(it),m,"!")}),Dr.forEach(it=>{const ht=Js.get(it),bt=ow.get(it);Js.set(it,new Map([...ht?.entries()??[],...bt?.entries()??[]]))});const Mp=[],dB=[],hB={};u.forEach(it=>{const{element:ht,player:bt,instruction:en}=it;if(r.has(ht)){if(w.has(ht))return bt.onDestroy(()=>Xa(ht,en.toStyles)),bt.disabled=!0,bt.overrideTotalTime(en.totalTime),void i.push(bt);let oi=hB;if(Ln.size>1){let jo=ht;const Vd=[];for(;jo=jo.parentNode;){const Yn=Ln.get(jo);if(Yn){oi=Yn;break}Vd.push(jo)}Vd.forEach(Yn=>Ln.set(Yn,oi))}const Ja=this._buildAnimation(bt.namespaceId,en,Wt,a,ow,Js);if(bt.setRealPlayer(Ja),oi===hB)Mp.push(bt);else{const jo=this.playersByElement.get(oi);jo&&jo.length&&(bt.parentPlayer=Fd(jo)),i.push(bt)}}else Sp(ht,en.fromStyles),bt.onDestroy(()=>Xa(ht,en.toStyles)),dB.push(bt),w.has(ht)&&i.push(bt)}),dB.forEach(it=>{const ht=a.get(it.element);if(ht&&ht.length){const bt=Fd(ht);it.setRealPlayer(bt)}}),i.forEach(it=>{it.parentPlayer?it.syncPlayerEvents(it.parentPlayer):it.destroy()});for(let it=0;it<oe.length;it++){const ht=oe[it],bt=ht[Xs];if(my(ht,nS),bt&&bt.hasAnimation)continue;let en=[];if(h.size){let Ja=h.get(ht);Ja&&Ja.length&&en.push(...Ja);let jo=this.driver.query(ht,Kk,!0);for(let Vd=0;Vd<jo.length;Vd++){let Yn=h.get(jo[Vd]);Yn&&Yn.length&&en.push(...Yn)}}const oi=en.filter(Ja=>!Ja.destroyed);oi.length?Vq(this,ht,oi):this.processLeaveNode(ht)}return oe.length=0,Mp.forEach(it=>{this.players.push(it),it.onDone(()=>{it.destroy();const ht=this.players.indexOf(it);this.players.splice(ht,1)}),it.play()}),Mp}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,a){let u=[];if(t){const h=this.playersByQueriedElement.get(e);h&&(u=h)}else{const h=this.playersByElement.get(e);if(h){const m=!a||a==iw;h.forEach(_=>{_.queued||!m&&_.triggerName!=i||u.push(_)})}}return(r||i)&&(u=u.filter(h=>!(r&&r!=h.namespaceId||i&&i!=h.triggerName))),u}_beforeAnimationBuild(e,t,r){const a=t.element,u=t.isRemovalTransition?void 0:e,h=t.isRemovalTransition?void 0:t.triggerName;for(const m of t.timelines){const _=m.element,w=_!==a,D=Uo(r,_,[]);this._getPreviousPlayers(_,w,u,h,t.toState).forEach(N=>{const U=N.getRealPlayer();U.beforeDestroy&&U.beforeDestroy(),N.destroy(),D.push(N)})}Sp(a,t.fromStyles)}_buildAnimation(e,t,r,i,a,u){const h=t.triggerName,m=t.element,_=[],w=new Set,D=new Set,S=t.timelines.map(U=>{const W=U.element;w.add(W);const oe=W[Xs];if(oe&&oe.removedBeforeQueried)return new ew(U.duration,U.delay);const Re=W!==m,Be=function Uq(n){const e=[];return tB(n,e),e}((r.get(W)||Rq).map(Wt=>Wt.getRealPlayer())).filter(Wt=>!!Wt.element&&Wt.element===W),Ve=a.get(W),et=u.get(W),Rt=RU(this._normalizer,U.keyframes,Ve,et),At=this._buildPlayer(U,Rt,Be);if(U.subTimeline&&i&&D.add(W),Re){const Wt=new cO(e,h,W);Wt.setRealPlayer(At),_.push(Wt)}return At});_.forEach(U=>{Uo(this.playersByQueriedElement,U.element,[]).push(U),U.onDone(()=>function Pq(n,e,t){let r=n.get(e);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}return r}(this.playersByQueriedElement,U.element,U))}),w.forEach(U=>ls(U,VU));const N=Fd(S);return N.onDestroy(()=>{w.forEach(U=>my(U,VU)),Xa(m,t.toStyles)}),D.forEach(U=>{Uo(i,U,[]).push(N)}),N}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new ew(e.duration,e.delay)}}class cO{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new ew,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>$k(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Uo(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function fS(n){return n&&1===n.nodeType}function XU(n,e){const t=n.style.display;return n.style.display=e??"none",t}function JU(n,e,t,r,i){const a=[];t.forEach(m=>a.push(XU(m)));const u=[];r.forEach((m,_)=>{const w=new Map;m.forEach(D=>{const S=e.computeStyle(_,D,i);w.set(D,S),(!S||0==S.length)&&(_[Xs]=Nq,u.push(_))}),n.set(_,w)});let h=0;return t.forEach(m=>XU(m,a[h++])),u}function eB(n,e){const t=new Map;if(n.forEach(h=>t.set(h,[])),0==e.length)return t;const i=new Set(e),a=new Map;function u(h){if(!h)return 1;let m=a.get(h);if(m)return m;const _=h.parentNode;return m=t.has(_)?_:i.has(_)?1:u(_),a.set(h,m),m}return e.forEach(h=>{const m=u(h);1!==m&&t.get(m).push(h)}),t}function ls(n,e){n.classList?.add(e)}function my(n,e){n.classList?.remove(e)}function Vq(n,e,t){Fd(t).onDone(()=>n.processLeaveNode(e))}function tB(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof xU?tB(r.players,e):e.push(r)}}function nB(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(a=>i.add(a)):e.set(n,r),t.delete(n),!0}class pS{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,a)=>{},this._transitionEngine=new Oq(e,t,r),this._timelineEngine=new Cq(e,t,r),this._transitionEngine.onRemovalComplete=(i,a)=>this.onRemovalComplete(i,a)}registerTrigger(e,t,r,i,a){const u=e+"-"+i;let h=this._triggerCache[u];if(!h){const m=[],w=Xk(this._driver,a,m,[]);if(m.length)throw function S5(n,e){return new p.vHH(3404,!1)}();h=function wq(n,e,t){return new Iq(n,e,t)}(i,w,this._normalizer),this._triggerCache[u]=h}this._transitionEngine.registerTrigger(t,i,h)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r){this._transitionEngine.removeNode(e,t,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[a,u]=NU(r);this._timelineEngine.command(a,t,u,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,a){if("@"==r.charAt(0)){const[u,h]=NU(r);return this._timelineEngine.listen(u,t,h,a)}return this._transitionEngine.listen(e,t,r,i,a)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}}let $q=(()=>{class n{static#e=this.initialStylesByElement=new WeakMap;constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let a=n.initialStylesByElement.get(t);a||n.initialStylesByElement.set(t,a=new Map),this._initialStyles=a}start(){this._state<1&&(this._startStyles&&Xa(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Xa(this._element,this._initialStyles),this._endStyles&&(Xa(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Sp(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Sp(this._element,this._endStyles),this._endStyles=null),Xa(this._element,this._initialStyles),this._state=3)}}return n})();function uO(n){let e=null;return n.forEach((t,r)=>{(function Hq(n){return"display"===n||"position"===n})(r)&&(e=e||new Map,e.set(r,t))}),e}class rB{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&e.set(i,this._finished?r:$U(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class zq{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return OU(e,t)}getParentElement(e){return Gk(e)}query(e,t,r){return PU(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,a,u=[]){const m={duration:r,delay:i,fill:0==i?"both":"forwards"};a&&(m.easing=a);const _=new Map,w=u.filter(N=>N instanceof rB);(function Q5(n,e){return 0===n||0===e})(r,i)&&w.forEach(N=>{N.currentSnapshot.forEach((U,W)=>_.set(W,U))});let D=function K5(n){return n.length?n[0]instanceof Map?n:n.map(e=>UU(e)):[]}(t).map(N=>Ld(N));D=function X5(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((a,u)=>{r.has(u)||i.push(u),r.set(u,a)}),i.length)for(let a=1;a<e.length;a++){let u=e[a];i.forEach(h=>u.set(h,$U(n,h)))}}return e}(e,D,_);const S=function jq(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=uO(e[0]),e.length>1&&(r=uO(e[e.length-1]))):e instanceof Map&&(t=uO(e)),t||r?new $q(n,t,r):null}(e,D);return new rB(e,D,m,S)}}let Gq=(()=>{class n extends CU{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:p.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?AU(t):t;return iB(this._renderer,null,r,"register",[i]),new qq(r,this._renderer)}static#e=this.\u0275fac=function(r){return new(r||n)(p.LFG(p.FYo),p.LFG(de))};static#t=this.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac})}return n})();class qq extends s5{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new Wq(this._id,e,t||{},this._renderer)}}class Wq{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return iB(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function iB(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const oB="@.disabled";let Kq=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,r.onRemovalComplete=(a,u)=>{const h=u?.parentNode(a);h&&u.removeChild(h,a)}}createRenderer(t,r){const a=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let w=this._rendererCache.get(a);return w||(w=new sB("",a,this.engine,()=>this._rendererCache.delete(a)),this._rendererCache.set(a,w)),w}const u=r.id,h=r.id+"-"+this._currentId;this._currentId++,this.engine.register(h,t);const m=w=>{Array.isArray(w)?w.forEach(m):this.engine.registerTrigger(u,h,t,w.name,w)};return r.data.animation.forEach(m),new Zq(this,h,a,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&queueMicrotask(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(a=>{const[u,h]=a;u(h)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}static#e=this.\u0275fac=function(r){return new(r||n)(p.LFG(p.FYo),p.LFG(pS),p.LFG(p.R0b))};static#t=this.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac})}return n})();class sB{constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==oB?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class Zq extends sB{constructor(e,t,r,i,a){super(t,r,i,a),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==oB?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function Yq(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let a=t.slice(1),u="";return"@"!=a.charAt(0)&&([a,u]=function Qq(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(a)),this.engine.listen(this.namespaceId,i,a,u,h=>{this.factory.scheduleListenerCallback(h._data||-1,r,h)})}return this.delegate.listen(e,t,r)}}let Xq=(()=>{class n extends pS{constructor(t,r,i,a){super(t.body,r,i)}ngOnDestroy(){this.flush()}static#e=this.\u0275fac=function(r){return new(r||n)(p.LFG(de),p.LFG(qk),p.LFG(rO),p.LFG(p.z2F))};static#t=this.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac})}return n})();const aB=[{provide:CU,useClass:Gq},{provide:rO,useFactory:function Jq(){return new yq}},{provide:pS,useClass:Xq},{provide:p.FYo,useFactory:function e9(n,e,t){return new Kq(n,e,t)},deps:[Hu,pS,p.R0b]}],lO=[{provide:qk,useFactory:()=>new zq},{provide:p.QbO,useValue:"BrowserAnimations"},...aB],cB=[{provide:qk,useClass:FU},{provide:p.QbO,useValue:"NoopAnimations"},...aB];let t9=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?cB:lO}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=p.oAB({type:n});static#n=this.\u0275inj=p.cJS({providers:lO,imports:[Ku]})}return n})();const uB_firebase={projectId:"heroes-angular-77700",appId:"1:616959304621:web:c447b09c3639e7a41e3724",storageBucket:"heroes-angular-77700.appspot.com",apiKey:"AIzaSyA9K5yXgvOwGgyLrUze0_h2MkZ018RDd4s",authDomain:"heroes-angular-77700.firebaseapp.com",messagingSenderId:"616959304621"};let n9=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=p.oAB({type:n,bootstrap:[dG]});static#n=this.\u0275inj=p.cJS({imports:[Ku,o6,s6,b6,o5,t9,Or.hO.initializeApp(uB_firebase),C4,um(()=>ha(uB_firebase)),O$(()=>P$())]})}return n})();fn().bootstrapModule(n9).catch(n=>console.error(n))},5619:(ot,ve,R)=>{R.d(ve,{X:()=>z});var p=R(8645);class z extends p.x{constructor(Q){super(),this._value=Q}get value(){return this.getValue()}_subscribe(Q){const K=super._subscribe(Q);return!K.closed&&Q.next(this._value),K}getValue(){const{hasError:Q,thrownError:K,_value:de}=this;if(Q)throw K;return this._throwIfClosed(),de}next(Q){super.next(this._value=Q)}}},5592:(ot,ve,R)=>{R.d(ve,{y:()=>Ce});var p=R(305),z=R(7394),B=R(4850),Q=R(8407),K=R(2653),de=R(4674),fe=R(1441);let Ce=(()=>{class J{constructor(we){we&&(this._subscribe=we)}lift(we){const Ke=new J;return Ke.source=this,Ke.operator=we,Ke}subscribe(we,Ke,at){const ze=function F(J){return J&&J instanceof p.Lv||function V(J){return J&&(0,de.m)(J.next)&&(0,de.m)(J.error)&&(0,de.m)(J.complete)}(J)&&(0,z.Nn)(J)}(we)?we:new p.Hp(we,Ke,at);return(0,fe.x)(()=>{const{operator:Ae,source:ft}=this;ze.add(Ae?Ae.call(ze,ft):ft?this._subscribe(ze):this._trySubscribe(ze))}),ze}_trySubscribe(we){try{return this._subscribe(we)}catch(Ke){we.error(Ke)}}forEach(we,Ke){return new(Ke=ce(Ke))((at,ze)=>{const Ae=new p.Hp({next:ft=>{try{we(ft)}catch(ct){ze(ct),Ae.unsubscribe()}},error:ze,complete:at});this.subscribe(Ae)})}_subscribe(we){var Ke;return null===(Ke=this.source)||void 0===Ke?void 0:Ke.subscribe(we)}[B.L](){return this}pipe(...we){return(0,Q.U)(we)(this)}toPromise(we){return new(we=ce(we))((Ke,at)=>{let ze;this.subscribe(Ae=>ze=Ae,Ae=>at(Ae),()=>Ke(ze))})}}return J.create=Ne=>new J(Ne),J})();function ce(J){var Ne;return null!==(Ne=J??K.config.Promise)&&void 0!==Ne?Ne:Promise}},8645:(ot,ve,R)=>{R.d(ve,{x:()=>fe});var p=R(5592),z=R(7394);const Q=(0,R(2306).d)(ce=>function(){ce(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var K=R(9039),de=R(1441);let fe=(()=>{class ce extends p.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(F){const J=new Ce(this,this);return J.operator=F,J}_throwIfClosed(){if(this.closed)throw new Q}next(F){(0,de.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const J of this.currentObservers)J.next(F)}})}error(F){(0,de.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=F;const{observers:J}=this;for(;J.length;)J.shift().error(F)}})}complete(){(0,de.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:F}=this;for(;F.length;)F.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var F;return(null===(F=this.observers)||void 0===F?void 0:F.length)>0}_trySubscribe(F){return this._throwIfClosed(),super._trySubscribe(F)}_subscribe(F){return this._throwIfClosed(),this._checkFinalizedStatuses(F),this._innerSubscribe(F)}_innerSubscribe(F){const{hasError:J,isStopped:Ne,observers:we}=this;return J||Ne?z.Lc:(this.currentObservers=null,we.push(F),new z.w0(()=>{this.currentObservers=null,(0,K.P)(we,F)}))}_checkFinalizedStatuses(F){const{hasError:J,thrownError:Ne,isStopped:we}=this;J?F.error(Ne):we&&F.complete()}asObservable(){const F=new p.y;return F.source=this,F}}return ce.create=(V,F)=>new Ce(V,F),ce})();class Ce extends fe{constructor(V,F){super(),this.destination=V,this.source=F}next(V){var F,J;null===(J=null===(F=this.destination)||void 0===F?void 0:F.next)||void 0===J||J.call(F,V)}error(V){var F,J;null===(J=null===(F=this.destination)||void 0===F?void 0:F.error)||void 0===J||J.call(F,V)}complete(){var V,F;null===(F=null===(V=this.destination)||void 0===V?void 0:V.complete)||void 0===F||F.call(V)}_subscribe(V){var F,J;return null!==(J=null===(F=this.source)||void 0===F?void 0:F.subscribe(V))&&void 0!==J?J:z.Lc}}},305:(ot,ve,R)=>{R.d(ve,{Hp:()=>at,Lv:()=>J});var p=R(4674),z=R(7394),B=R(2653),Q=R(3894),K=R(2420);const de=ce("C",void 0,void 0);function ce(ue,Ie,he){return{kind:ue,value:Ie,error:he}}var V=R(7599),F=R(1441);class J extends z.w0{constructor(Ie){super(),this.isStopped=!1,Ie?(this.destination=Ie,(0,z.Nn)(Ie)&&Ie.add(this)):this.destination=ct}static create(Ie,he,ke){return new at(Ie,he,ke)}next(Ie){this.isStopped?ft(function Ce(ue){return ce("N",ue,void 0)}(Ie),this):this._next(Ie)}error(Ie){this.isStopped?ft(function fe(ue){return ce("E",void 0,ue)}(Ie),this):(this.isStopped=!0,this._error(Ie))}complete(){this.isStopped?ft(de,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ie){this.destination.next(Ie)}_error(Ie){try{this.destination.error(Ie)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ne=Function.prototype.bind;function we(ue,Ie){return Ne.call(ue,Ie)}class Ke{constructor(Ie){this.partialObserver=Ie}next(Ie){const{partialObserver:he}=this;if(he.next)try{he.next(Ie)}catch(ke){ze(ke)}}error(Ie){const{partialObserver:he}=this;if(he.error)try{he.error(Ie)}catch(ke){ze(ke)}else ze(Ie)}complete(){const{partialObserver:Ie}=this;if(Ie.complete)try{Ie.complete()}catch(he){ze(he)}}}class at extends J{constructor(Ie,he,ke){let xe;if(super(),(0,p.m)(Ie)||!Ie)xe={next:Ie??void 0,error:he??void 0,complete:ke??void 0};else{let Oe;this&&B.config.useDeprecatedNextContext?(Oe=Object.create(Ie),Oe.unsubscribe=()=>this.unsubscribe(),xe={next:Ie.next&&we(Ie.next,Oe),error:Ie.error&&we(Ie.error,Oe),complete:Ie.complete&&we(Ie.complete,Oe)}):xe=Ie}this.destination=new Ke(xe)}}function ze(ue){B.config.useDeprecatedSynchronousErrorHandling?(0,F.O)(ue):(0,Q.h)(ue)}function ft(ue,Ie){const{onStoppedNotification:he}=B.config;he&&V.z.setTimeout(()=>he(ue,Ie))}const ct={closed:!0,next:K.Z,error:function Ae(ue){throw ue},complete:K.Z}},7394:(ot,ve,R)=>{R.d(ve,{Lc:()=>de,w0:()=>K,Nn:()=>fe});var p=R(4674);const B=(0,R(2306).d)(ce=>function(F){ce(this),this.message=F?`${F.length} errors occurred during unsubscription:\n${F.map((J,Ne)=>`${Ne+1}) ${J.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=F});var Q=R(9039);class K{constructor(V){this.initialTeardown=V,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let V;if(!this.closed){this.closed=!0;const{_parentage:F}=this;if(F)if(this._parentage=null,Array.isArray(F))for(const we of F)we.remove(this);else F.remove(this);const{initialTeardown:J}=this;if((0,p.m)(J))try{J()}catch(we){V=we instanceof B?we.errors:[we]}const{_finalizers:Ne}=this;if(Ne){this._finalizers=null;for(const we of Ne)try{Ce(we)}catch(Ke){V=V??[],Ke instanceof B?V=[...V,...Ke.errors]:V.push(Ke)}}if(V)throw new B(V)}}add(V){var F;if(V&&V!==this)if(this.closed)Ce(V);else{if(V instanceof K){if(V.closed||V._hasParent(this))return;V._addParent(this)}(this._finalizers=null!==(F=this._finalizers)&&void 0!==F?F:[]).push(V)}}_hasParent(V){const{_parentage:F}=this;return F===V||Array.isArray(F)&&F.includes(V)}_addParent(V){const{_parentage:F}=this;this._parentage=Array.isArray(F)?(F.push(V),F):F?[F,V]:V}_removeParent(V){const{_parentage:F}=this;F===V?this._parentage=null:Array.isArray(F)&&(0,Q.P)(F,V)}remove(V){const{_finalizers:F}=this;F&&(0,Q.P)(F,V),V instanceof K&&V._removeParent(this)}}K.EMPTY=(()=>{const ce=new K;return ce.closed=!0,ce})();const de=K.EMPTY;function fe(ce){return ce instanceof K||ce&&"closed"in ce&&(0,p.m)(ce.remove)&&(0,p.m)(ce.add)&&(0,p.m)(ce.unsubscribe)}function Ce(ce){(0,p.m)(ce)?ce():ce.unsubscribe()}},2653:(ot,ve,R)=>{R.d(ve,{config:()=>p});const p={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},6232:(ot,ve,R)=>{R.d(ve,{E:()=>z});const z=new(R(5592).y)(K=>K.complete())},2459:(ot,ve,R)=>{R.d(ve,{D:()=>Ie});var p=R(4829),z=R(3093),B=R(5137),de=R(5592),Ce=R(4971),ce=R(4674),V=R(7103);function J(he,ke){if(!he)throw new Error("Iterable cannot be null");return new de.y(xe=>{(0,V.f)(xe,ke,()=>{const Oe=he[Symbol.asyncIterator]();(0,V.f)(xe,ke,()=>{Oe.next().then(De=>{De.done?xe.complete():xe.next(De.value)})},0,!0)})})}var Ne=R(8382),we=R(4026),Ke=R(4266),at=R(3664),ze=R(5726),Ae=R(9853),ft=R(541);function Ie(he,ke){return ke?function ue(he,ke){if(null!=he){if((0,Ne.c)(he))return function Q(he,ke){return(0,p.Xf)(he).pipe((0,B.R)(ke),(0,z.Q)(ke))}(he,ke);if((0,Ke.z)(he))return function fe(he,ke){return new de.y(xe=>{let Oe=0;return ke.schedule(function(){Oe===he.length?xe.complete():(xe.next(he[Oe++]),xe.closed||this.schedule())})})}(he,ke);if((0,we.t)(he))return function K(he,ke){return(0,p.Xf)(he).pipe((0,B.R)(ke),(0,z.Q)(ke))}(he,ke);if((0,ze.D)(he))return J(he,ke);if((0,at.T)(he))return function F(he,ke){return new de.y(xe=>{let Oe;return(0,V.f)(xe,ke,()=>{Oe=he[Ce.h](),(0,V.f)(xe,ke,()=>{let De,Et;try{({value:De,done:Et}=Oe.next())}catch(zn){return void xe.error(zn)}Et?xe.complete():xe.next(De)},0,!0)}),()=>(0,ce.m)(Oe?.return)&&Oe.return()})}(he,ke);if((0,ft.L)(he))return function ct(he,ke){return J((0,ft.Q)(he),ke)}(he,ke)}throw(0,Ae.z)(he)}(he,ke):(0,p.Xf)(he)}},4829:(ot,ve,R)=>{R.d(ve,{Xf:()=>Ne});var p=R(7582),z=R(4266),B=R(4026),Q=R(5592),K=R(8382),de=R(5726),fe=R(9853),Ce=R(3664),ce=R(541),V=R(4674),F=R(3894),J=R(4850);function Ne(ue){if(ue instanceof Q.y)return ue;if(null!=ue){if((0,K.c)(ue))return function we(ue){return new Q.y(Ie=>{const he=ue[J.L]();if((0,V.m)(he.subscribe))return he.subscribe(Ie);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ue);if((0,z.z)(ue))return function Ke(ue){return new Q.y(Ie=>{for(let he=0;he<ue.length&&!Ie.closed;he++)Ie.next(ue[he]);Ie.complete()})}(ue);if((0,B.t)(ue))return function at(ue){return new Q.y(Ie=>{ue.then(he=>{Ie.closed||(Ie.next(he),Ie.complete())},he=>Ie.error(he)).then(null,F.h)})}(ue);if((0,de.D)(ue))return Ae(ue);if((0,Ce.T)(ue))return function ze(ue){return new Q.y(Ie=>{for(const he of ue)if(Ie.next(he),Ie.closed)return;Ie.complete()})}(ue);if((0,ce.L)(ue))return function ft(ue){return Ae((0,ce.Q)(ue))}(ue)}throw(0,fe.z)(ue)}function Ae(ue){return new Q.y(Ie=>{(function ct(ue,Ie){var he,ke,xe,Oe;return(0,p.mG)(this,void 0,void 0,function*(){try{for(he=(0,p.KL)(ue);!(ke=yield he.next()).done;)if(Ie.next(ke.value),Ie.closed)return}catch(De){xe={error:De}}finally{try{ke&&!ke.done&&(Oe=he.return)&&(yield Oe.call(he))}finally{if(xe)throw xe.error}}Ie.complete()})})(ue,Ie).catch(he=>Ie.error(he))})}},2096:(ot,ve,R)=>{R.d(ve,{of:()=>B});var p=R(4564),z=R(2459);function B(...Q){const K=(0,p.yG)(Q);return(0,z.D)(Q,K)}},8251:(ot,ve,R)=>{R.d(ve,{x:()=>z});var p=R(305);function z(Q,K,de,fe,Ce){return new B(Q,K,de,fe,Ce)}class B extends p.Lv{constructor(K,de,fe,Ce,ce,V){super(K),this.onFinalize=ce,this.shouldUnsubscribe=V,this._next=de?function(F){try{de(F)}catch(J){K.error(J)}}:super._next,this._error=Ce?function(F){try{Ce(F)}catch(J){K.error(J)}finally{this.unsubscribe()}}:super._error,this._complete=fe?function(){try{fe()}catch(F){K.error(F)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var K;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:de}=this;super.unsubscribe(),!de&&(null===(K=this.onFinalize)||void 0===K||K.call(this))}}}},7398:(ot,ve,R)=>{R.d(ve,{U:()=>B});var p=R(9360),z=R(8251);function B(Q,K){return(0,p.e)((de,fe)=>{let Ce=0;de.subscribe((0,z.x)(fe,ce=>{fe.next(Q.call(K,ce,Ce++))}))})}},7537:(ot,ve,R)=>{R.d(ve,{J:()=>B});var p=R(1631),z=R(2737);function B(Q=1/0){return(0,p.z)(z.y,Q)}},1631:(ot,ve,R)=>{R.d(ve,{z:()=>Ce});var p=R(7398),z=R(4829),B=R(9360),Q=R(7103),K=R(8251),fe=R(4674);function Ce(ce,V,F=1/0){return(0,fe.m)(V)?Ce((J,Ne)=>(0,p.U)((we,Ke)=>V(J,we,Ne,Ke))((0,z.Xf)(ce(J,Ne))),F):("number"==typeof V&&(F=V),(0,B.e)((J,Ne)=>function de(ce,V,F,J,Ne,we,Ke,at){const ze=[];let Ae=0,ft=0,ct=!1;const ue=()=>{ct&&!ze.length&&!Ae&&V.complete()},Ie=ke=>Ae<J?he(ke):ze.push(ke),he=ke=>{we&&V.next(ke),Ae++;let xe=!1;(0,z.Xf)(F(ke,ft++)).subscribe((0,K.x)(V,Oe=>{Ne?.(Oe),we?Ie(Oe):V.next(Oe)},()=>{xe=!0},void 0,()=>{if(xe)try{for(Ae--;ze.length&&Ae<J;){const Oe=ze.shift();Ke?(0,Q.f)(V,Ke,()=>he(Oe)):he(Oe)}ue()}catch(Oe){V.error(Oe)}}))};return ce.subscribe((0,K.x)(V,Ie,()=>{ct=!0,ue()})),()=>{at?.()}}(J,Ne,ce,F)))}},3093:(ot,ve,R)=>{R.d(ve,{Q:()=>Q});var p=R(7103),z=R(9360),B=R(8251);function Q(K,de=0){return(0,z.e)((fe,Ce)=>{fe.subscribe((0,B.x)(Ce,ce=>(0,p.f)(Ce,K,()=>Ce.next(ce),de),()=>(0,p.f)(Ce,K,()=>Ce.complete(),de),ce=>(0,p.f)(Ce,K,()=>Ce.error(ce),de)))})}},5137:(ot,ve,R)=>{R.d(ve,{R:()=>z});var p=R(9360);function z(B,Q=0){return(0,p.e)((K,de)=>{de.add(B.schedule(()=>K.subscribe(de),Q))})}},4664:(ot,ve,R)=>{R.d(ve,{w:()=>Q});var p=R(4829),z=R(9360),B=R(8251);function Q(K,de){return(0,z.e)((fe,Ce)=>{let ce=null,V=0,F=!1;const J=()=>F&&!ce&&Ce.complete();fe.subscribe((0,B.x)(Ce,Ne=>{ce?.unsubscribe();let we=0;const Ke=V++;(0,p.Xf)(K(Ne,Ke)).subscribe(ce=(0,B.x)(Ce,at=>Ce.next(de?de(Ne,at,Ke,we++):at),()=>{ce=null,J()}))},()=>{F=!0,J()}))})}},9397:(ot,ve,R)=>{R.d(ve,{b:()=>K});var p=R(4674),z=R(9360),B=R(8251),Q=R(2737);function K(de,fe,Ce){const ce=(0,p.m)(de)||fe||Ce?{next:de,error:fe,complete:Ce}:de;return ce?(0,z.e)((V,F)=>{var J;null===(J=ce.subscribe)||void 0===J||J.call(ce);let Ne=!0;V.subscribe((0,B.x)(F,we=>{var Ke;null===(Ke=ce.next)||void 0===Ke||Ke.call(ce,we),F.next(we)},()=>{var we;Ne=!1,null===(we=ce.complete)||void 0===we||we.call(ce),F.complete()},we=>{var Ke;Ne=!1,null===(Ke=ce.error)||void 0===Ke||Ke.call(ce,we),F.error(we)},()=>{var we,Ke;Ne&&(null===(we=ce.unsubscribe)||void 0===we||we.call(ce)),null===(Ke=ce.finalize)||void 0===Ke||Ke.call(ce)}))}):Q.y}},1954:(ot,ve,R)=>{R.d(ve,{o:()=>K});var p=R(7394);class z extends p.w0{constructor(fe,Ce){super()}schedule(fe,Ce=0){return this}}const B={setInterval(de,fe,...Ce){const{delegate:ce}=B;return ce?.setInterval?ce.setInterval(de,fe,...Ce):setInterval(de,fe,...Ce)},clearInterval(de){const{delegate:fe}=B;return(fe?.clearInterval||clearInterval)(de)},delegate:void 0};var Q=R(9039);class K extends z{constructor(fe,Ce){super(fe,Ce),this.scheduler=fe,this.work=Ce,this.pending=!1}schedule(fe,Ce=0){var ce;if(this.closed)return this;this.state=fe;const V=this.id,F=this.scheduler;return null!=V&&(this.id=this.recycleAsyncId(F,V,Ce)),this.pending=!0,this.delay=Ce,this.id=null!==(ce=this.id)&&void 0!==ce?ce:this.requestAsyncId(F,this.id,Ce),this}requestAsyncId(fe,Ce,ce=0){return B.setInterval(fe.flush.bind(fe,this),ce)}recycleAsyncId(fe,Ce,ce=0){if(null!=ce&&this.delay===ce&&!1===this.pending)return Ce;null!=Ce&&B.clearInterval(Ce)}execute(fe,Ce){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ce=this._execute(fe,Ce);if(ce)return ce;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(fe,Ce){let V,ce=!1;try{this.work(fe)}catch(F){ce=!0,V=F||new Error("Scheduled action threw falsy error")}if(ce)return this.unsubscribe(),V}unsubscribe(){if(!this.closed){const{id:fe,scheduler:Ce}=this,{actions:ce}=Ce;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Q.P)(ce,this),null!=fe&&(this.id=this.recycleAsyncId(Ce,fe,null)),this.delay=null,super.unsubscribe()}}}},9931:(ot,ve,R)=>{R.d(ve,{v:()=>B});const p={now:()=>(p.delegate||Date).now(),delegate:void 0};class z{constructor(K,de=z.now){this.schedulerActionCtor=K,this.now=de}schedule(K,de=0,fe){return new this.schedulerActionCtor(this,K).schedule(fe,de)}}z.now=p.now;class B extends z{constructor(K,de=z.now){super(K,de),this.actions=[],this._active=!1}flush(K){const{actions:de}=this;if(this._active)return void de.push(K);let fe;this._active=!0;do{if(fe=K.execute(K.state,K.delay))break}while(K=de.shift());if(this._active=!1,fe){for(;K=de.shift();)K.unsubscribe();throw fe}}}},6321:(ot,ve,R)=>{R.d(ve,{z:()=>B});var p=R(1954);const B=new(R(9931).v)(p.o)},7599:(ot,ve,R)=>{R.d(ve,{z:()=>p});const p={setTimeout(z,B,...Q){const{delegate:K}=p;return K?.setTimeout?K.setTimeout(z,B,...Q):setTimeout(z,B,...Q)},clearTimeout(z){const{delegate:B}=p;return(B?.clearTimeout||clearTimeout)(z)},delegate:void 0}},4971:(ot,ve,R)=>{R.d(ve,{h:()=>z});const z=function p(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},4850:(ot,ve,R)=>{R.d(ve,{L:()=>p});const p="function"==typeof Symbol&&Symbol.observable||"@@observable"},4564:(ot,ve,R)=>{R.d(ve,{_6:()=>de,jO:()=>Q,yG:()=>K});var p=R(4674);function B(fe){return fe[fe.length-1]}function Q(fe){return(0,p.m)(B(fe))?fe.pop():void 0}function K(fe){return function z(fe){return fe&&(0,p.m)(fe.schedule)}(B(fe))?fe.pop():void 0}function de(fe,Ce){return"number"==typeof B(fe)?fe.pop():Ce}},9039:(ot,ve,R)=>{function p(z,B){if(z){const Q=z.indexOf(B);0<=Q&&z.splice(Q,1)}}R.d(ve,{P:()=>p})},2306:(ot,ve,R)=>{function p(z){const Q=z(K=>{Error.call(K),K.stack=(new Error).stack});return Q.prototype=Object.create(Error.prototype),Q.prototype.constructor=Q,Q}R.d(ve,{d:()=>p})},1441:(ot,ve,R)=>{R.d(ve,{O:()=>Q,x:()=>B});var p=R(2653);let z=null;function B(K){if(p.config.useDeprecatedSynchronousErrorHandling){const de=!z;if(de&&(z={errorThrown:!1,error:null}),K(),de){const{errorThrown:fe,error:Ce}=z;if(z=null,fe)throw Ce}}else K()}function Q(K){p.config.useDeprecatedSynchronousErrorHandling&&z&&(z.errorThrown=!0,z.error=K)}},7103:(ot,ve,R)=>{function p(z,B,Q,K=0,de=!1){const fe=B.schedule(function(){Q(),de?z.add(this.schedule(null,K)):this.unsubscribe()},K);if(z.add(fe),!de)return fe}R.d(ve,{f:()=>p})},2737:(ot,ve,R)=>{function p(z){return z}R.d(ve,{y:()=>p})},4266:(ot,ve,R)=>{R.d(ve,{z:()=>p});const p=z=>z&&"number"==typeof z.length&&"function"!=typeof z},5726:(ot,ve,R)=>{R.d(ve,{D:()=>z});var p=R(4674);function z(B){return Symbol.asyncIterator&&(0,p.m)(B?.[Symbol.asyncIterator])}},4674:(ot,ve,R)=>{function p(z){return"function"==typeof z}R.d(ve,{m:()=>p})},8382:(ot,ve,R)=>{R.d(ve,{c:()=>B});var p=R(4850),z=R(4674);function B(Q){return(0,z.m)(Q[p.L])}},3664:(ot,ve,R)=>{R.d(ve,{T:()=>B});var p=R(4971),z=R(4674);function B(Q){return(0,z.m)(Q?.[p.h])}},4026:(ot,ve,R)=>{R.d(ve,{t:()=>z});var p=R(4674);function z(B){return(0,p.m)(B?.then)}},541:(ot,ve,R)=>{R.d(ve,{L:()=>Q,Q:()=>B});var p=R(7582),z=R(4674);function B(K){return(0,p.FC)(this,arguments,function*(){const fe=K.getReader();try{for(;;){const{value:Ce,done:ce}=yield(0,p.qq)(fe.read());if(ce)return yield(0,p.qq)(void 0);yield yield(0,p.qq)(Ce)}}finally{fe.releaseLock()}})}function Q(K){return(0,z.m)(K?.getReader)}},9360:(ot,ve,R)=>{R.d(ve,{A:()=>z,e:()=>B});var p=R(4674);function z(Q){return(0,p.m)(Q?.lift)}function B(Q){return K=>{if(z(K))return K.lift(function(de){try{return Q(de,this)}catch(fe){this.error(fe)}});throw new TypeError("Unable to lift unknown Observable type")}}},2420:(ot,ve,R)=>{function p(){}R.d(ve,{Z:()=>p})},8407:(ot,ve,R)=>{R.d(ve,{U:()=>B,z:()=>z});var p=R(2737);function z(...Q){return B(Q)}function B(Q){return 0===Q.length?p.y:1===Q.length?Q[0]:function(de){return Q.reduce((fe,Ce)=>Ce(fe),de)}}},3894:(ot,ve,R)=>{R.d(ve,{h:()=>B});var p=R(2653),z=R(7599);function B(Q){z.z.setTimeout(()=>{const{onUnhandledError:K}=p.config;if(!K)throw Q;K(Q)})}},9853:(ot,ve,R)=>{function p(z){return new TypeError(`You provided ${null!==z&&"object"==typeof z?"an invalid object":`'${z}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}R.d(ve,{z:()=>p})},4946:(ot,ve,R)=>{R.d(ve,{QbO:()=>LO,tb:()=>_d,AFp:()=>vI,ip1:()=>j0,hGG:()=>OC,z2F:()=>Ba,Ojb:()=>VO,sBO:()=>VR,Sil:()=>sC,EJc:()=>dd,Xts:()=>Lh,SBq:()=>Gh,lqb:()=>Ss,qLn:()=>Ta,vpe:()=>xs,XFs:()=>Ge,OlP:()=>Xt,zs3:()=>Ao,ZZ4:()=>lu,aQg:()=>P_,soG:()=>Kf,YKP:()=>Pa,h0i:()=>Fs,PXZ:()=>pC,R0b:()=>Wn,FiY:()=>wm,Lbi:()=>Bh,g9A:()=>bI,Qsj:()=>ig,FYo:()=>NI,JOm:()=>pl,tp0:()=>Dh,Rgc:()=>fo,dDg:()=>NR,eoX:()=>Z0,q4F:()=>OI,GfV:()=>kI,s_b:()=>po,ifc:()=>Ki,VuI:()=>UC,MMx:()=>Ii,Lck:()=>eR,eFA:()=>_C,Gpc:()=>Oe,f3M:()=>We,X6Q:()=>eE,$WT:()=>zo,_c5:()=>rE,qFp:()=>XR,rg0:()=>ju,c2e:()=>oC,zSh:()=>gI,HDt:()=>$0,wAp:()=>Wc,vHH:()=>Ye,lri:()=>Qf,rWj:()=>K0,cg1:()=>a0,kL8:()=>c0,dqk:()=>an,Z0I:()=>Br,eJc:()=>$f,QGY:()=>Lg,F4k:()=>Vg,RDi:()=>WS,AaK:()=>he,qOj:()=>bb,Xq5:()=>Ib,TTD:()=>th,_Bn:()=>Nf,jDz:()=>x0,xp6:()=>Fx,uIk:()=>Dg,ekj:()=>_f,Suo:()=>jT,Xpm:()=>Vp,lG2:()=>rc,Yz7:()=>yn,cJS:()=>Ot,oAB:()=>Up,Yjl:()=>Bp,Y36:()=>Kh,_UZ:()=>Og,qZA:()=>kg,TgZ:()=>Ul,EpF:()=>Ub,n5z:()=>x,LFG:()=>ge,$8M:()=>Le,$Z:()=>Vx,NdJ:()=>Ug,CRH:()=>P0,oxw:()=>yr,Q6J:()=>Ob,MGl:()=>Hg,iGM:()=>O0,KtG:()=>oh,CHM:()=>qy,LSH:()=>Rv,P3R:()=>ox,YNc:()=>Mg,_uU:()=>BD,Oqu:()=>Hl,hij:()=>Ef,AsE:()=>pn});var p=R(8645),z=R(7394),B=R(5592),Q=R(7537),K=R(4829),de=R(6232),fe=R(4564),Ce=R(2459),V=R(5619),F=R(2096),J=R(305),Ne=R(9360);function we(o={}){const{connector:s=(()=>new p.x),resetOnError:c=!0,resetOnComplete:l=!0,resetOnRefCountZero:d=!0}=o;return f=>{let g,y,b,I=0,C=!1,M=!1;const L=()=>{y?.unsubscribe(),y=void 0},H=()=>{L(),g=b=void 0,C=M=!1},se=()=>{const Ee=g;H(),Ee?.unsubscribe()};return(0,Ne.e)((Ee,Pe)=>{I++,!M&&!C&&L();const Je=b=b??s();Pe.add(()=>{I--,0===I&&!M&&!C&&(y=Ke(se,d))}),Je.subscribe(Pe),!g&&I>0&&(g=new J.Hp({next:me=>Je.next(me),error:me=>{M=!0,L(),y=Ke(H,c,me),Je.error(me)},complete:()=>{C=!0,L(),y=Ke(H,l),Je.complete()}}),(0,K.Xf)(Ee).subscribe(g))})(f)}}function Ke(o,s,...c){if(!0===s)return void o();if(!1===s)return;const l=new J.Hp({next:()=>{l.unsubscribe(),o()}});return(0,K.Xf)(s(...c)).subscribe(l)}var at=R(4664),ze=R(2737),Ae=R(8251);function ct(o,s){return o===s}function ue(o){for(let s in o)if(o[s]===ue)return s;throw Error("Could not find renamed property on target object.")}function Ie(o,s){for(const c in s)s.hasOwnProperty(c)&&!o.hasOwnProperty(c)&&(o[c]=s[c])}function he(o){if("string"==typeof o)return o;if(Array.isArray(o))return"["+o.map(he).join(", ")+"]";if(null==o)return""+o;if(o.overriddenName)return`${o.overriddenName}`;if(o.name)return`${o.name}`;const s=o.toString();if(null==s)return""+s;const c=s.indexOf("\n");return-1===c?s:s.substring(0,c)}function ke(o,s){return null==o||""===o?null===s?"":s:null==s||""===s?o:o+" "+s}const xe=ue({__forward_ref__:ue});function Oe(o){return o.__forward_ref__=Oe,o.toString=function(){return he(this())},o}function De(o){return Et(o)?o():o}function Et(o){return"function"==typeof o&&o.hasOwnProperty(xe)&&o.__forward_ref__===Oe}function zn(o){return o&&!!o.\u0275providers}const ai="https://g.co/ng/security#xss";class Ye extends Error{constructor(s,c){super(function nr(o,s){return`NG0${Math.abs(o)}${s?": "+s:""}`}(s,c)),this.code=s}}function lt(o){return"string"==typeof o?o:null==o?"":String(o)}function ae(o,s){throw new Ye(-201,!1)}function An(o,s){null==o&&function dt(o,s,c,l){throw new Error(`ASSERTION ERROR: ${o}`+(null==l?"":` [Expected=> ${c} ${l} ${s} <=Actual]`))}(s,o,null,"!=")}function yn(o){return{token:o.token,providedIn:o.providedIn||null,factory:o.factory,value:void 0}}function Ot(o){return{providers:o.providers||[],imports:o.imports||[]}}function wt(o){return Tr(o,Sn)||Tr(o,sn)}function Br(o){return null!==wt(o)}function Tr(o,s){return o.hasOwnProperty(s)?o[s]:null}function jr(o){return o&&(o.hasOwnProperty(ps)||o.hasOwnProperty(Wi))?o[ps]:null}const Sn=ue({\u0275prov:ue}),ps=ue({\u0275inj:ue}),sn=ue({ngInjectableDef:ue}),Wi=ue({ngInjectorDef:ue});var Ge=function(o){return o[o.Default=0]="Default",o[o.Host=1]="Host",o[o.Self=2]="Self",o[o.SkipSelf=4]="SkipSelf",o[o.Optional=8]="Optional",o}(Ge||{});let ms;function Qn(o){const s=ms;return ms=o,s}function $r(o,s,c){const l=wt(o);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:c&Ge.Optional?null:void 0!==s?s:void ae(he(o))}const an=globalThis,Ft={},Xn="__NG_DI_FLAG__",xn="ngTempTokenPath",Bt=/\n/gm,Ni="__source";let di;function te(o){const s=di;return di=o,s}function G(o,s=Ge.Default){if(void 0===di)throw new Ye(-203,!1);return null===di?$r(o,void 0,s):di.get(o,s&Ge.Optional?null:void 0,s)}function ge(o,s=Ge.Default){return(function $o(){return ms}()||G)(De(o),s)}function We(o,s=Ge.Default){return ge(o,Dt(s))}function Dt(o){return typeof o>"u"||"number"==typeof o?o:0|(o.optional&&8)|(o.host&&1)|(o.self&&2)|(o.skipSelf&&4)}function Kt(o){const s=[];for(let c=0;c<o.length;c++){const l=De(o[c]);if(Array.isArray(l)){if(0===l.length)throw new Ye(900,!1);let d,f=Ge.Default;for(let g=0;g<l.length;g++){const y=l[g],b=Gn(y);"number"==typeof b?-1===b?d=y.token:f|=b:d=y}s.push(ge(d,f))}else s.push(ge(l))}return s}function Mn(o,s){return o[Xn]=s,o.prototype[Xn]=s,o}function Gn(o){return o[Xn]}function hi(o){return{toString:o}.toString()}var nc=function(o){return o[o.OnPush=0]="OnPush",o[o.Default=1]="Default",o}(nc||{}),Ki=function(o){return o[o.Emulated=0]="Emulated",o[o.None=2]="None",o[o.ShadowDom=3]="ShadowDom",o}(Ki||{});const Zi={},Lt=[],wu=ue({\u0275cmp:ue}),yo=ue({\u0275dir:ue}),Iu=ue({\u0275pipe:ue}),sw=ue({\u0275mod:ue}),zr=ue({\u0275fac:ue}),Du=ue({__NG_ELEMENT_ID__:ue}),Np=ue({__NG_ENV_ID__:ue});function Tu(o,s,c){let l=o.length;for(;;){const d=o.indexOf(s,c);if(-1===d)return d;if(0===d||o.charCodeAt(d-1)<=32){const f=s.length;if(d+f===l||o.charCodeAt(d+f)<=32)return d}c=d+1}}function _s(o,s,c){let l=0;for(;l<c.length;){const d=c[l];if("number"==typeof d){if(0!==d)break;l++;const f=c[l++],g=c[l++],y=c[l++];o.setAttribute(s,g,y,f)}else{const f=d,g=c[++l];kp(f)?o.setProperty(s,f,g):o.setAttribute(s,f,g),l++}}return l}function Ud(o){return 3===o||4===o||6===o}function kp(o){return 64===o.charCodeAt(0)}function Cu(o,s){if(null!==s&&0!==s.length)if(null===o||0===o.length)o=s.slice();else{let c=-1;for(let l=0;l<s.length;l++){const d=s[l];"number"==typeof d?c=d:0===c||Bd(o,c,d,null,-1===c||2===c?s[++l]:null)}}return o}function Bd(o,s,c,l,d){let f=0,g=o.length;if(-1===s)g=-1;else for(;f<o.length;){const y=o[f++];if("number"==typeof y){if(y===s){g=-1;break}if(y>s){g=f-1;break}}}for(;f<o.length;){const y=o[f];if("number"==typeof y)break;if(y===c){if(null===l)return void(null!==d&&(o[f+1]=d));if(l===o[f+1])return void(o[f+2]=d)}f++,null!==l&&f++,null!==d&&f++}-1!==g&&(o.splice(g,0,s),f=g+1),o.splice(f++,0,c),null!==l&&o.splice(f++,0,l),null!==d&&o.splice(f++,0,d)}const gy="ng-template";function Op(o,s,c){let l=0,d=!0;for(;l<o.length;){let f=o[l++];if("string"==typeof f&&d){const g=o[l++];if(c&&"class"===f&&-1!==Tu(g.toLowerCase(),s,0))return!0}else{if(1===f){for(;l<o.length&&"string"==typeof(f=o[l++]);)if(f.toLowerCase()===s)return!0;return!1}"number"==typeof f&&(d=!1)}}return!1}function Pp(o){return 4===o.type&&o.value!==gy}function aw(o,s,c){return s===(4!==o.type||c?o.value:gy)}function vi(o,s,c){let l=4;const d=o.attrs||[],f=function yy(o){for(let s=0;s<o.length;s++)if(Ud(o[s]))return s;return o.length}(d);let g=!1;for(let y=0;y<s.length;y++){const b=s[y];if("number"!=typeof b){if(!g)if(4&l){if(l=2|1&l,""!==b&&!aw(o,b,c)||""===b&&1===s.length){if(ki(l))return!1;g=!0}}else{const I=8&l?b:s[++y];if(8&l&&null!==o.attrs){if(!Op(o.attrs,I,c)){if(ki(l))return!1;g=!0}continue}const M=Gr(8&l?"class":b,d,Pp(o),c);if(-1===M){if(ki(l))return!1;g=!0;continue}if(""!==I){let L;L=M>f?"":d[M+1].toLowerCase();const H=8&l?L:null;if(H&&-1!==Tu(H,I,0)||2&l&&I!==L){if(ki(l))return!1;g=!0}}}}else{if(!g&&!ki(l)&&!ki(b))return!1;if(g&&ki(b))continue;g=!1,l=b|1&l}}return ki(l)||g}function ki(o){return 0==(1&o)}function Gr(o,s,c,l){if(null===s)return-1;let d=0;if(l||!c){let f=!1;for(;d<s.length;){const g=s[d];if(g===o)return d;if(3===g||6===g)f=!0;else{if(1===g||2===g){let y=s[++d];for(;"string"==typeof y;)y=s[++d];continue}if(4===g)break;if(0===g){d+=4;continue}}d+=f?1:2}return-1}return function Lp(o,s){let c=o.indexOf(4);if(c>-1)for(c++;c<o.length;){const l=o[c];if("number"==typeof l)return-1;if(l===s)return c;c++}return-1}(s,o)}function Fp(o,s,c=!1){for(let l=0;l<s.length;l++)if(vi(o,s[l],c))return!0;return!1}function Au(o,s){return o?":not("+s.trim()+")":s}function cw(o){let s=o[0],c=1,l=2,d="",f=!1;for(;c<o.length;){let g=o[c];if("string"==typeof g)if(2&l){const y=o[++c];d+="["+g+(y.length>0?'="'+y+'"':"")+"]"}else 8&l?d+="."+g:4&l&&(d+=" "+g);else""!==d&&!ki(g)&&(s+=Au(f,d),d=""),l=g,f=f||!ki(l);c++}return""!==d&&(s+=Au(f,d)),s}function Vp(o){return hi(()=>{const s=Iy(o),c={...s,decls:o.decls,vars:o.vars,template:o.template,consts:o.consts||null,ngContentSelectors:o.ngContentSelectors,onPush:o.changeDetection===nc.OnPush,directiveDefs:null,pipeDefs:null,dependencies:s.standalone&&o.dependencies||null,getStandaloneInjector:null,signals:o.signals??!1,data:o.data||{},encapsulation:o.encapsulation||Ki.Emulated,styles:o.styles||Lt,_:null,schemas:o.schemas||null,tView:null,id:""};Dy(c);const l=o.dependencies;return c.directiveDefs=Su(l,!1),c.pipeDefs=Su(l,!0),c.id=function Ty(o){let s=0;const c=[o.selectors,o.ngContentSelectors,o.hostVars,o.hostAttrs,o.consts,o.vars,o.decls,o.encapsulation,o.standalone,o.signals,o.exportAs,JSON.stringify(o.inputs),JSON.stringify(o.outputs),Object.getOwnPropertyNames(o.type.prototype),!!o.contentQueries,!!o.viewQuery].join("|");for(const d of c)s=Math.imul(31,s)+d.charCodeAt(0)<<0;return s+=2147483648,"c"+s}(c),c})}function $d(o){return jt(o)||ir(o)}function uw(o){return null!==o}function Up(o){return hi(()=>({type:o.type,bootstrap:o.bootstrap||Lt,declarations:o.declarations||Lt,imports:o.imports||Lt,exports:o.exports||Lt,transitiveCompileScopes:null,schemas:o.schemas||null,id:o.id||null}))}function wy(o,s){if(null==o)return Zi;const c={};for(const l in o)if(o.hasOwnProperty(l)){let d=o[l],f=d;Array.isArray(d)&&(f=d[1],d=d[0]),c[d]=l,s&&(s[d]=f)}return c}function rc(o){return hi(()=>{const s=Iy(o);return Dy(s),s})}function Bp(o){return{type:o.type,name:o.name,factory:null,pure:!1!==o.pure,standalone:!0===o.standalone,onDestroy:o.type.prototype.ngOnDestroy||null}}function jt(o){return o[wu]||null}function ir(o){return o[yo]||null}function Ar(o){return o[Iu]||null}function zo(o){const s=jt(o)||ir(o)||Ar(o);return null!==s&&s.standalone}function Sr(o,s){const c=o[sw]||null;if(!c&&!0===s)throw new Error(`Type ${he(o)} does not have '\u0275mod' property.`);return c}function Iy(o){const s={};return{type:o.type,providersResolver:null,factory:null,hostBindings:o.hostBindings||null,hostVars:o.hostVars||0,hostAttrs:o.hostAttrs||null,contentQueries:o.contentQueries||null,declaredInputs:s,inputTransforms:null,inputConfig:o.inputs||Zi,exportAs:o.exportAs||null,standalone:!0===o.standalone,signals:!0===o.signals,selectors:o.selectors||Lt,viewQuery:o.viewQuery||null,features:o.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:wy(o.inputs,s),outputs:wy(o.outputs)}}function Dy(o){o.features?.forEach(s=>s(o))}function Su(o,s){if(!o)return null;const c=s?Ar:$d;return()=>("function"==typeof o?o():o).map(l=>c(l)).filter(uw)}const ln=0,Ue=1,Tt=2,dn=3,Yi=4,xu=5,xr=6,na=7,Vn=8,Qi=9,ic=10,mt=11,Mu=12,oc=13,ra=14,Rn=15,sc=16,ys=17,Mr=18,ia=19,Hd=20,Xi=21,vo=22,Ru=23,oa=24,Pt=25,zd=1,bo=2,Oi=7,Go=9,fr=11;function Rr(o){return Array.isArray(o)&&"object"==typeof o[zd]}function Nr(o){return Array.isArray(o)&&!0===o[zd]}function Gd(o){return 0!=(4&o.flags)}function vs(o){return o.componentOffset>-1}function qd(o){return 1==(1&o.flags)}function zt(o){return!!o.template}function $p(o){return 0!=(512&o[Tt])}function eo(o,s){return o.hasOwnProperty(zr)?o[zr]:null}let pr=null,lc=!1;function Pi(o){const s=pr;return pr=o,s}const Zd={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function ku(o){if(!Pu(o)||o.dirty){if(!o.producerMustRecompute(o)&&!Ry(o))return void(o.dirty=!1);o.producerRecomputeValue(o),o.dirty=!1}}function Ou(o){o.dirty=!0,function Yd(o){if(void 0===o.liveConsumerNode)return;const s=lc;lc=!0;try{for(const c of o.liveConsumerNode)c.dirty||Ou(c)}finally{lc=s}}(o),o.consumerMarkedDirty?.(o)}function Qd(o){return o&&(o.nextProducerIndex=0),Pi(o)}function qp(o,s){if(Pi(s),o&&void 0!==o.producerNode&&void 0!==o.producerIndexOfThis&&void 0!==o.producerLastReadVersion){if(Pu(o))for(let c=o.nextProducerIndex;c<o.producerNode.length;c++)hc(o.producerNode[c],o.producerIndexOfThis[c]);for(;o.producerNode.length>o.nextProducerIndex;)o.producerNode.pop(),o.producerLastReadVersion.pop(),o.producerIndexOfThis.pop()}}function Ry(o){bs(o);for(let s=0;s<o.producerNode.length;s++){const c=o.producerNode[s],l=o.producerLastReadVersion[s];if(l!==c.version||(ku(c),l!==c.version))return!0}return!1}function Xd(o){if(bs(o),Pu(o))for(let s=0;s<o.producerNode.length;s++)hc(o.producerNode[s],o.producerIndexOfThis[s]);o.producerNode.length=o.producerLastReadVersion.length=o.producerIndexOfThis.length=0,o.liveConsumerNode&&(o.liveConsumerNode.length=o.liveConsumerIndexOfThis.length=0)}function hc(o,s){if(function Kp(o){o.liveConsumerNode??=[],o.liveConsumerIndexOfThis??=[]}(o),bs(o),1===o.liveConsumerNode.length)for(let l=0;l<o.producerNode.length;l++)hc(o.producerNode[l],o.producerIndexOfThis[l]);const c=o.liveConsumerNode.length-1;if(o.liveConsumerNode[s]=o.liveConsumerNode[c],o.liveConsumerIndexOfThis[s]=o.liveConsumerIndexOfThis[c],o.liveConsumerNode.length--,o.liveConsumerIndexOfThis.length--,s<o.liveConsumerNode.length){const l=o.liveConsumerIndexOfThis[s],d=o.liveConsumerNode[s];bs(d),d.producerIndexOfThis[l]=s}}function Pu(o){return o.consumerIsAlwaysLive||(o?.liveConsumerNode?.length??0)>0}function bs(o){o.producerNode??=[],o.producerIndexOfThis??=[],o.producerLastReadVersion??=[]}let Zp=null;function ju(o){const s=Pi(null);try{return o()}finally{Pi(s)}}const $u=()=>{},Fy=(()=>({...Zd,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:o=>{o.schedule(o.ref)},hasRun:!1,cleanupFn:$u}))();class Ly{constructor(s,c,l){this.previousValue=s,this.currentValue=c,this.firstChange=l}isFirstChange(){return this.firstChange}}function th(){return pc}function pc(o){return o.type.prototype.ngOnChanges&&(o.setInput=zu),Hu}function Hu(){const o=Vy(this),s=o?.current;if(s){const c=o.previous;if(c===Zi)o.previous=s;else for(let l in s)c[l]=s[l];o.current=null,this.ngOnChanges(s)}}function zu(o,s,c,l){const d=this.declaredInputs[c],f=Vy(o)||function tm(o,s){return o[em]=s}(o,{previous:Zi,current:null}),g=f.current||(f.current={}),y=f.previous,b=y[d];g[d]=new Ly(b&&b.currentValue,s,y===Zi),o[l]=s}th.ngInherit=!0;const em="__ngSimpleChanges__";function Vy(o){return o[em]||null}const Fi=function(o,s,c){};function hn(o){for(;Array.isArray(o);)o=o[ln];return o}function ca(o,s){return hn(s[o])}function bi(o,s){return hn(s[o.index])}function ua(o,s){return o.data[s]}function fi(o,s){const c=s[o];return Rr(c)?c:c[ln]}function fn(o,s){return null==s?null:o[s]}function rm(o){o[ys]=0}function mr(o){1024&o[Tt]||(o[Tt]|=1024,Ku(o,1))}function rh(o){1024&o[Tt]&&(o[Tt]&=-1025,Ku(o,-1))}function Ku(o,s){let c=o[dn];if(null===c)return;c[xu]+=s;let l=c;for(c=c[dn];null!==c&&(1===s&&1===l[xu]||-1===s&&0===l[xu]);)c[xu]+=s,l=c,c=c[dn]}const gt={lFrame:no(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function sm(){return gt.bindingsEnabled}function ye(){return gt.lFrame.lView}function Vt(){return gt.lFrame.tView}function qy(o){return gt.lFrame.contextLView=o,o[Vn]}function oh(o){return gt.lFrame.contextLView=null,o}function or(){let o=sh();for(;null!==o&&64===o.type;)o=o.parent;return o}function sh(){return gt.lFrame.currentTNode}function wo(o,s){const c=gt.lFrame;c.currentTNode=o,c.isParent=s}function ah(){return gt.lFrame.isParent}function _c(){return gt.lFrame.bindingIndex++}function Or(o){const s=gt.lFrame,c=s.bindingIndex;return s.bindingIndex=s.bindingIndex+o,c}function da(o,s){const c=gt.lFrame;c.bindingIndex=c.bindingRootIndex=o,Qu(s)}function Qu(o){gt.lFrame.currentDirectiveIndex=o}function yc(){return gt.lFrame.currentQueryIndex}function uh(o){gt.lFrame.currentQueryIndex=o}function lh(o){const s=o[Ue];return 2===s.type?s.declTNode:1===s.type?o[xr]:null}function cm(o,s,c){if(c&Ge.SkipSelf){let d=s,f=o;for(;!(d=d.parent,null!==d||c&Ge.Host||(d=lh(f),null===d||(f=f[ra],10&d.type))););if(null===d)return!1;s=d,o=f}const l=gt.lFrame=um();return l.currentTNode=s,l.lView=o,!0}function vc(o){const s=um(),c=o[Ue];gt.lFrame=s,s.currentTNode=c.firstChild,s.lView=o,s.tView=c,s.contextLView=o,s.bindingIndex=c.bindingStartIndex,s.inI18n=!1}function um(){const o=gt.lFrame,s=null===o?null:o.child;return null===s?no(o):s}function no(o){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:o,child:null,inI18n:!1};return null!==o&&(o.child=s),s}function lm(){const o=gt.lFrame;return gt.lFrame=o.parent,o.currentTNode=null,o.lView=null,o}const dm=lm;function ha(){const o=lm();o.isParent=!0,o.tView=null,o.selectedIndex=-1,o.contextLView=null,o.elementDepthCount=0,o.currentDirectiveIndex=-1,o.currentNamespace=null,o.bindingRootIndex=-1,o.bindingIndex=-1,o.currentQueryIndex=0}function wn(){return gt.lFrame.selectedIndex}function ne(o){gt.lFrame.selectedIndex=o}function $e(){const o=gt.lFrame;return ua(o.tView,o.selectedIndex)}let dh=!0;function fm(){return dh}function fa(o){dh=o}function mm(o,s){for(let c=s.directiveStart,l=s.directiveEnd;c<l;c++){const f=o.data[c].type.prototype,{ngAfterContentInit:g,ngAfterContentChecked:y,ngAfterViewInit:b,ngAfterViewChecked:I,ngOnDestroy:C}=f;g&&(o.contentHooks??=[]).push(-c,g),y&&((o.contentHooks??=[]).push(c,y),(o.contentCheckHooks??=[]).push(c,y)),b&&(o.viewHooks??=[]).push(-c,b),I&&((o.viewHooks??=[]).push(c,I),(o.viewCheckHooks??=[]).push(c,I)),null!=C&&(o.destroyHooks??=[]).push(c,C)}}function Ju(o,s,c){hh(o,s,3,c)}function gm(o,s,c,l){(3&o[Tt])===c&&hh(o,s,c,l)}function _m(o,s){let c=o[Tt];(3&c)===s&&(c&=8191,c+=1,o[Tt]=c)}function hh(o,s,c,l){const f=l??-1,g=s.length-1;let y=0;for(let b=void 0!==l?65535&o[ys]:0;b<g;b++)if("number"==typeof s[b+1]){if(y=s[b],null!=l&&y>=l)break}else s[b]<0&&(o[ys]+=65536),(y<f||-1==f)&&(bc(o,c,s,b),o[ys]=(4294901760&o[ys])+b+2),b++}function ww(o,s){Fi(4,o,s);const c=Pi(null);try{s.call(o)}finally{Pi(c),Fi(5,o,s)}}function bc(o,s,c,l){const d=c[l]<0,f=c[l+1],y=o[d?-c[l]:c[l]];d?o[Tt]>>13<o[ys]>>16&&(3&o[Tt])===s&&(o[Tt]+=8192,ww(y,f)):ww(y,f)}const Is=-1;class Zo{constructor(s,c,l){this.factory=s,this.resolving=!1,this.canSeeViewProviders=c,this.injectImpl=l}}function Ds(o){return o!==Is}function Co(o){return 32767&o}function wc(o,s){let c=function ph(o){return o>>16}(o),l=s;for(;c>0;)l=l[ra],c--;return l}let Ic=!0;function ro(o){const s=Ic;return Ic=o,s}const Dc=255,nl=5;let mh=0;const $t={};function Tc(o,s){const c=rl(o,s);if(-1!==c)return c;const l=s[Ue];l.firstCreatePass&&(o.injectorIndex=s.length,gh(l.data,o),gh(s,null),gh(l.blueprint,null));const d=Ei(o,s),f=o.injectorIndex;if(Ds(d)){const g=Co(d),y=wc(d,s),b=y[Ue].data;for(let I=0;I<8;I++)s[f+I]=y[g+I]|b[g+I]}return s[f+8]=d,f}function gh(o,s){o.push(0,0,0,0,0,0,0,0,s)}function rl(o,s){return-1===o.injectorIndex||o.parent&&o.parent.injectorIndex===o.injectorIndex||null===s[o.injectorIndex+8]?-1:o.injectorIndex}function Ei(o,s){if(o.parent&&-1!==o.parent.injectorIndex)return o.parent.injectorIndex;let c=0,l=null,d=s;for(;null!==d;){if(l=re(d),null===l)return Is;if(c++,d=d[ra],-1!==l.injectorIndex)return l.injectorIndex|c<<16}return Is}function io(o,s,c){!function Nn(o,s,c){let l;"string"==typeof c?l=c.charCodeAt(0)||0:c.hasOwnProperty(Du)&&(l=c[Du]),null==l&&(l=c[Du]=mh++);const d=l&Dc;s.data[o+(d>>nl)]|=1<<d}(o,s,c)}function ym(o,s,c){if(c&Ge.Optional||void 0!==o)return o;ae()}function pa(o,s,c,l){if(c&Ge.Optional&&void 0===l&&(l=null),!(c&(Ge.Self|Ge.Host))){const d=o[Qi],f=Qn(void 0);try{return d?d.get(s,l,c&Ge.Optional):$r(s,l,c&Ge.Optional)}finally{Qn(f)}}return ym(l,0,c)}function Qo(o,s,c,l=Ge.Default,d){if(null!==o){if(2048&s[Tt]&&!(l&Ge.Self)){const g=function $(o,s,c,l,d){let f=o,g=s;for(;null!==f&&null!==g&&2048&g[Tt]&&!(512&g[Tt]);){const y=il(f,g,c,l|Ge.Self,$t);if(y!==$t)return y;let b=f.parent;if(!b){const I=g[Hd];if(I){const C=I.get(c,$t,l);if(C!==$t)return C}b=re(g),g=g[ra]}f=b}return d}(o,s,c,l,$t);if(g!==$t)return g}const f=il(o,s,c,l,$t);if(f!==$t)return f}return pa(s,c,l,d)}function il(o,s,c,l,d){const f=function ol(o){if("string"==typeof o)return o.charCodeAt(0)||0;const s=o.hasOwnProperty(Du)?o[Du]:void 0;return"number"==typeof s?s>=0?s&Dc:T:s}(c);if("function"==typeof f){if(!cm(s,o,l))return l&Ge.Host?ym(d,0,l):pa(s,c,l,d);try{let g;if(g=f(l),null!=g||l&Ge.Optional)return g;ae()}finally{dm()}}else if("number"==typeof f){let g=null,y=rl(o,s),b=Is,I=l&Ge.Host?s[Rn][xr]:null;for((-1===y||l&Ge.SkipSelf)&&(b=-1===y?Ei(o,s):s[y+8],b!==Is&&Xy(l,!1)?(g=s[Ue],y=Co(b),s=wc(b,s)):y=-1);-1!==y;){const C=s[Ue];if(_a(f,y,C.data)){const M=Ts(y,s,c,g,l,I);if(M!==$t)return M}b=s[y+8],b!==Is&&Xy(l,s[Ue].data[y+8]===I)&&_a(f,y,s)?(g=C,y=Co(b),s=wc(b,s)):y=-1}}return d}function Ts(o,s,c,l,d,f){const g=s[Ue],y=g.data[o+8],C=ma(y,g,c,null==l?vs(y)&&Ic:l!=g&&0!=(3&y.type),d&Ge.Host&&f===y);return null!==C?ga(s,g,C,y):$t}function ma(o,s,c,l,d){const f=o.providerIndexes,g=s.data,y=1048575&f,b=o.directiveStart,C=f>>20,L=d?y+C:o.directiveEnd;for(let H=l?y:y+C;H<L;H++){const se=g[H];if(H<b&&c===se||H>=b&&se.type===c)return H}if(d){const H=g[b];if(H&&zt(H)&&H.type===c)return b}return null}function ga(o,s,c,l){let d=o[c];const f=s.data;if(function qr(o){return o instanceof Zo}(d)){const g=d;g.resolving&&function ee(o,s){const c=s?`. Dependency path: ${s.join(" > ")} > ${o}`:"";throw new Ye(-200,`Circular dependency in DI detected for ${o}${c}`)}(function Ut(o){return"function"==typeof o?o.name||o.toString():"object"==typeof o&&null!=o&&"function"==typeof o.type?o.type.name||o.type.toString():lt(o)}(f[c]));const y=ro(g.canSeeViewProviders);g.resolving=!0;const I=g.injectImpl?Qn(g.injectImpl):null;cm(o,l,Ge.Default);try{d=o[c]=g.factory(void 0,f,o,l),s.firstCreatePass&&c>=l.directiveStart&&function pm(o,s,c){const{ngOnChanges:l,ngOnInit:d,ngDoCheck:f}=s.type.prototype;if(l){const g=pc(s);(c.preOrderHooks??=[]).push(o,g),(c.preOrderCheckHooks??=[]).push(o,g)}d&&(c.preOrderHooks??=[]).push(0-o,d),f&&((c.preOrderHooks??=[]).push(o,f),(c.preOrderCheckHooks??=[]).push(o,f))}(c,f[c],s)}finally{null!==I&&Qn(I),ro(y),g.resolving=!1,dm()}}return d}function _a(o,s,c){return!!(c[s+(o>>nl)]&1<<o)}function Xy(o,s){return!(o&Ge.Self||o&Ge.Host&&s)}class E{constructor(s,c){this._tNode=s,this._lView=c}get(s,c,l){return Qo(this._tNode,this._lView,s,Dt(l),c)}}function T(){return new E(or(),ye())}function x(o){return hi(()=>{const s=o.prototype.constructor,c=s[zr]||O(s),l=Object.prototype;let d=Object.getPrototypeOf(o.prototype).constructor;for(;d&&d!==l;){const f=d[zr]||O(d);if(f&&f!==c)return f;d=Object.getPrototypeOf(d)}return f=>new f})}function O(o){return Et(o)?()=>{const s=O(De(o));return s&&s()}:eo(o)}function re(o){const s=o[Ue],c=s.type;return 2===c?s.declTNode:1===c?o[xr]:null}function Le(o){return function _h(o,s){if("class"===s)return o.classes;if("style"===s)return o.styles;const c=o.attrs;if(c){const l=c.length;let d=0;for(;d<l;){const f=c[d];if(Ud(f))break;if(0===f)d+=2;else if("number"==typeof f)for(d++;d<l&&"string"==typeof c[d];)d++;else{if(f===s)return c[d+1];d+=2}}}return null}(or(),o)}const Ze="__parameters__";function Tn(o,s,c){return hi(()=>{const l=function _r(o){return function(...c){if(o){const l=o(...c);for(const d in l)this[d]=l[d]}}}(s);function d(...f){if(this instanceof d)return l.apply(this,f),this;const g=new d(...f);return y.annotation=g,y;function y(b,I,C){const M=b.hasOwnProperty(Ze)?b[Ze]:Object.defineProperty(b,Ze,{value:[]})[Ze];for(;M.length<=C;)M.push(null);return(M[C]=M[C]||[]).push(g),b}}return c&&(d.prototype=Object.create(c.prototype)),d.prototype.ngMetadataName=o,d.annotationCls=d,d})}function Ac(o,s){o.forEach(c=>Array.isArray(c)?Ac(c,s):s(c))}function ev(o,s,c){s>=o.length?o.push(c):o.splice(s,0,c)}function Eh(o,s){return s>=o.length-1?o.pop():o.splice(s,1)[0]}function Vi(o,s,c){let l=Sc(o,s);return l>=0?o[1|l]=c:(l=~l,function DS(o,s,c,l){let d=o.length;if(d==s)o.push(c,l);else if(1===d)o.push(l,o[0]),o[0]=c;else{for(d--,o.push(o[d-1],o[d]);d>s;)o[d]=o[d-2],d--;o[s]=c,o[s+1]=l}}(o,l,s,c)),l}function Tw(o,s){const c=Sc(o,s);if(c>=0)return o[1|c]}function Sc(o,s){return function Em(o,s,c){let l=0,d=o.length>>c;for(;d!==l;){const f=l+(d-l>>1),g=o[f<<c];if(s===g)return f<<c;g>s?d=f:l=f+1}return~(d<<c)}(o,s,1)}const wm=Mn(Tn("Optional"),8),Dh=Mn(Tn("SkipSelf"),4);function fl(o){return 128==(128&o.flags)}var pl=function(o){return o[o.Important=1]="Important",o[o.DashCase=2]="DashCase",o}(pl||{});const uv=new Map;let kS=0;const zw="__ngContext__";function Zr(o,s){Rr(s)?(o[zw]=s[ia],function _O(o){uv.set(o[ia],o)}(s)):o[zw]=s}let Nm;function km(o,s){return Nm(o,s)}function Mc(o){const s=o[dn];return Nr(s)?s[dn]:s}function Mh(o){return mv(o[Mu])}function Om(o){return mv(o[Yi])}function mv(o){for(;null!==o&&!Nr(o);)o=o[Yi];return o}function Ea(o,s,c,l,d){if(null!=l){let f,g=!1;Nr(l)?f=l:Rr(l)&&(g=!0,l=l[ln]);const y=hn(l);0===o&&null!==c?null==d?Lm(s,c,y):vl(s,c,y,d||null,!0):1===o&&null!==c?vl(s,c,y,d||null,!0):2===o?function jm(o,s,c){const l=bl(o,s);l&&function bv(o,s,c,l){o.removeChild(s,c,l)}(o,l,s,c)}(s,y,g):3===o&&s.destroyNode(y),null!=f&&function IO(o,s,c,l,d){const f=c[Oi];f!==hn(c)&&Ea(s,o,l,f,d);for(let y=fr;y<c.length;y++){const b=c[y];Rc(b[Ue],b,o,s,l,f)}}(s,o,f,c,d)}}function gl(o,s,c){return o.createElement(s,c)}function BS(o,s){const c=o[Go],l=c.indexOf(s);rh(s),c.splice(l,1)}function _l(o,s){if(o.length<=fr)return;const c=fr+s,l=o[c];if(l){const d=l[sc];null!==d&&d!==o&&BS(d,l),s>0&&(o[c-1][Yi]=l[Yi]);const f=Eh(o,fr+s);!function LS(o,s){Rc(o,s,s[mt],2,null,null),s[ln]=null,s[xr]=null}(l[Ue],l);const g=f[Mr];null!==g&&g.detachView(f[Ue]),l[dn]=null,l[Yi]=null,l[Tt]&=-129}return l}function kh(o,s){if(!(256&s[Tt])){const c=s[mt];s[Ru]&&Xd(s[Ru]),s[oa]&&Xd(s[oa]),c.destroyNode&&Rc(o,s,c,3,null,null),function _v(o){let s=o[Mu];if(!s)return Oh(o[Ue],o);for(;s;){let c=null;if(Rr(s))c=s[Mu];else{const l=s[fr];l&&(c=l)}if(!c){for(;s&&!s[Yi]&&s!==o;)Rr(s)&&Oh(s[Ue],s),s=s[dn];null===s&&(s=o),Rr(s)&&Oh(s[Ue],s),c=s&&s[Yi]}s=c}}(s)}}function Oh(o,s){if(!(256&s[Tt])){s[Tt]&=-129,s[Tt]|=256,function yl(o,s){let c;if(null!=o&&null!=(c=o.destroyHooks))for(let l=0;l<c.length;l+=2){const d=s[c[l]];if(!(d instanceof Zo)){const f=c[l+1];if(Array.isArray(f))for(let g=0;g<f.length;g+=2){const y=d[f[g]],b=f[g+1];Fi(4,y,b);try{b.call(y)}finally{Fi(5,y,b)}}else{Fi(4,d,f);try{f.call(d)}finally{Fi(5,d,f)}}}}}(o,s),function vv(o,s){const c=o.cleanup,l=s[na];if(null!==c)for(let f=0;f<c.length-1;f+=2)if("string"==typeof c[f]){const g=c[f+3];g>=0?l[g]():l[-g].unsubscribe(),f+=2}else c[f].call(l[c[f+1]]);null!==l&&(s[na]=null);const d=s[Xi];if(null!==d){s[Xi]=null;for(let f=0;f<d.length;f++)(0,d[f])()}}(o,s),1===s[Ue].type&&s[mt].destroy();const c=s[sc];if(null!==c&&Nr(s[dn])){c!==s[dn]&&BS(c,s);const l=s[Mr];null!==l&&l.detachView(o)}!function xc(o){uv.delete(o[ia])}(s)}}function Ww(o,s,c){return function Fm(o,s,c){let l=s;for(;null!==l&&40&l.type;)l=(s=l).parent;if(null===l)return c[ln];{const{componentOffset:d}=l;if(d>-1){const{encapsulation:f}=o.data[l.directiveStart+d];if(f===Ki.None||f===Ki.Emulated)return null}return bi(l,c)}}(o,s.parent,c)}function vl(o,s,c,l,d){o.insertBefore(s,c,l,d)}function Lm(o,s,c){o.appendChild(s,c)}function jS(o,s,c,l,d){null!==l?vl(o,s,c,l,d):Lm(o,s,c)}function bl(o,s){return o.parentNode(s)}let Kw,Xw,Gm,Um=function $S(o,s,c){return 40&o.type?bi(o,c):null};function El(o,s,c,l){const d=Ww(o,l,s),f=s[mt],y=function Vm(o,s,c){return Um(o,s,c)}(l.parent||s[xr],l,s);if(null!=d)if(Array.isArray(c))for(let b=0;b<c.length;b++)jS(f,d,c[b],y,!1);else jS(f,d,c,y,!1);void 0!==Kw&&Kw(f,l,s,c,d)}function Bm(o,s){if(null!==s){const c=s.type;if(3&c)return bi(s,o);if(4&c)return Ph(-1,o[s.index]);if(8&c){const l=s.child;if(null!==l)return Bm(o,l);{const d=o[s.index];return Nr(d)?Ph(-1,d):hn(d)}}if(32&c)return km(s,o)()||hn(o[s.index]);{const l=zS(o,s);return null!==l?Array.isArray(l)?l[0]:Bm(Mc(o[Rn]),l):Bm(o,s.next)}}return null}function zS(o,s){return null!==s?o[Rn][xr].projection[s.projection]:null}function Ph(o,s){const c=fr+o+1;if(c<s.length){const l=s[c],d=l[Ue].firstChild;if(null!==d)return Bm(l,d)}return s[Oi]}function Zw(o,s,c,l,d,f,g){for(;null!=c;){const y=l[c.index],b=c.type;if(g&&0===s&&(y&&Zr(hn(y),l),c.flags|=2),32!=(32&c.flags))if(8&b)Zw(o,s,c.child,l,d,f,!1),Ea(s,o,d,y,f);else if(32&b){const I=km(c,l);let C;for(;C=I();)Ea(s,o,d,C,f);Ea(s,o,d,y,f)}else 16&b?Hm(o,s,l,c,d,f):Ea(s,o,d,y,f);c=g?c.projectionNext:c.next}}function Rc(o,s,c,l,d,f){Zw(c,l,o.firstChild,s,d,f,!1)}function Hm(o,s,c,l,d,f){const g=c[Rn],b=g[xr].projection[l.projection];if(Array.isArray(b))for(let I=0;I<b.length;I++)Ea(s,o,d,b[I],f);else{let I=b;const C=g[dn];fl(l)&&(I.flags|=128),Zw(o,s,I,C,d,f,!0)}}function zm(o,s,c){""===c?o.removeAttribute(s,"class"):o.setAttribute(s,"class",c)}function qS(o,s,c){const{mergedAttrs:l,classes:d,styles:f}=c;null!==l&&_s(o,s,l),null!==d&&zm(o,s,d),null!==f&&function GS(o,s,c){o.setAttribute(s,"style",c)}(o,s,f)}function WS(o){Xw=o}function YS(o){return function Dv(){if(void 0===Gm&&(Gm=null,an.trustedTypes))try{Gm=an.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:o=>o,createScript:o=>o,createScriptURL:o=>o})}catch{}return Gm}()?.createScriptURL(o)||o}class Jw{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ai})`}}function Nc(o){return o instanceof Jw?o.changingThisBreaksApplicationSecurity:o}function kc(o,s){const c=function Oc(o){return o instanceof Jw&&o.getTypeName()||null}(o);if(null!=c&&c!==s){if("ResourceURL"===c&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${c} (see ${ai})`)}return c===s}const RO=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var Pc=function(o){return o[o.NONE=0]="NONE",o[o.HTML=1]="HTML",o[o.STYLE=2]="STYLE",o[o.SCRIPT=3]="SCRIPT",o[o.URL=4]="URL",o[o.RESOURCE_URL=5]="RESOURCE_URL",o}(Pc||{});function Rv(o){const s=Ym();return s?s.sanitize(Pc.URL,o)||"":kc(o,"URL")?Nc(o):function qm(o){return(o=String(o)).match(RO)?o:"unsafe:"+o}(lt(o))}function aI(o){const s=Ym();if(s)return YS(s.sanitize(Pc.RESOURCE_URL,o)||"");if(kc(o,"ResourceURL"))return YS(Nc(o));throw new Ye(904,!1)}function ox(o,s,c){return function kv(o,s){return"src"===s&&("embed"===o||"frame"===o||"iframe"===o||"media"===o||"script"===o)||"href"===s&&("base"===o||"link"===o)?aI:Rv}(s,c)(o)}function Ym(){const o=ye();return o&&o[ic].sanitizer}class Xt{constructor(s,c){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof c?this.__NG_ELEMENT_ID__=c:void 0!==c&&(this.\u0275prov=yn({token:this,providedIn:c.providedIn||"root",factory:c.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Lh=new Xt("ENVIRONMENT_INITIALIZER"),cI=new Xt("INJECTOR",-1),uI=new Xt("INJECTOR_DEF_TYPES");class Ov{get(s,c=Ft){if(c===Ft){const l=new Error(`NullInjectorError: No provider for ${he(s)}!`);throw l.name="NullInjectorError",l}return c}}function Qm(...o){return{\u0275providers:dI(0,o),\u0275fromNgModule:!0}}function dI(o,...s){const c=[],l=new Set;let d;const f=g=>{c.push(g)};return Ac(s,g=>{const y=g;Xm(y,f,[],l)&&(d||=[],d.push(y))}),void 0!==d&&hI(d,f),c}function hI(o,s){for(let c=0;c<o.length;c++){const{ngModule:l,providers:d}=o[c];Pv(d,f=>{s(f,l)})}}function Xm(o,s,c,l){if(!(o=De(o)))return!1;let d=null,f=jr(o);const g=!f&&jt(o);if(f||g){if(g&&!g.standalone)return!1;d=o}else{const b=o.ngModule;if(f=jr(b),!f)return!1;d=b}const y=l.has(d);if(g){if(y)return!1;if(l.add(d),g.dependencies){const b="function"==typeof g.dependencies?g.dependencies():g.dependencies;for(const I of b)Xm(I,s,c,l)}}else{if(!f)return!1;{if(null!=f.imports&&!y){let I;l.add(d);try{Ac(f.imports,C=>{Xm(C,s,c,l)&&(I||=[],I.push(C))})}finally{}void 0!==I&&hI(I,s)}if(!y){const I=eo(d)||(()=>new d);s({provide:d,useFactory:I,deps:Lt},d),s({provide:uI,useValue:d,multi:!0},d),s({provide:Lh,useValue:()=>ge(d),multi:!0},d)}const b=f.providers;if(null!=b&&!y){const I=o;Pv(b,C=>{s(C,I)})}}}return d!==o&&void 0!==o.providers}function Pv(o,s){for(let c of o)zn(c)&&(c=c.\u0275providers),Array.isArray(c)?Pv(c,s):s(c)}const sx=ue({provide:String,useValue:ue});function Fv(o){return null!==o&&"object"==typeof o&&sx in o}function Ia(o){return"function"==typeof o}const gI=new Xt("Set Injector scope."),Jm={},Lv={};let _I;function Dl(){return void 0===_I&&(_I=new Ov),_I}class Ss{}class Tl extends Ss{get destroyed(){return this._destroyed}constructor(s,c,l,d){super(),this.parent=c,this.source=l,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Uh(s,g=>this.processProvider(g)),this.records.set(cI,Vh(void 0,this)),d.has("environment")&&this.records.set(Ss,Vh(void 0,this));const f=this.records.get(gI);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get(uI.multi,Lt,Ge.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const c of this._ngOnDestroyHooks)c.ngOnDestroy();const s=this._onDestroyHooks;this._onDestroyHooks=[];for(const c of s)c()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(s){return this.assertNotDestroyed(),this._onDestroyHooks.push(s),()=>this.removeOnDestroy(s)}runInContext(s){this.assertNotDestroyed();const c=te(this),l=Qn(void 0);try{return s()}finally{te(c),Qn(l)}}get(s,c=Ft,l=Ge.Default){if(this.assertNotDestroyed(),s.hasOwnProperty(Np))return s[Np](this);l=Dt(l);const f=te(this),g=Qn(void 0);try{if(!(l&Ge.SkipSelf)){let b=this.records.get(s);if(void 0===b){const I=function Fc(o){return"function"==typeof o||"object"==typeof o&&o instanceof Xt}(s)&&wt(s);b=I&&this.injectableDefInScope(I)?Vh(yI(s),Jm):null,this.records.set(s,b)}if(null!=b)return this.hydrate(s,b)}return(l&Ge.Self?Dl():this.parent).get(s,c=l&Ge.Optional&&c===Ft?null:c)}catch(y){if("NullInjectorError"===y.name){if((y[xn]=y[xn]||[]).unshift(he(s)),f)throw y;return function gs(o,s,c,l){const d=o[xn];throw s[Ni]&&d.unshift(s[Ni]),o.message=function tc(o,s,c,l=null){o=o&&"\n"===o.charAt(0)&&"\u0275"==o.charAt(1)?o.slice(2):o;let d=he(s);if(Array.isArray(s))d=s.map(he).join(" -> ");else if("object"==typeof s){let f=[];for(let g in s)if(s.hasOwnProperty(g)){let y=s[g];f.push(g+":"+("string"==typeof y?JSON.stringify(y):he(y)))}d=`{${f.join(", ")}}`}return`${c}${l?"("+l+")":""}[${d}]: ${o.replace(Bt,"\n  ")}`}("\n"+o.message,d,c,l),o.ngTokenPath=d,o[xn]=null,o}(y,s,"R3InjectorError",this.source)}throw y}finally{Qn(g),te(f)}}resolveInjectorInitializers(){const s=te(this),c=Qn(void 0);try{const d=this.get(Lh.multi,Lt,Ge.Self);for(const f of d)f()}finally{te(s),Qn(c)}}toString(){const s=[],c=this.records;for(const l of c.keys())s.push(he(l));return`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ye(205,!1)}processProvider(s){let c=Ia(s=De(s))?s:De(s&&s.provide);const l=function Uv(o){return Fv(o)?Vh(void 0,o.useValue):Vh(eg(o),Jm)}(s);if(Ia(s)||!0!==s.multi)this.records.get(c);else{let d=this.records.get(c);d||(d=Vh(void 0,Jm,!0),d.factory=()=>Kt(d.multi),this.records.set(c,d)),c=s,d.multi.push(s)}this.records.set(c,l)}hydrate(s,c){return c.value===Jm&&(c.value=Lv,c.value=c.factory()),"object"==typeof c.value&&c.value&&function FO(o){return null!==o&&"object"==typeof o&&"function"==typeof o.ngOnDestroy}(c.value)&&this._ngOnDestroyHooks.add(c.value),c.value}injectableDefInScope(s){if(!s.providedIn)return!1;const c=De(s.providedIn);return"string"==typeof c?"any"===c||this.scopes.has(c):this.injectorDefTypes.has(c)}removeOnDestroy(s){const c=this._onDestroyHooks.indexOf(s);-1!==c&&this._onDestroyHooks.splice(c,1)}}function yI(o){const s=wt(o),c=null!==s?s.factory:eo(o);if(null!==c)return c;if(o instanceof Xt)throw new Ye(204,!1);if(o instanceof Function)return function Vv(o){const s=o.length;if(s>0)throw function al(o,s){const c=[];for(let l=0;l<o;l++)c.push(s);return c}(s,"?"),new Ye(204,!1);const c=function li(o){return o&&(o[Sn]||o[sn])||null}(o);return null!==c?()=>c.factory(o):()=>new o}(o);throw new Ye(204,!1)}function eg(o,s,c){let l;if(Ia(o)){const d=De(o);return eo(d)||yI(d)}if(Fv(o))l=()=>De(o.useValue);else if(function mI(o){return!(!o||!o.useFactory)}(o))l=()=>o.useFactory(...Kt(o.deps||[]));else if(function pI(o){return!(!o||!o.useExisting)}(o))l=()=>ge(De(o.useExisting));else{const d=De(o&&(o.useClass||o.provide));if(!function Bv(o){return!!o.deps}(o))return eo(d)||yI(d);l=()=>new d(...Kt(o.deps))}return l}function Vh(o,s,c=!1){return{factory:o,value:s,multi:c?[]:void 0}}function Uh(o,s){for(const c of o)Array.isArray(c)?Uh(c,s):c&&zn(c)?Uh(c.\u0275providers,s):s(c)}const vI=new Xt("AppId",{providedIn:"root",factory:()=>cx}),cx="ng",bI=new Xt("Platform Initializer"),Bh=new Xt("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),LO=new Xt("AnimationModuleType"),VO=new Xt("CSP nonce",{providedIn:"root",factory:()=>function Il(){if(void 0!==Xw)return Xw;if(typeof document<"u")return document;throw new Ye(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let lx=(o,s,c)=>null;function DI(o,s,c=!1){return lx(o,s,c)}class xI{}class MI{}class fx{resolveComponentFactory(s){throw function hx(o){const s=Error(`No component factory found for ${he(o)}.`);return s.ngComponent=o,s}(s)}}let rg=(()=>{class o{static#e=this.NULL=new fx}return o})();function Jv(){return Sl(or(),ye())}function Sl(o,s){return new Gh(bi(o,s))}let Gh=(()=>{class o{constructor(c){this.nativeElement=c}static#e=this.__NG_ELEMENT_ID__=Jv}return o})();function RI(o){return o instanceof Gh?o.nativeElement:o}class NI{}let ig=(()=>{class o{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function px(){const o=ye(),c=fi(or().index,o);return(Rr(c)?c:o)[mt]}()}return o})(),mx=(()=>{class o{static#e=this.\u0275prov=yn({token:o,providedIn:"root",factory:()=>null})}return o})();class kI{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const OI=new kI("16.2.7"),eb={};function UI(o,s=null,c=null,l){const d=BI(o,s,c,l);return d.resolveInjectorInitializers(),d}function BI(o,s=null,c=null,l,d=new Set){const f=[c||Lt,Qm(o)];return l=l||("object"==typeof o?void 0:he(o)),new Tl(f,s||Dl(),l||null,d)}let Ao=(()=>{class o{static#e=this.THROW_IF_NOT_FOUND=Ft;static#t=this.NULL=new Ov;static create(c,l){if(Array.isArray(c))return UI({name:""},l,c,"");{const d=c.name??"";return UI({name:d},c.parent,c.providers,d)}}static#n=this.\u0275prov=yn({token:o,providedIn:"any",factory:()=>ge(cI)});static#r=this.__NG_ELEMENT_ID__=-1}return o})();function qh(o){return o.ngOriginalError}class Ta{constructor(){this._console=console}handleError(s){const c=this._findOriginalError(s);this._console.error("ERROR",s),c&&this._console.error("ORIGINAL ERROR",c)}_findOriginalError(s){let c=s&&qh(s);for(;c&&qh(c);)c=qh(c);return c||null}}function og(o){return s=>{setTimeout(o,void 0,s)}}const xs=class GO extends p.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,c,l){let d=s,f=c||(()=>null),g=l;if(s&&"object"==typeof s){const b=s;d=b.next?.bind(b),f=b.error?.bind(b),g=b.complete?.bind(b)}this.__isAsync&&(f=og(f),d&&(d=og(d)),g&&(g=og(g)));const y=super.subscribe({next:d,error:f,complete:g});return s instanceof z.w0&&s.add(y),y}};function bx(...o){}class Wn{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:c=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new xs(!1),this.onMicrotaskEmpty=new xs(!1),this.onStable=new xs(!1),this.onError=new xs(!1),typeof Zone>"u")throw new Ye(908,!1);Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!l&&c,d.shouldCoalesceRunChangeDetection=l,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function rb(){const o="function"==typeof an.requestAnimationFrame;let s=an[o?"requestAnimationFrame":"setTimeout"],c=an[o?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&s&&c){const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l);const d=c[Zone.__symbol__("OriginalDelegate")];d&&(c=d)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:c}}().nativeRequestAnimationFrame,function Ix(o){const s=()=>{!function wx(o){o.isCheckStableRunning||-1!==o.lastRequestAnimationFrameId||(o.lastRequestAnimationFrameId=o.nativeRequestAnimationFrame.call(an,()=>{o.fakeTopEventTask||(o.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{o.lastRequestAnimationFrameId=-1,ib(o),o.isCheckStableRunning=!0,sg(o),o.isCheckStableRunning=!1},void 0,()=>{},()=>{})),o.fakeTopEventTask.invoke()}),ib(o))}(o)};o._inner=o._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(c,l,d,f,g,y)=>{if(function WI(o){return!(!Array.isArray(o)||1!==o.length)&&!0===o[0].data?.__ignore_ng_zone__}(y))return c.invokeTask(d,f,g,y);try{return HI(o),c.invokeTask(d,f,g,y)}finally{(o.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||o.shouldCoalesceRunChangeDetection)&&s(),zI(o)}},onInvoke:(c,l,d,f,g,y,b)=>{try{return HI(o),c.invoke(d,f,g,y,b)}finally{o.shouldCoalesceRunChangeDetection&&s(),zI(o)}},onHasTask:(c,l,d,f)=>{c.hasTask(d,f),l===d&&("microTask"==f.change?(o._hasPendingMicrotasks=f.microTask,ib(o),sg(o)):"macroTask"==f.change&&(o.hasPendingMacrotasks=f.macroTask))},onHandleError:(c,l,d,f)=>(c.handleError(d,f),o.runOutsideAngular(()=>o.onError.emit(f)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Wn.isInAngularZone())throw new Ye(909,!1)}static assertNotInAngularZone(){if(Wn.isInAngularZone())throw new Ye(909,!1)}run(s,c,l){return this._inner.run(s,c,l)}runTask(s,c,l,d){const f=this._inner,g=f.scheduleEventTask("NgZoneEvent: "+d,s,$I,bx,bx);try{return f.runTask(g,c,l)}finally{f.cancelTask(g)}}runGuarded(s,c,l){return this._inner.runGuarded(s,c,l)}runOutsideAngular(s){return this._outer.run(s)}}const $I={};function sg(o){if(0==o._nesting&&!o.hasPendingMicrotasks&&!o.isStable)try{o._nesting++,o.onMicrotaskEmpty.emit(null)}finally{if(o._nesting--,!o.hasPendingMicrotasks)try{o.runOutsideAngular(()=>o.onStable.emit(null))}finally{o.isStable=!0}}}function ib(o){o.hasPendingMicrotasks=!!(o._hasPendingMicrotasks||(o.shouldCoalesceEventChangeDetection||o.shouldCoalesceRunChangeDetection)&&-1!==o.lastRequestAnimationFrameId)}function HI(o){o._nesting++,o.isStable&&(o.isStable=!1,o.onUnstable.emit(null))}function zI(o){o._nesting--,sg(o)}class GI{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new xs,this.onMicrotaskEmpty=new xs,this.onStable=new xs,this.onError=new xs}run(s,c,l){return s.apply(c,l)}runGuarded(s,c,l){return s.apply(c,l)}runOutsideAngular(s){return s()}runTask(s,c,l,d){return s.apply(c,l)}}const qI=new Xt("",{providedIn:"root",factory:Dx});function Dx(){const o=We(Wn);let s=!0;return function ce(...o){const s=(0,fe.yG)(o),c=(0,fe._6)(o,1/0),l=o;return l.length?1===l.length?(0,K.Xf)(l[0]):(0,Q.J)(c)((0,Ce.D)(l,s)):de.E}(new B.y(d=>{s=o.isStable&&!o.hasPendingMacrotasks&&!o.hasPendingMicrotasks,o.runOutsideAngular(()=>{d.next(s),d.complete()})}),new B.y(d=>{let f;o.runOutsideAngular(()=>{f=o.onStable.subscribe(()=>{Wn.assertNotInAngularZone(),queueMicrotask(()=>{!s&&!o.hasPendingMacrotasks&&!o.hasPendingMicrotasks&&(s=!0,d.next(!0))})})});const g=o.onUnstable.subscribe(()=>{Wn.assertInAngularZone(),s&&(s=!1,o.runOutsideAngular(()=>{d.next(!1)}))});return()=>{f.unsubscribe(),g.unsubscribe()}}).pipe(we()))}function Ms(o){return o instanceof Function?o():o}let YI=(()=>{class o{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=yn({token:o,providedIn:"root",factory:()=>new o})}return o})();function ag(o){for(;o;){o[Tt]|=64;const s=Mc(o);if($p(o)&&!s)return o;o=s}return null}const Sx=new Xt("",{providedIn:"root",factory:()=>!1});let ab=null;function Nx(o,s){return o[s]??Px()}function kx(o,s){const c=Px();c.producerNode?.length&&(o[s]=ab,c.lView=o,ab=Ox())}const JO={...Zd,consumerIsAlwaysLive:!0,consumerMarkedDirty:o=>{ag(o.lView)},lView:null};function Ox(){return Object.create(JO)}function Px(){return ab??=Ox(),ab}const xt={};function Fx(o){Lx(Vt(),ye(),wn()+o,!1)}function Lx(o,s,c,l){if(!l)if(3==(3&s[Tt])){const f=o.preOrderCheckHooks;null!==f&&Ju(s,f,c)}else{const f=o.preOrderHooks;null!==f&&gm(s,f,0,c)}ne(c)}function Kh(o,s=Ge.Default){const c=ye();return null===c?ge(o,s):Qo(or(),c,De(o),s)}function Vx(){throw new Error("invalid")}function cb(o,s,c,l,d,f,g,y,b,I,C){const M=s.blueprint.slice();return M[ln]=d,M[Tt]=140|l,(null!==I||o&&2048&o[Tt])&&(M[Tt]|=2048),rm(M),M[dn]=M[ra]=o,M[Vn]=c,M[ic]=g||o&&o[ic],M[mt]=y||o&&o[mt],M[Qi]=b||o&&o[Qi]||null,M[xr]=f,M[ia]=function xm(){return kS++}(),M[vo]=C,M[Hd]=I,M[Rn]=2==s.type?o[Rn]:M,M}function Zh(o,s,c,l,d){let f=o.data[s];if(null===f)f=function QI(o,s,c,l,d){const f=sh(),g=ah(),b=o.data[s]=function aP(o,s,c,l,d,f){let g=s?s.injectorIndex:-1,y=0;return function Wo(){return null!==gt.skipHydrationRootTNode}()&&(y|=128),{type:c,index:l,insertBeforeIndex:null,injectorIndex:g,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:y,providerIndexes:0,value:d,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,g?f:f&&f.parent,c,s,l,d);return null===o.firstChild&&(o.firstChild=b),null!==f&&(g?null==f.child&&null!==b.parent&&(f.child=b):null===f.next&&(f.next=b,b.prev=f)),b}(o,s,c,l,d),function Es(){return gt.lFrame.inI18n}()&&(f.flags|=32);else if(64&f.type){f.type=c,f.value=l,f.attrs=d;const g=function Zu(){const o=gt.lFrame,s=o.currentTNode;return o.isParent?s:s.parent}();f.injectorIndex=null===g?-1:g.injectorIndex}return wo(f,!0),f}function cg(o,s,c,l){if(0===c)return-1;const d=s.length;for(let f=0;f<c;f++)s.push(l),o.blueprint.push(l),o.data.push(null);return d}function Ux(o,s,c,l,d){const f=Nx(s,Ru),g=wn(),y=2&l;try{ne(-1),y&&s.length>Pt&&Lx(o,s,Pt,!1),Fi(y?2:0,d);const I=y?f:null,C=Qd(I);try{null!==I&&(I.dirty=!1),c(l,d)}finally{qp(I,C)}}finally{y&&null===s[Ru]&&kx(s,Ru),ne(g),Fi(y?3:1,d)}}function XI(o,s,c){if(Gd(s)){const l=Pi(null);try{const f=s.directiveEnd;for(let g=s.directiveStart;g<f;g++){const y=o.data[g];y.contentQueries&&y.contentQueries(1,c[g],g)}}finally{Pi(l)}}}function JI(o,s,c){sm()&&(function db(o,s,c,l){const d=c.directiveStart,f=c.directiveEnd;vs(c)&&function Fr(o,s,c){const l=bi(s,o),d=Bx(c);let g=16;c.signals?g=4096:c.onPush&&(g=64);const y=fg(o,cb(o,d,null,g,l,s,null,o[ic].rendererFactory.createRenderer(l,c),null,null,null));o[s.index]=y}(s,c,o.data[d+c.componentOffset]),o.firstCreatePass||Tc(c,s),Zr(l,s);const g=c.initialInputs;for(let y=d;y<f;y++){const b=o.data[y],I=ga(s,o,y,c);Zr(I,s),null!==g&&hb(0,y-d,I,b,0,g),zt(b)&&(fi(c.index,s)[Vn]=ga(s,o,y,c))}}(o,s,c,bi(c,s)),64==(64&c.flags)&&nD(o,s,c))}function eD(o,s,c=bi){const l=s.localNames;if(null!==l){let d=s.index+1;for(let f=0;f<l.length;f+=2){const g=l[f+1],y=-1===g?c(s,o):o[g];o[d++]=y}}}function Bx(o){const s=o.tView;return null===s||s.incompleteFirstPass?o.tView=tD(1,null,o.template,o.decls,o.vars,o.directiveDefs,o.pipeDefs,o.viewQuery,o.schemas,o.consts,o.id):s}function tD(o,s,c,l,d,f,g,y,b,I,C){const M=Pt+l,L=M+d,H=function tP(o,s){const c=[];for(let l=0;l<s;l++)c.push(l<o?null:xt);return c}(M,L),se="function"==typeof I?I():I;return H[Ue]={type:o,blueprint:H,template:c,queries:null,viewQuery:y,declTNode:s,data:H.slice().fill(null,M),bindingStartIndex:M,expandoStartIndex:L,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof g?g():g,firstChild:null,schemas:b,consts:se,incompleteFirstPass:!1,ssrId:C}}let jx=o=>null;function $x(o,s,c,l){for(let d in o)if(o.hasOwnProperty(d)){c=null===c?{}:c;const f=o[d];null===l?Hx(c,s,d,f):l.hasOwnProperty(d)&&Hx(c,s,l[d],f)}return c}function Hx(o,s,c,l){o.hasOwnProperty(c)?o[c].push(s,l):o[c]=[s,l]}function so(o,s,c,l,d,f,g,y){const b=bi(s,c);let C,I=s.inputs;!y&&null!=I&&(C=I[l])?(mg(o,c,C,l,d),vs(s)&&function lP(o,s){const c=fi(s,o);16&c[Tt]||(c[Tt]|=64)}(c,s.index)):3&s.type&&(l=function uP(o){return"class"===o?"className":"for"===o?"htmlFor":"formaction"===o?"formAction":"innerHtml"===o?"innerHTML":"readonly"===o?"readOnly":"tabindex"===o?"tabIndex":o}(l),d=null!=g?g(d,s.value||"",l):d,f.setProperty(b,l,d))}function lb(o,s,c,l){if(sm()){const d=null===l?null:{"":-1},f=function Wx(o,s){const c=o.directiveRegistry;let l=null,d=null;if(c)for(let f=0;f<c.length;f++){const g=c[f];if(Fp(s,g.selectors,!1))if(l||(l=[]),zt(g))if(null!==g.findHostDirectiveDefs){const y=[];d=d||new Map,g.findHostDirectiveDefs(g,y,d),l.unshift(...y,g),lg(o,s,y.length)}else l.unshift(g),lg(o,s,0);else d=d||new Map,g.findHostDirectiveDefs?.(g,l,d),l.push(g)}return null===l?null:[l,d]}(o,c);let g,y;null===f?g=y=null:[g,y]=f,null!==g&&kn(o,s,c,g,d,y),d&&function Kx(o,s,c){if(s){const l=o.localNames=[];for(let d=0;d<s.length;d+=2){const f=c[s[d+1]];if(null==f)throw new Ye(-301,!1);l.push(s[d],f)}}}(c,l,d)}c.mergedAttrs=Cu(c.mergedAttrs,c.attrs)}function kn(o,s,c,l,d,f){for(let I=0;I<l.length;I++)io(Tc(c,s),o,l[I].type);!function Yx(o,s,c){o.flags|=1,o.directiveStart=s,o.directiveEnd=s+c,o.providerIndexes=s}(c,o.data.length,l.length);for(let I=0;I<l.length;I++){const C=l[I];C.providersResolver&&C.providersResolver(C)}let g=!1,y=!1,b=cg(o,s,l.length,null);for(let I=0;I<l.length;I++){const C=l[I];c.mergedAttrs=Cu(c.mergedAttrs,C.hostAttrs),Qx(o,c,s,b,C),Zx(b,C,d),null!==C.contentQueries&&(c.flags|=4),(null!==C.hostBindings||null!==C.hostAttrs||0!==C.hostVars)&&(c.flags|=64);const M=C.type.prototype;!g&&(M.ngOnChanges||M.ngOnInit||M.ngDoCheck)&&((o.preOrderHooks??=[]).push(c.index),g=!0),!y&&(M.ngOnChanges||M.ngDoCheck)&&((o.preOrderCheckHooks??=[]).push(c.index),y=!0),b++}!function cP(o,s,c){const d=s.directiveEnd,f=o.data,g=s.attrs,y=[];let b=null,I=null;for(let C=s.directiveStart;C<d;C++){const M=f[C],L=c?c.get(M):null,se=L?L.outputs:null;b=$x(M.inputs,C,b,L?L.inputs:null),I=$x(M.outputs,C,I,se);const Ee=null===b||null===g||Pp(s)?null:dg(b,C,g);y.push(Ee)}null!==b&&(b.hasOwnProperty("class")&&(s.flags|=8),b.hasOwnProperty("style")&&(s.flags|=16)),s.initialInputs=y,s.inputs=b,s.outputs=I}(o,c,f)}function nD(o,s,c){const l=c.directiveStart,d=c.directiveEnd,f=c.index,g=function Yu(){return gt.lFrame.currentDirectiveIndex}();try{ne(f);for(let y=l;y<d;y++){const b=o.data[y],I=s[y];Qu(y),(null!==b.hostBindings||0!==b.hostVars||null!==b.hostAttrs)&&qx(b,I)}}finally{ne(-1),Qu(g)}}function qx(o,s){null!==o.hostBindings&&o.hostBindings(1,s)}function lg(o,s,c){s.componentOffset=c,(o.components??=[]).push(s.index)}function Zx(o,s,c){if(c){if(s.exportAs)for(let l=0;l<s.exportAs.length;l++)c[s.exportAs[l]]=o;zt(s)&&(c[""]=o)}}function Qx(o,s,c,l,d){o.data[l]=d;const f=d.factory||(d.factory=eo(d.type)),g=new Zo(f,zt(d),Kh);o.blueprint[l]=g,c[l]=g,function Gx(o,s,c,l,d){const f=d.hostBindings;if(f){let g=o.hostBindingOpCodes;null===g&&(g=o.hostBindingOpCodes=[]);const y=~s.index;(function ug(o){let s=o.length;for(;s>0;){const c=o[--s];if("number"==typeof c&&c<0)return c}return 0})(g)!=y&&g.push(y),g.push(c,l,f)}}(o,s,l,cg(o,c,d.hostVars,xt),d)}function Bi(o,s,c,l,d,f){const g=bi(o,s);!function Yh(o,s,c,l,d,f,g){if(null==f)o.removeAttribute(s,d,c);else{const y=null==g?lt(f):g(f,l||"",d);o.setAttribute(s,d,y,c)}}(s[mt],g,f,o.value,c,l,d)}function hb(o,s,c,l,d,f){const g=f[s];if(null!==g)for(let y=0;y<g.length;)Qh(l,c,g[y++],g[y++],g[y++])}function Qh(o,s,c,l,d){const f=Pi(null);try{const g=o.inputTransforms;null!==g&&g.hasOwnProperty(l)&&(d=g[l].call(s,d)),null!==o.setInput?o.setInput(s,d,c,l):s[l]=d}finally{Pi(f)}}function dg(o,s,c){let l=null,d=0;for(;d<c.length;){const f=c[d];if(0!==f)if(5!==f){if("number"==typeof f)break;if(o.hasOwnProperty(f)){null===l&&(l=[]);const g=o[f];for(let y=0;y<g.length;y+=2)if(g[y]===s){l.push(f,g[y+1],c[d+1]);break}}d+=2}else d+=2;else d+=4}return l}function hg(o,s,c,l){return[o,!0,!1,s,null,0,l,c,null,null,null]}function rD(o,s){const c=o.contentQueries;if(null!==c)for(let l=0;l<c.length;l+=2){const f=c[l+1];if(-1!==f){const g=o.data[f];uh(c[l]),g.contentQueries(2,s[f],f)}}}function fg(o,s){return o[Mu]?o[oc][Yi]=s:o[Mu]=s,o[oc]=s,s}function pg(o,s,c){uh(0);const l=Pi(null);try{s(o,c)}finally{Pi(l)}}function iD(o){return o[na]||(o[na]=[])}function Ml(o){return o.cleanup||(o.cleanup=[])}function Xh(o,s){const c=o[Qi],l=c?c.get(Ta,null):null;l&&l.handleError(s)}function mg(o,s,c,l,d){for(let f=0;f<c.length;){const g=c[f++],y=c[f++];Qh(o.data[g],s[g],l,y,d)}}function Rs(o,s,c){const l=ca(s,o);!function Pm(o,s,c){o.setValue(s,c)}(o[mt],l,c)}function Xx(o,s){const c=fi(s,o),l=c[Ue];!function Jx(o,s){for(let c=s.length;c<o.blueprint.length;c++)s.push(o.blueprint[c])}(l,c);const d=c[ln];null!==d&&null===c[vo]&&(c[vo]=DI(d,c[Qi])),pb(l,c,c[Vn])}function pb(o,s,c){vc(s);try{const l=o.viewQuery;null!==l&&pg(1,l,c);const d=o.template;null!==d&&Ux(o,s,d,1,c),o.firstCreatePass&&(o.firstCreatePass=!1),o.staticContentQueries&&rD(o,s),o.staticViewQueries&&pg(2,o.viewQuery,c);const f=o.components;null!==f&&function oD(o,s){for(let c=0;c<s.length;c++)Xx(o,s[c])}(s,f)}catch(l){throw o.firstCreatePass&&(o.incompleteFirstPass=!0,o.firstCreatePass=!1),l}finally{s[Tt]&=-5,ha()}}let gg=(()=>{class o{constructor(){this.all=new Set,this.queue=new Map}create(c,l,d){const f=typeof Zone>"u"?null:Zone.current,g=function Xp(o,s,c){const l=Object.create(Fy);c&&(l.consumerAllowSignalWrites=!0),l.fn=o,l.schedule=s;const d=g=>{l.cleanupFn=g};return l.ref={notify:()=>Ou(l),run:()=>{if(l.dirty=!1,l.hasRun&&!Ry(l))return;l.hasRun=!0;const g=Qd(l);try{l.cleanupFn(),l.cleanupFn=$u,l.fn(d)}finally{qp(l,g)}},cleanup:()=>l.cleanupFn()},l.ref}(c,I=>{this.all.has(I)&&this.queue.set(I,f)},d);let y;this.all.add(g),g.notify();const b=()=>{g.cleanup(),y?.(),this.all.delete(g),this.queue.delete(g)};return y=l?.onDestroy(b),{destroy:b}}flush(){if(0!==this.queue.size)for(const[c,l]of this.queue)this.queue.delete(c),l?l.run(()=>c.run()):c.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=yn({token:o,providedIn:"root",factory:()=>new o})}return o})();function Rl(o,s,c){let l=c?o.styles:null,d=c?o.classes:null,f=0;if(null!==s)for(let g=0;g<s.length;g++){const y=s[g];"number"==typeof y?f=y:1==f?d=ke(d,y):2==f&&(l=ke(l,y+": "+s[++g]+";"))}c?o.styles=l:o.stylesWithoutHost=l,c?o.classes=d:o.classesWithoutHost=d}function Nl(o,s,c,l,d=!1){for(;null!==c;){const f=s[c.index];null!==f&&l.push(hn(f)),Nr(f)&&kl(f,l);const g=c.type;if(8&g)Nl(o,s,c.child,l);else if(32&g){const y=km(c,s);let b;for(;b=y();)l.push(b)}else if(16&g){const y=zS(s,c);if(Array.isArray(y))l.push(...y);else{const b=Mc(s[Rn]);Nl(b[Ue],b,y,l,!0)}}c=d?c.projectionNext:c.next}return l}function kl(o,s){for(let c=fr;c<o.length;c++){const l=o[c],d=l[Ue].firstChild;null!==d&&Nl(l[Ue],l,d,s)}o[Oi]!==o[ln]&&s.push(o[Oi])}function _g(o,s,c,l=!0){const d=s[ic],f=d.rendererFactory,g=d.afterRenderEventManager;f.begin?.(),g?.begin();try{cD(o,s,o.template,c)}catch(b){throw l&&Xh(s,b),b}finally{f.end?.(),d.effectManager?.flush(),g?.end()}}function cD(o,s,c,l){const d=s[Tt];if(256!=(256&d)){s[ic].effectManager?.flush(),vc(s);try{rm(s),function ch(o){return gt.lFrame.bindingIndex=o}(o.bindingStartIndex),null!==c&&Ux(o,s,c,2,l);const g=3==(3&d);if(g){const I=o.preOrderCheckHooks;null!==I&&Ju(s,I,null)}else{const I=o.preOrderHooks;null!==I&&gm(s,I,0,null),_m(s,0)}if(function gb(o){for(let s=Mh(o);null!==s;s=Om(s)){if(!s[bo])continue;const c=s[Go];for(let l=0;l<c.length;l++){mr(c[l])}}}(s),yg(s,2),null!==o.contentQueries&&rD(o,s),g){const I=o.contentCheckHooks;null!==I&&Ju(s,I)}else{const I=o.contentHooks;null!==I&&gm(s,I,1),_m(s,1)}!function eP(o,s){const c=o.hostBindingOpCodes;if(null===c)return;const l=Nx(s,oa);try{for(let d=0;d<c.length;d++){const f=c[d];if(f<0)ne(~f);else{const g=f,y=c[++d],b=c[++d];da(y,g),l.dirty=!1;const I=Qd(l);try{b(2,s[g])}finally{qp(l,I)}}}}finally{null===s[oa]&&kx(s,oa),ne(-1)}}(o,s);const y=o.components;null!==y&&uD(s,y,0);const b=o.viewQuery;if(null!==b&&pg(2,b,l),g){const I=o.viewCheckHooks;null!==I&&Ju(s,I)}else{const I=o.viewHooks;null!==I&&gm(s,I,2),_m(s,2)}!0===o.firstUpdatePass&&(o.firstUpdatePass=!1),s[Tt]&=-73,rh(s)}finally{ha()}}}function yg(o,s){for(let c=Mh(o);null!==c;c=Om(c))for(let l=fr;l<c.length;l++)vg(c[l],s)}function _b(o,s,c){vg(fi(s,o),c)}function vg(o,s){if(!function By(o){return 128==(128&o[Tt])}(o))return;const c=o[Ue],l=o[Tt];if(80&l&&0===s||1024&l||2===s)cD(c,o,c.template,o[Vn]);else if(o[xu]>0){yg(o,1);const d=c.components;null!==d&&uD(o,d,1)}}function uD(o,s,c){for(let l=0;l<s.length;l++)_b(o,s[l],c)}class Jh{get rootNodes(){const s=this._lView,c=s[Ue];return Nl(c,s,c.firstChild,[])}constructor(s,c){this._lView=s,this._cdRefInjectingView=c,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Vn]}set context(s){this._lView[Vn]=s}get destroyed(){return 256==(256&this._lView[Tt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[dn];if(Nr(s)){const c=s[8],l=c?c.indexOf(this):-1;l>-1&&(_l(s,l),Eh(c,l))}this._attachedToViewContainer=!1}kh(this._lView[Ue],this._lView)}onDestroy(s){!function jy(o,s){if(256==(256&o[Tt]))throw new Ye(911,!1);null===o[Xi]&&(o[Xi]=[]),o[Xi].push(s)}(this._lView,s)}markForCheck(){ag(this._cdRefInjectingView||this._lView)}detach(){this._lView[Tt]&=-129}reattach(){this._lView[Tt]|=128}detectChanges(){_g(this._lView[Ue],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ye(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function VS(o,s){Rc(o,s,s[mt],2,null,null)}(this._lView[Ue],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new Ye(902,!1);this._appRef=s}}class eM extends Jh{constructor(s){super(s),this._view=s}detectChanges(){const s=this._view;_g(s[Ue],s,s[Vn],!1)}checkNoChanges(){}get context(){return null}}class ef extends rg{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const c=jt(s);return new Vc(c,this.ngModule)}}function bg(o){const s=[];for(let c in o)o.hasOwnProperty(c)&&s.push({propName:o[c],templateName:c});return s}class yb{constructor(s,c){this.injector=s,this.parentInjector=c}get(s,c,l){l=Dt(l);const d=this.injector.get(s,eb,l);return d!==eb||c===eb?d:this.parentInjector.get(s,c,l)}}class Vc extends MI{get inputs(){const s=this.componentDef,c=s.inputTransforms,l=bg(s.inputs);if(null!==c)for(const d of l)c.hasOwnProperty(d.propName)&&(d.transform=c[d.propName]);return l}get outputs(){return bg(this.componentDef.outputs)}constructor(s,c){super(),this.componentDef=s,this.ngModule=c,this.componentType=s.type,this.selector=function by(o){return o.map(cw).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!c}create(s,c,l,d){let f=(d=d||this.ngModule)instanceof Ss?d:d?.injector;f&&null!==this.componentDef.getStandaloneInjector&&(f=this.componentDef.getStandaloneInjector(f)||f);const g=f?new yb(s,f):s,y=g.get(NI,null);if(null===y)throw new Ye(407,!1);const M={rendererFactory:y,sanitizer:g.get(mx,null),effectManager:g.get(gg,null),afterRenderEventManager:g.get(YI,null)},L=y.createRenderer(null,this.componentDef),H=this.componentDef.selectors[0][0]||"div",se=l?function nP(o,s,c,l){const f=l.get(Sx,!1)||c===Ki.ShadowDom,g=o.selectRootElement(s,f);return function rP(o){jx(o)}(g),g}(L,l,this.componentDef.encapsulation,g):gl(L,H,function lD(o){const s=o.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(H)),Je=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let me=null;null!==se&&(me=DI(se,g,!0));const vt=tD(0,null,null,1,0,null,null,null,null,null,null),Mt=cb(null,vt,null,Je,null,null,M,L,g,null,me);let Jt,Er;vc(Mt);try{const go=this.componentDef;let za,hp=null;go.findHostDirectiveDefs?(za=[],hp=new Map,go.findHostDirectiveDefs(go,za,hp),za.push(go)):za=[go];const jC=function dD(o,s){const c=o[Ue],l=Pt;return o[l]=s,Zh(c,l,2,"#host",null)}(Mt,se),eN=function tM(o,s,c,l,d,f,g){const y=d[Ue];!function hD(o,s,c,l){for(const d of o)s.mergedAttrs=Cu(s.mergedAttrs,d.hostAttrs);null!==s.mergedAttrs&&(Rl(s,s.mergedAttrs,!0),null!==c&&qS(l,c,s))}(l,o,s,g);let b=null;null!==s&&(b=DI(s,d[Qi]));const I=f.rendererFactory.createRenderer(s,c);let C=16;c.signals?C=4096:c.onPush&&(C=64);const M=cb(d,Bx(c),null,C,d[o.index],o,f,I,null,null,b);return y.firstCreatePass&&lg(y,o,l.length-1),fg(d,M),d[o.index]=M}(jC,se,go,za,Mt,M,L);Er=ua(vt,Pt),se&&function fD(o,s,c,l){if(l)_s(o,c,["ng-version",OI.full]);else{const{attrs:d,classes:f}=function jd(o){const s=[],c=[];let l=1,d=2;for(;l<o.length;){let f=o[l];if("string"==typeof f)2===d?""!==f&&s.push(f,o[++l]):8===d&&c.push(f);else{if(!ki(d))break;d=f}l++}return{attrs:s,classes:c}}(s.selectors[0]);d&&_s(o,c,d),f&&f.length>0&&zm(o,c,f.join(" "))}}(L,go,se,l),void 0!==c&&function nM(o,s,c){const l=o.projection=[];for(let d=0;d<s.length;d++){const f=c[d];l.push(null!=f?Array.from(f):null)}}(Er,this.ngContentSelectors,c),Jt=function Ol(o,s,c,l,d,f){const g=or(),y=d[Ue],b=bi(g,d);kn(y,d,g,c,null,l);for(let C=0;C<c.length;C++)Zr(ga(d,y,g.directiveStart+C,g),d);nD(y,d,g),b&&Zr(b,d);const I=ga(d,y,g.directiveStart+g.componentOffset,g);if(o[Vn]=d[Vn]=I,null!==f)for(const C of f)C(I,s);return XI(y,g,o),I}(eN,go,za,hp,Mt,[rM]),pb(vt,Mt,null)}finally{ha()}return new vb(this.componentType,Jt,Sl(Er,Mt),Mt,Er)}}class vb extends xI{constructor(s,c,l,d,f){super(),this.location=l,this._rootLView=d,this._tNode=f,this.previousInputValues=null,this.instance=c,this.hostView=this.changeDetectorRef=new eM(d),this.componentType=s}setInput(s,c){const l=this._tNode.inputs;let d;if(null!==l&&(d=l[s])){if(this.previousInputValues??=new Map,this.previousInputValues.has(s)&&Object.is(this.previousInputValues.get(s),c))return;const f=this._rootLView;mg(f[Ue],f,d,s,c),this.previousInputValues.set(s,c),ag(fi(this._tNode.index,f))}}get injector(){return new E(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}function rM(){const o=or();mm(ye()[Ue],o)}function bb(o){let s=function pD(o){return Object.getPrototypeOf(o.prototype).constructor}(o.type),c=!0;const l=[o];for(;s;){let d;if(zt(o))d=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new Ye(903,!1);d=s.\u0275dir}if(d){if(c){l.push(d);const g=o;g.inputs=Eg(o.inputs),g.inputTransforms=Eg(o.inputTransforms),g.declaredInputs=Eg(o.declaredInputs),g.outputs=Eg(o.outputs);const y=d.hostBindings;y&&aM(o,y);const b=d.viewQuery,I=d.contentQueries;if(b&&oM(o,b),I&&sM(o,I),Ie(o.inputs,d.inputs),Ie(o.declaredInputs,d.declaredInputs),Ie(o.outputs,d.outputs),null!==d.inputTransforms&&(null===g.inputTransforms&&(g.inputTransforms={}),Ie(g.inputTransforms,d.inputTransforms)),zt(d)&&d.data.animation){const C=o.data;C.animation=(C.animation||[]).concat(d.data.animation)}}const f=d.features;if(f)for(let g=0;g<f.length;g++){const y=f[g];y&&y.ngInherit&&y(o),y===bb&&(c=!1)}}s=Object.getPrototypeOf(s)}!function iM(o){let s=0,c=null;for(let l=o.length-1;l>=0;l--){const d=o[l];d.hostVars=s+=d.hostVars,d.hostAttrs=Cu(d.hostAttrs,c=Cu(c,d.hostAttrs))}}(l)}function Eg(o){return o===Zi?{}:o===Lt?[]:o}function oM(o,s){const c=o.viewQuery;o.viewQuery=c?(l,d)=>{s(l,d),c(l,d)}:s}function sM(o,s){const c=o.contentQueries;o.contentQueries=c?(l,d,f)=>{s(l,d,f),c(l,d,f)}:s}function aM(o,s){const c=o.hostBindings;o.hostBindings=c?(l,d)=>{s(l,d),c(l,d)}:s}function Ib(o){const s=o.inputConfig,c={};for(const l in s)if(s.hasOwnProperty(l)){const d=s[l];Array.isArray(d)&&d[2]&&(c[l]=d[2])}o.inputTransforms=c}function tf(o){return!!vD(o)&&(Array.isArray(o)||!(o instanceof Map)&&Symbol.iterator in o)}function vD(o){return null!==o&&("function"==typeof o||"object"==typeof o)}function pi(o,s,c){return!Object.is(o[s],c)&&(o[s]=c,!0)}function Dg(o,s,c,l){const d=ye();return pi(d,_c(),s)&&(Vt(),Bi($e(),d,o,s,c,l)),Dg}function Sa(o,s,c,l){return pi(o,_c(),c)?s+lt(c)+l:xt}function rf(o,s,c,l,d,f){const y=function Uc(o,s,c,l){const d=pi(o,s,c);return pi(o,s+1,l)||d}(o,function Ko(){return gt.lFrame.bindingIndex}(),c,d);return Or(2),y?s+lt(c)+l+lt(d)+f:xt}function Mg(o,s,c,l,d,f,g,y){const b=ye(),I=Vt(),C=o+Pt,M=I.firstCreatePass?function Nb(o,s,c,l,d,f,g,y,b){const I=s.consts,C=Zh(s,o,4,g||null,fn(I,y));lb(s,c,C,fn(I,b)),mm(s,C);const M=C.tView=tD(2,C,l,d,f,s.directiveRegistry,s.pipeRegistry,null,s.schemas,I,null);return null!==s.queries&&(s.queries.template(s,C),M.queries=s.queries.embeddedTView(C)),C}(C,I,b,s,c,l,d,f,g):I.data[C];wo(M,!1);const L=Rg(I,b,M,o);fm()&&El(I,b,L,M),Zr(L,b),fg(b,b[C]=hg(L,b,L,M)),qd(M)&&JI(I,b,M),null!=g&&eD(b,M,y)}let Rg=function kb(o,s,c,l){return fa(!0),s[mt].createComment("")};function Ob(o,s,c){const l=ye();return pi(l,_c(),s)&&so(Vt(),$e(),l,o,s,l[mt],c,!1),Ob}function Pb(o,s,c,l,d){const g=d?"class":"style";mg(o,c,s.inputs[g],g,l)}function Ul(o,s,c,l){const d=ye(),f=Vt(),g=Pt+o,y=d[mt],b=f.firstCreatePass?function Ng(o,s,c,l,d,f){const g=s.consts,b=Zh(s,o,2,l,fn(g,d));return lb(s,c,b,fn(g,f)),null!==b.attrs&&Rl(b,b.attrs,!1),null!==b.mergedAttrs&&Rl(b,b.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,b),b}(g,f,d,s,c,l):f.data[g],I=Fb(f,d,b,y,s,o);d[g]=I;const C=qd(b);return wo(b,!0),qS(y,I,b),32!=(32&b.flags)&&fm()&&El(f,d,I,b),0===function om(){return gt.lFrame.elementDepthCount}()&&Zr(I,d),function to(){gt.lFrame.elementDepthCount++}(),C&&(JI(f,d,b),XI(f,b,d)),null!==l&&eD(d,b),Ul}function kg(){let o=or();ah()?function la(){gt.lFrame.isParent=!1}():(o=o.parent,wo(o,!1));const s=o;(function am(o){return gt.skipHydrationRootTNode===o})(s)&&function Gy(){gt.skipHydrationRootTNode=null}(),function Hy(){gt.lFrame.elementDepthCount--}();const c=Vt();return c.firstCreatePass&&(mm(c,o),Gd(o)&&c.queries.elementEnd(o)),null!=s.classesWithoutHost&&function fh(o){return 0!=(8&o.flags)}(s)&&Pb(c,s,ye(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function Fe(o){return 0!=(16&o.flags)}(s)&&Pb(c,s,ye(),s.stylesWithoutHost,!1),kg}function Og(o,s,c,l){return Ul(o,s,c,l),kg(),Og}let Fb=(o,s,c,l,d,f)=>(fa(!0),gl(l,d,function Qy(){return gt.lFrame.currentNamespace}()));function Ub(){return ye()}function Lg(o){return!!o&&"function"==typeof o.then}function Vg(o){return!!o&&"function"==typeof o.subscribe}function Ug(o,s,c,l){const d=ye(),f=Vt(),g=or();return function Bg(o,s,c,l,d,f,g){const y=qd(l),I=o.firstCreatePass&&Ml(o),C=s[Vn],M=iD(s);let L=!0;if(3&l.type||g){const Ee=bi(l,s),Pe=g?g(Ee):Ee,Je=M.length,me=g?Mt=>g(hn(Mt[l.index])):l.index;let vt=null;if(!g&&y&&(vt=function Bb(o,s,c,l){const d=o.cleanup;if(null!=d)for(let f=0;f<d.length-1;f+=2){const g=d[f];if(g===c&&d[f+1]===l){const y=s[na],b=d[f+2];return y.length>b?y[b]:null}"string"==typeof g&&(f+=2)}return null}(o,s,d,l.index)),null!==vt)(vt.__ngLastListenerFn__||vt).__ngNextListenerFn__=f,vt.__ngLastListenerFn__=f,L=!1;else{f=ar(l,s,C,f,!1);const Mt=c.listen(Pe,d,f);M.push(f,Mt),I&&I.push(d,me,Je,Je+1)}}else f=ar(l,s,C,f,!1);const H=l.outputs;let se;if(L&&null!==H&&(se=H[d])){const Ee=se.length;if(Ee)for(let Pe=0;Pe<Ee;Pe+=2){const Jt=s[se[Pe]][se[Pe+1]].subscribe(f),Er=M.length;M.push(f,Jt),I&&I.push(d,l.index,Er,-(Er+1))}}}(f,d,d[mt],g,o,s,l),Ug}function jg(o,s,c,l){try{return Fi(6,s,c),!1!==c(l)}catch(d){return Xh(o,d),!1}finally{Fi(7,s,c)}}function ar(o,s,c,l,d){return function f(g){if(g===Function)return l;ag(o.componentOffset>-1?fi(o.index,s):s);let b=jg(s,c,l,g),I=f.__ngNextListenerFn__;for(;I;)b=jg(s,c,I,g)&&b,I=I.__ngNextListenerFn__;return d&&!1===b&&g.preventDefault(),b}}function yr(o=1){return function Zy(o){return(gt.lFrame.contextLView=function Yy(o,s){for(;o>0;)s=s[ra],o--;return s}(o,gt.lFrame.contextLView))[Vn]}(o)}function Hg(o,s,c,l,d){const f=ye(),g=Sa(f,s,c,l);return g!==xt&&so(Vt(),$e(),f,o,g,f[mt],d,!1),Hg}function Gg(o,s){return o<<17|s<<2}function So(o){return o>>17&32767}function qg(o){return 2|o}function jc(o){return(131068&o)>>2}function $c(o,s){return-131069&o|s<<2}function Wg(o){return 1|o}function Hc(o,s,c,l,d){const f=o[c+1],g=null===s;let y=l?So(f):jc(f),b=!1;for(;0!==y&&(!1===b||g);){const C=o[y+1];xM(o[y],s)&&(b=!0,o[y+1]=l?Wg(C):qg(C)),y=l?So(C):jc(C)}b&&(o[c+1]=l?qg(f):Wg(f))}function xM(o,s){return null===o||null==s||(Array.isArray(o)?o[1]:o)===s||!(!Array.isArray(o)||"string"!=typeof s)&&Sc(o,s)>=0}function _f(o,s){return function lo(o,s,c,l){const d=ye(),f=Vt(),g=Or(2);f.firstUpdatePass&&function yf(o,s,c,l){const d=o.data;if(null===d[c+1]){const f=d[wn()],g=function Qg(o,s){return s>=o.expandoStartIndex}(o,c);(function t0(o,s){return 0!=(o.flags&(s?8:16))})(f,l)&&null===s&&!g&&(s=!1),s=function Jb(o,s,c,l){const d=function Xu(o){const s=gt.lFrame.currentDirectiveIndex;return-1===s?null:o[s]}(o);let f=l?s.residualClasses:s.residualStyles;if(null===d)0===(l?s.classBindings:s.styleBindings)&&(c=ks(c=e0(null,o,s,c,l),s.attrs,l),f=null);else{const g=s.directiveStylingLast;if(-1===g||o[g]!==d)if(c=e0(d,o,s,c,l),null===f){let b=function OD(o,s,c){const l=c?s.classBindings:s.styleBindings;if(0!==jc(l))return o[So(l)]}(o,s,l);void 0!==b&&Array.isArray(b)&&(b=e0(null,o,s,b[1],l),b=ks(b,s.attrs,l),function PD(o,s,c,l){o[So(c?s.classBindings:s.styleBindings)]=l}(o,s,l,b))}else f=function FD(o,s,c){let l;const d=s.directiveEnd;for(let f=1+s.directiveStylingLast;f<d;f++)l=ks(l,o[f].hostAttrs,c);return ks(l,s.attrs,c)}(o,s,l)}return void 0!==f&&(l?s.residualClasses=f:s.residualStyles=f),c}(d,f,s,l),function AM(o,s,c,l,d,f){let g=f?s.classBindings:s.styleBindings,y=So(g),b=jc(g);o[l]=c;let C,I=!1;if(Array.isArray(c)?(C=c[1],(null===C||Sc(c,C)>0)&&(I=!0)):C=c,d)if(0!==b){const L=So(o[y+1]);o[l+1]=Gg(L,y),0!==L&&(o[L+1]=$c(o[L+1],l)),o[y+1]=function Gb(o,s){return 131071&o|s<<17}(o[y+1],l)}else o[l+1]=Gg(y,0),0!==y&&(o[y+1]=$c(o[y+1],l)),y=l;else o[l+1]=Gg(b,0),0===y?y=l:o[b+1]=$c(o[b+1],l),b=l;I&&(o[l+1]=qg(o[l+1])),Hc(o,C,l,!0),Hc(o,C,l,!1),function SM(o,s,c,l,d){const f=d?o.residualClasses:o.residualStyles;null!=f&&"string"==typeof s&&Sc(f,s)>=0&&(c[l+1]=Wg(c[l+1]))}(s,C,o,l,f),g=Gg(y,b),f?s.classBindings=g:s.styleBindings=g}(d,f,s,c,g,l)}}(f,o,g,l),s!==xt&&pi(d,g,s)&&function Xg(o,s,c,l,d,f,g,y){if(!(3&s.type))return;const b=o.data,I=b[y+1],C=function ND(o){return 1==(1&o)}(I)?VD(b,s,c,d,jc(I),g):void 0;Jg(C)||(Jg(f)||function zb(o){return 2==(2&o)}(I)&&(f=VD(b,null,c,d,y,g)),function Ev(o,s,c,l,d){if(s)d?o.addClass(c,l):o.removeClass(c,l);else{let f=-1===l.indexOf("-")?void 0:pl.DashCase;null==d?o.removeStyle(c,l,f):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),f|=pl.Important),o.setStyle(c,l,d,f))}}(l,g,ca(wn(),c),d,f))}(f,f.data[wn()],d,d[mt],o,d[g+1]=function UD(o,s){return null==o||""===o||("string"==typeof s?o+=s:"object"==typeof o&&(o=he(Nc(o)))),o}(s,c),l,g)}(o,s,null,!0),_f}function e0(o,s,c,l,d){let f=null;const g=c.directiveEnd;let y=c.directiveStylingLast;for(-1===y?y=c.directiveStart:y++;y<g&&(f=s[y],l=ks(l,f.hostAttrs,d),f!==o);)y++;return null!==o&&(c.directiveStylingLast=y),l}function ks(o,s,c){const l=c?1:2;let d=-1;if(null!==s)for(let f=0;f<s.length;f++){const g=s[f];"number"==typeof g?d=g:d===l&&(Array.isArray(o)||(o=void 0===o?[]:["",o]),Vi(o,g,!!c||s[++f]))}return void 0===o?null:o}function VD(o,s,c,l,d,f){const g=null===s;let y;for(;d>0;){const b=o[d],I=Array.isArray(b),C=I?b[1]:b,M=null===C;let L=c[d+1];L===xt&&(L=M?Lt:void 0);let H=M?Tw(L,l):C===l?L:void 0;if(I&&!Jg(H)&&(H=Tw(b,l)),Jg(H)&&(y=H,g))return y;const se=o[d+1];d=g?So(se):jc(se)}if(null!==s){let b=f?s.residualClasses:s.residualStyles;null!=b&&(y=Tw(b,l))}return y}function Jg(o){return void 0!==o}function BD(o,s=""){const c=ye(),l=Vt(),d=o+Pt,f=l.firstCreatePass?Zh(l,d,1,s,null):l.data[d],g=Ra(l,c,f,s,o);c[d]=g,fm()&&El(l,c,g,f),wo(f,!1)}let Ra=(o,s,c,l,d)=>(fa(!0),function Rh(o,s){return o.createText(s)}(s[mt],l));function Hl(o){return Ef("",o,""),Hl}function Ef(o,s,c){const l=ye(),d=Sa(l,o,s,c);return d!==xt&&Rs(l,wn(),d),Ef}function pn(o,s,c,l,d){const f=ye(),g=rf(f,o,s,c,l,d);return g!==xt&&Rs(f,wn(),g),pn}const qc=void 0;var nT=["en",[["a","p"],["AM","PM"],qc],[["AM","PM"],qc,qc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],qc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],qc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",qc,"{1} 'at' {0}",qc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function jn(o){const c=Math.floor(Math.abs(o)),l=o.toString().replace(/^[^.]*\.?/,"").length;return 1===c&&0===l?1:5}];let Yl={};function a0(o){const s=function ts(o){return o.toLowerCase().replace(/_/g,"-")}(o);let c=u0(s);if(c)return c;const l=s.split("-")[0];if(c=u0(l),c)return c;if("en"===l)return nT;throw new Ye(701,!1)}function c0(o){return a0(o)[Wc.PluralCase]}function u0(o){return o in Yl||(Yl[o]=an.ng&&an.ng.common&&an.ng.common.locales&&an.ng.common.locales[o]),Yl[o]}var Wc=function(o){return o[o.LocaleId=0]="LocaleId",o[o.DayPeriodsFormat=1]="DayPeriodsFormat",o[o.DayPeriodsStandalone=2]="DayPeriodsStandalone",o[o.DaysFormat=3]="DaysFormat",o[o.DaysStandalone=4]="DaysStandalone",o[o.MonthsFormat=5]="MonthsFormat",o[o.MonthsStandalone=6]="MonthsStandalone",o[o.Eras=7]="Eras",o[o.FirstDayOfWeek=8]="FirstDayOfWeek",o[o.WeekendRange=9]="WeekendRange",o[o.DateFormat=10]="DateFormat",o[o.TimeFormat=11]="TimeFormat",o[o.DateTimeFormat=12]="DateTimeFormat",o[o.NumberSymbols=13]="NumberSymbols",o[o.NumberFormats=14]="NumberFormats",o[o.CurrencyCode=15]="CurrencyCode",o[o.CurrencySymbol=16]="CurrencySymbol",o[o.CurrencyName=17]="CurrencyName",o[o.Currencies=18]="Currencies",o[o.Directionality=19]="Directionality",o[o.PluralCase=20]="PluralCase",o[o.ExtraData=21]="ExtraData",o}(Wc||{});const Kc="en-US";let f0=Kc;function c_(o,s,c,l,d){if(o=De(o),Array.isArray(o))for(let f=0;f<o.length;f++)c_(o[f],s,c,l,d);else{const f=Vt(),g=ye(),y=or();let b=Ia(o)?o:De(o.provide);const I=eg(o),C=1048575&y.providerIndexes,M=y.directiveStart,L=y.providerIndexes>>20;if(Ia(o)||!o.multi){const H=new Zo(I,d,Kh),se=Qc(b,s,d?C:C+L,M);-1===se?(io(Tc(y,g),f,b),In(f,o,s.length),s.push(b),y.directiveStart++,y.directiveEnd++,d&&(y.providerIndexes+=1048576),c.push(H),g.push(H)):(c[se]=H,g[se]=H)}else{const H=Qc(b,s,C+L,M),se=Qc(b,s,C,C+L),Pe=se>=0&&c[se];if(d&&!Pe||!d&&!(H>=0&&c[H])){io(Tc(y,g),f,b);const Je=function je(o,s,c,l,d){const f=new Zo(o,c,Kh);return f.multi=[],f.index=s,f.componentProviders=0,rt(f,d,l&&!c),f}(d?JM:Zt,c.length,d,l,I);!d&&Pe&&(c[se].providerFactory=Je),In(f,o,s.length,0),s.push(b),y.directiveStart++,y.directiveEnd++,d&&(y.providerIndexes+=1048576),c.push(Je),g.push(Je)}else In(f,o,H>-1?H:se,rt(c[d?se:H],I,!d&&l));!d&&l&&Pe&&c[se].componentProviders++}}}function In(o,s,c,l){const d=Ia(s),f=function ax(o){return!!o.useClass}(s);if(d||f){const b=(f?De(s.useClass):s).prototype.ngOnDestroy;if(b){const I=o.destroyHooks||(o.destroyHooks=[]);if(!d&&s.multi){const C=I.indexOf(c);-1===C?I.push(c,[l,b]):I[C+1].push(l,b)}else I.push(c,b)}}}function rt(o,s,c){return c&&o.componentProviders++,o.multi.push(s)-1}function Qc(o,s,c,l){for(let d=c;d<l;d++)if(s[d]===o)return d;return-1}function Zt(o,s,c,l){return On(this.multi,[])}function JM(o,s,c,l){const d=this.multi;let f;if(this.providerFactory){const g=this.providerFactory.componentProviders,y=ga(c,c[Ue],this.providerFactory.index,l);f=y.slice(0,g),On(d,f);for(let b=g;b<y.length;b++)f.push(y[b])}else f=[],On(d,f);return f}function On(o,s){for(let c=0;c<o.length;c++)s.push((0,o[c])());return s}function Nf(o,s=[]){return c=>{c.providersResolver=(l,d)=>function nd(o,s,c){const l=Vt();if(l.firstCreatePass){const d=zt(o);c_(c,l.data,l.blueprint,d,!0),c_(s,l.data,l.blueprint,d,!1)}}(l,d?d(o):o,s)}}class Fs{}class Pa{}function eR(o,s){return new C0(o,s??null,[])}class C0 extends Fs{constructor(s,c,l){super(),this._parent=c,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new ef(this);const d=Sr(s);this._bootstrapComponents=Ms(d.bootstrap),this._r3Injector=BI(s,c,[{provide:Fs,useValue:this},{provide:rg,useValue:this.componentFactoryResolver},...l],he(s),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(s)}get injector(){return this._r3Injector}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(c=>c()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class Xc extends Pa{constructor(s){super(),this.moduleType=s}create(s){return new C0(this.moduleType,s,[])}}class A0 extends Fs{constructor(s){super(),this.componentFactoryResolver=new ef(this),this.instance=null;const c=new Tl([...s.providers,{provide:Fs,useValue:this},{provide:rg,useValue:this.componentFactoryResolver}],s.parent||Dl(),s.debugName,new Set(["environment"]));this.injector=c,s.runEnvironmentInitializers&&c.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(s){this.injector.onDestroy(s)}}function Ii(o,s,c=null){return new A0({providers:o,parent:s,debugName:c,runEnvironmentInitializers:!0}).injector}let S0=(()=>{class o{constructor(c){this._injector=c,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(c){if(!c.standalone)return null;if(!this.cachedInjectors.has(c)){const l=dI(0,c.type),d=l.length>0?Ii([l],this._injector,`Standalone[${c.type.name}]`):null;this.cachedInjectors.set(c,d)}return this.cachedInjectors.get(c)}ngOnDestroy(){try{for(const c of this.cachedInjectors.values())null!==c&&c.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=yn({token:o,providedIn:"environment",factory:()=>new o(ge(Ss))})}return o})();function x0(o){o.getStandaloneInjector=s=>s.get(S0).getOrCreateStandaloneInjector(o)}function kT(){return this._results[Symbol.iterator]()}class d_{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new xs)}constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const c=d_.prototype;c[Symbol.iterator]||(c[Symbol.iterator]=kT)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,c){return this._results.reduce(s,c)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,c){const l=this;l.dirty=!1;const d=function Li(o){return o.flat(Number.POSITIVE_INFINITY)}(s);(this._changesDetected=!function Jy(o,s,c){if(o.length!==s.length)return!1;for(let l=0;l<o.length;l++){let d=o[l],f=s[l];if(c&&(d=c(d),f=c(f)),f!==d)return!1}return!0}(l._results,d,c))&&(l._results=d,l.length=d.length,l.last=d[this.length-1],l.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function vr(o,s,c,l=!0){const d=s[Ue];if(function US(o,s,c,l){const d=fr+l,f=c.length;l>0&&(c[d-1][Yi]=s),l<f-fr?(s[Yi]=c[d],ev(c,fr+l,s)):(c.push(s),s[Yi]=null),s[dn]=c;const g=s[sc];null!==g&&c!==g&&function yv(o,s){const c=o[Go];s[Rn]!==s[dn][dn][Rn]&&(o[bo]=!0),null===c?o[Go]=[s]:c.push(s)}(g,s);const y=s[Mr];null!==y&&y.insertView(o),s[Tt]|=128}(d,s,o,c),l){const f=Ph(c,o),g=s[mt],y=bl(g,o[Oi]);null!==y&&function gv(o,s,c,l,d,f){l[ln]=d,l[xr]=s,Rc(o,l,c,1,d,f)}(d,o[xr],g,s,y,f)}}let fo=(()=>{class o{static#e=this.__NG_ELEMENT_ID__=h_}return o})();const PT=fo,vn=class extends PT{constructor(s,c,l){super(),this._declarationLView=s,this._declarationTContainer=c,this.elementRef=l}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(s,c){return this.createEmbeddedViewImpl(s,c)}createEmbeddedViewImpl(s,c,l){const d=function dR(o,s,c,l){const d=s.tView,y=cb(o,d,c,4096&o[Tt]?4096:16,null,s,null,null,null,l?.injector??null,l?.hydrationInfo??null);y[sc]=o[s.index];const I=o[Mr];return null!==I&&(y[Mr]=I.createEmbeddedView(d)),pb(d,y,c),y}(this._declarationLView,this._declarationTContainer,s,{injector:c,hydrationInfo:l});return new Jh(d)}};function h_(){return Jn(or(),ye())}function Jn(o,s){return 4&o.type?new vn(s,o,Sl(o,s)):null}let po=(()=>{class o{static#e=this.__NG_ELEMENT_ID__=f_}return o})();function f_(){return Us(or(),ye())}const p_=po,id=class extends p_{constructor(s,c,l){super(),this._lContainer=s,this._hostTNode=c,this._hostLView=l}get element(){return Sl(this._hostTNode,this._hostLView)}get injector(){return new E(this._hostTNode,this._hostLView)}get parentInjector(){const s=Ei(this._hostTNode,this._hostLView);if(Ds(s)){const c=wc(s,this._hostLView),l=Co(s);return new E(c[Ue].data[l+8],c)}return new E(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const c=VT(this._lContainer);return null!==c&&c[s]||null}get length(){return this._lContainer.length-fr}createEmbeddedView(s,c,l){let d,f;"number"==typeof l?d=l:null!=l&&(d=l.index,f=l.injector);const y=s.createEmbeddedViewImpl(c||{},f,null);return this.insertImpl(y,d,false),y}createComponent(s,c,l,d,f){const g=s&&!function sl(o){return"function"==typeof o}(s);let y;if(g)y=c;else{const Ee=c||{};y=Ee.index,l=Ee.injector,d=Ee.projectableNodes,f=Ee.environmentInjector||Ee.ngModuleRef}const b=g?s:new Vc(jt(s)),I=l||this.parentInjector;if(!f&&null==b.ngModule){const Pe=(g?I:this.parentInjector).get(Ss,null);Pe&&(f=Pe)}jt(b.componentType??{});const H=b.create(I,d,null,f);return this.insertImpl(H.hostView,y,false),H}insert(s,c){return this.insertImpl(s,c,!1)}insertImpl(s,c,l){const d=s._lView;if(function Wu(o){return Nr(o[dn])}(d)){const b=this.indexOf(s);if(-1!==b)this.detach(b);else{const I=d[dn],C=new id(I,I[xr],I[dn]);C.detach(C.indexOf(s))}}const g=this._adjustIndex(c),y=this._lContainer;return vr(y,d,g,!l),s.attachToViewContainerRef(),ev(Vs(y),g,s),s}move(s,c){return this.insert(s,c)}indexOf(s){const c=VT(this._lContainer);return null!==c?c.indexOf(s):-1}remove(s){const c=this._adjustIndex(s,-1),l=_l(this._lContainer,c);l&&(Eh(Vs(this._lContainer),c),kh(l[Ue],l))}detach(s){const c=this._adjustIndex(s,-1),l=_l(this._lContainer,c);return l&&null!=Eh(Vs(this._lContainer),c)?new Jh(l):null}_adjustIndex(s,c=0){return s??this.length+c}};function VT(o){return o[8]}function Vs(o){return o[8]||(o[8]=[])}function Us(o,s){let c;const l=s[o.index];return Nr(l)?c=l:(c=hg(l,s,null,o),s[o.index]=c,fg(s,c)),Bs(c,s,o,l),new id(c,o,s)}let Bs=function No(o,s,c,l){if(o[Oi])return;let d;d=8&c.type?hn(l):function m_(o,s){const c=o[mt],l=c.createComment(""),d=bi(s,o);return vl(c,bl(c,d),l,function EO(o,s){return o.nextSibling(s)}(c,d),!1),l}(s,c),o[Oi]=d};class g_{constructor(s){this.queryList=s,this.matches=null}clone(){return new g_(this.queryList)}setDirty(){this.queryList.setDirty()}}class Ua{constructor(s=[]){this.queries=s}createEmbeddedView(s){const c=s.queries;if(null!==c){const l=null!==s.contentQueries?s.contentQueries[0]:c.length,d=[];for(let f=0;f<l;f++){const g=c.getByIndex(f);d.push(this.queries[g.indexInDeclarationView].clone())}return new Ua(d)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let c=0;c<this.queries.length;c++)null!==$s(s,c).matches&&this.queries[c].setDirty()}}class __{constructor(s,c,l=null){this.predicate=s,this.flags=c,this.read=l}}class od{constructor(s=[]){this.queries=s}elementStart(s,c){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(s,c)}elementEnd(s){for(let c=0;c<this.queries.length;c++)this.queries[c].elementEnd(s)}embeddedTView(s){let c=null;for(let l=0;l<this.length;l++){const d=null!==c?c.length:0,f=this.getByIndex(l).embeddedTView(s,d);f&&(f.indexInDeclarationView=l,null!==c?c.push(f):c=[f])}return null!==c?new od(c):null}template(s,c){for(let l=0;l<this.queries.length;l++)this.queries[l].template(s,c)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class js{constructor(s,c=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=c}elementStart(s,c){this.isApplyingToNode(c)&&this.matchTNode(s,c)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,c){this.elementStart(s,c)}embeddedTView(s,c){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,c),new js(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const c=this._declarationNodeIndex;let l=s.parent;for(;null!==l&&8&l.type&&l.index!==c;)l=l.parent;return c===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(s,c){const l=this.metadata.predicate;if(Array.isArray(l))for(let d=0;d<l.length;d++){const f=l[d];this.matchTNodeWithReadOption(s,c,k0(c,f)),this.matchTNodeWithReadOption(s,c,ma(c,s,f,!1,!1))}else l===fo?4&c.type&&this.matchTNodeWithReadOption(s,c,-1):this.matchTNodeWithReadOption(s,c,ma(c,s,l,!1,!1))}matchTNodeWithReadOption(s,c,l){if(null!==l){const d=this.metadata.read;if(null!==d)if(d===Gh||d===po||d===fo&&4&c.type)this.addMatch(c.index,-2);else{const f=ma(c,s,d,!1,!1);null!==f&&this.addMatch(c.index,f)}else this.addMatch(c.index,l)}}addMatch(s,c){null===this.matches?this.matches=[s,c]:this.matches.push(s,c)}}function k0(o,s){const c=o.localNames;if(null!==c)for(let l=0;l<c.length;l+=2)if(c[l]===s)return c[l+1];return null}function UT(o,s,c,l){return-1===c?function Bf(o,s){return 11&o.type?Sl(o,s):4&o.type?Jn(o,s):null}(s,o):-2===c?function BT(o,s,c){return c===Gh?Sl(s,o):c===fo?Jn(s,o):c===po?Us(s,o):void 0}(o,s,l):ga(o,o[Ue],c,s)}function jf(o,s,c,l){const d=s[Mr].queries[l];if(null===d.matches){const f=o.data,g=c.matches,y=[];for(let b=0;b<g.length;b+=2){const I=g[b];y.push(I<0?null:UT(s,f[I],g[b+1],c.metadata.read))}d.matches=y}return d.matches}function eu(o,s,c,l){const d=o.queries.getByIndex(c),f=d.matches;if(null!==f){const g=jf(o,s,d,c);for(let y=0;y<f.length;y+=2){const b=f[y];if(b>0)l.push(g[y/2]);else{const I=f[y+1],C=s[-b];for(let M=fr;M<C.length;M++){const L=C[M];L[sc]===L[dn]&&eu(L[Ue],L,I,l)}if(null!==C[Go]){const M=C[Go];for(let L=0;L<M.length;L++){const H=M[L];eu(H[Ue],H,I,l)}}}}}return l}function O0(o){const s=ye(),c=Vt(),l=yc();uh(l+1);const d=$s(c,l);if(o.dirty&&function Uy(o){return 4==(4&o[Tt])}(s)===(2==(2&d.metadata.flags))){if(null===d.matches)o.reset([]);else{const f=d.crossesNgTemplate?eu(c,s,l,[]):jf(c,s,d,l);o.reset(f,RI),o.notifyOnChanges()}return!0}return!1}function jT(o,s,c,l){const d=Vt();if(d.firstCreatePass){const f=or();(function F0(o,s,c){null===o.queries&&(o.queries=new od),o.queries.track(new js(s,c))})(d,new __(s,c,l),f.index),function Dn(o,s){const c=o.contentQueries||(o.contentQueries=[]);s!==(c.length?c[c.length-1]:-1)&&c.push(o.queries.length-1,s)}(d,o),2==(2&c)&&(d.staticContentQueries=!0)}!function br(o,s,c){const l=new d_(4==(4&c));(function sP(o,s,c,l){const d=iD(s);d.push(c),o.firstCreatePass&&Ml(o).push(l,d.length-1)})(o,s,l,l.destroy),null===s[Mr]&&(s[Mr]=new Ua),s[Mr].queries.push(new g_(l))}(d,ye(),c)}function P0(){return function $T(o,s){return o[Mr].queries[s].queryList}(ye(),yc())}function $s(o,s){return o.queries.getByIndex(s)}function $f(o){return!!Sr(o)}const j0=new Xt("Application Initializer");let ld=(()=>{class o{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,l)=>{this.resolve=c,this.reject=l}),this.appInits=We(j0,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const c=[];for(const d of this.appInits){const f=d();if(Lg(f))c.push(f);else if(Vg(f)){const g=new Promise((y,b)=>{f.subscribe({complete:y,error:b})});c.push(g)}}const l=()=>{this.done=!0,this.resolve()};Promise.all(c).then(()=>{l()}).catch(d=>{this.reject(d)}),0===c.length&&l(),this.initialized=!0}static#e=this.\u0275fac=function(l){return new(l||o)};static#t=this.\u0275prov=yn({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})(),oC=(()=>{class o{log(c){console.log(c)}warn(c){console.warn(c)}static#e=this.\u0275fac=function(l){return new(l||o)};static#t=this.\u0275prov=yn({token:o,factory:o.\u0275fac,providedIn:"platform"})}return o})();const Kf=new Xt("LocaleId",{providedIn:"root",factory:()=>We(Kf,Ge.Optional|Ge.SkipSelf)||function TR(){return typeof $localize<"u"&&$localize.locale||Kc}()}),dd=new Xt("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let $0=(()=>{class o{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new V.X(!1)}add(){this.hasPendingTasks.next(!0);const c=this.taskId++;return this.pendingTasks.add(c),c}remove(c){this.pendingTasks.delete(c),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(l){return new(l||o)};static#t=this.\u0275prov=yn({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();class fd{constructor(s,c){this.ngModuleFactory=s,this.componentFactories=c}}let sC=(()=>{class o{compileModuleSync(c){return new Xc(c)}compileModuleAsync(c){return Promise.resolve(this.compileModuleSync(c))}compileModuleAndAllComponentsSync(c){const l=this.compileModuleSync(c),f=Ms(Sr(c).declarations).reduce((g,y)=>{const b=jt(y);return b&&g.push(new Vc(b)),g},[]);return new fd(l,f)}compileModuleAndAllComponentsAsync(c){return Promise.resolve(this.compileModuleAndAllComponentsSync(c))}clearCache(){}clearCacheFor(c){}getModuleId(c){}static#e=this.\u0275fac=function(l){return new(l||o)};static#t=this.\u0275prov=yn({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();const Qf=new Xt(""),K0=new Xt("");let Xf,NR=(()=>{class o{constructor(c,l,d){this._ngZone=c,this.registry=l,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Xf||(function hC(o){Xf=o}(d),d.addToWindow(l)),this._watchAngularEvents(),c.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Wn.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let c=this._callbacks.pop();clearTimeout(c.timeoutId),c.doneCb(this._didWork)}this._didWork=!1});else{let c=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(c)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(c=>({source:c.source,creationLocation:c.creationLocation,data:c.data})):[]}addCallback(c,l,d){let f=-1;l&&l>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(g=>g.timeoutId!==f),c(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:c,timeoutId:f,updateCb:d})}whenStable(c,l,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(c,l,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(c){this.registry.registerApplication(c,this)}unregisterApplication(c){this.registry.unregisterApplication(c)}findProviders(c,l,d){return[]}static#e=this.\u0275fac=function(l){return new(l||o)(ge(Wn),ge(Z0),ge(K0))};static#t=this.\u0275prov=yn({token:o,factory:o.\u0275fac})}return o})(),Z0=(()=>{class o{constructor(){this._applications=new Map}registerApplication(c,l){this._applications.set(c,l)}unregisterApplication(c){this._applications.delete(c)}unregisterAllApplications(){this._applications.clear()}getTestability(c){return this._applications.get(c)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(c,l=!0){return Xf?.findTestabilityInTree(this,c,l)??null}static#e=this.\u0275fac=function(l){return new(l||o)};static#t=this.\u0275prov=yn({token:o,factory:o.\u0275fac,providedIn:"platform"})}return o})(),mo=null;const gd=new Xt("AllowMultipleToken"),ou=new Xt("PlatformDestroyListeners"),_d=new Xt("appBootstrapListener");class pC{constructor(s,c){this.name=s,this.token=c}}function _C(o,s,c=[]){const l=`Platform: ${s}`,d=new Xt(l);return(f=[])=>{let g=X0();if(!g||g.injector.get(gd,!1)){const y=[...c,...f,{provide:d,useValue:!0}];o?o(y):function mC(o){if(mo&&!mo.get(gd,!1))throw new Ye(400,!1);(function Y0(){!function Py(o){Zp=o}(()=>{throw new Ye(600,!1)})})(),mo=o;const s=o.get($n);(function gC(o){o.get(bI,null)?.forEach(c=>c())})(o)}(function su(o=[],s){return Ao.create({name:s,providers:[{provide:gI,useValue:"platform"},{provide:ou,useValue:new Set([()=>mo=null])},...o]})}(y,l))}return function Q0(o){const s=X0();if(!s)throw new Ye(401,!1);return s}()}}function X0(){return mo?.get($n)??null}let $n=(()=>{class o{constructor(c){this._injector=c,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(c,l){const d=function yC(o="zone.js",s){return"noop"===o?new GI:"zone.js"===o?new Wn(s):o}(l?.ngZone,function N_(o){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:o?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:o?.runCoalescing??!1}}({eventCoalescing:l?.ngZoneEventCoalescing,runCoalescing:l?.ngZoneRunCoalescing}));return d.run(()=>{const f=function ET(o,s,c){return new C0(o,s,c)}(c.moduleType,this.injector,function EC(o){return[{provide:Wn,useFactory:o},{provide:Lh,multi:!0,useFactory:()=>{const s=We(bC,{optional:!0});return()=>s.initialize()}},{provide:J0,useFactory:vC},{provide:qI,useFactory:Dx}]}(()=>d)),g=f.injector.get(Ta,null);return d.runOutsideAngular(()=>{const y=d.onError.subscribe({next:b=>{g.handleError(b)}});f.onDestroy(()=>{Jf(this._modules,f),y.unsubscribe()})}),function yd(o,s,c){try{const l=c();return Lg(l)?l.catch(d=>{throw s.runOutsideAngular(()=>o.handleError(d)),d}):l}catch(l){throw s.runOutsideAngular(()=>o.handleError(l)),l}}(g,d,()=>{const y=f.injector.get(ld);return y.runInitializers(),y.donePromise.then(()=>(function Af(o){An(o,"Expected localeId to be defined"),"string"==typeof o&&(f0=o.toLowerCase().replace(/_/g,"-"))}(f.injector.get(Kf,Kc)||Kc),this._moduleDoBootstrap(f),f))})})}bootstrapModule(c,l=[]){const d=Po({},l);return function fC(o,s,c){const l=new Xc(c);return Promise.resolve(l)}(0,0,c).then(f=>this.bootstrapModuleFactory(f,d))}_moduleDoBootstrap(c){const l=c.injector.get(Ba);if(c._bootstrapComponents.length>0)c._bootstrapComponents.forEach(d=>l.bootstrap(d));else{if(!c.instance.ngDoBootstrap)throw new Ye(-403,!1);c.instance.ngDoBootstrap(l)}this._modules.push(c)}onDestroy(c){this._destroyListeners.push(c)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ye(404,!1);this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l());const c=this._injector.get(ou,null);c&&(c.forEach(l=>l()),c.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(l){return new(l||o)(ge(Ao))};static#t=this.\u0275prov=yn({token:o,factory:o.\u0275fac,providedIn:"platform"})}return o})();function Po(o,s){return Array.isArray(s)?s.reduce(Po,o):{...o,...s}}let Ba=(()=>{class o{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=We(J0),this.zoneIsStable=We(qI),this.componentTypes=[],this.components=[],this.isStable=We($0).hasPendingTasks.pipe((0,at.w)(c=>c?(0,F.of)(!1):this.zoneIsStable),function ft(o,s=ze.y){return o=o??ct,(0,Ne.e)((c,l)=>{let d,f=!0;c.subscribe((0,Ae.x)(l,g=>{const y=s(g);(f||!o(d,y))&&(f=!1,d=y,l.next(g))}))})}(),we()),this._injector=We(Ss)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(c,l){const d=c instanceof MI;if(!this._injector.get(ld).done)throw!d&&zo(c),new Ye(405,!1);let g;g=d?c:this._injector.get(rg).resolveComponentFactory(c),this.componentTypes.push(g.componentType);const y=function OR(o){return o.isBoundToModule}(g)?void 0:this._injector.get(Fs),I=g.create(Ao.NULL,[],l||g.selector,y),C=I.location.nativeElement,M=I.injector.get(Qf,null);return M?.registerApplication(C),I.onDestroy(()=>{this.detachView(I.hostView),Jf(this.components,I),M?.unregisterApplication(C)}),this._loadComponent(I),I}tick(){if(this._runningTick)throw new Ye(101,!1);try{this._runningTick=!0;for(let c of this._views)c.detectChanges()}catch(c){this.internalErrorHandler(c)}finally{this._runningTick=!1}}attachView(c){const l=c;this._views.push(l),l.attachToAppRef(this)}detachView(c){const l=c;Jf(this._views,l),l.detachFromAppRef()}_loadComponent(c){this.attachView(c.hostView),this.tick(),this.components.push(c);const l=this._injector.get(_d,[]);l.push(...this._bootstrapListeners),l.forEach(d=>d(c))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(c=>c()),this._views.slice().forEach(c=>c.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(c){return this._destroyListeners.push(c),()=>Jf(this._destroyListeners,c)}destroy(){if(this._destroyed)throw new Ye(406,!1);const c=this._injector;c.destroy&&!c.destroyed&&c.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(l){return new(l||o)};static#t=this.\u0275prov=yn({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();function Jf(o,s){const c=o.indexOf(s);c>-1&&o.splice(c,1)}const J0=new Xt("",{providedIn:"root",factory:()=>We(Ta).handleError.bind(void 0)});function vC(){const o=We(Wn),s=We(Ta);return c=>o.runOutsideAngular(()=>s.handleError(c))}let bC=(()=>{class o{constructor(){this.zone=We(Wn),this.applicationRef=We(Ba)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(l){return new(l||o)};static#t=this.\u0275prov=yn({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();function eE(){return!1}let VR=(()=>{class o{static#e=this.__NG_ELEMENT_ID__=IC}return o})();function IC(o){return function UR(o,s,c){if(vs(o)&&!c){const l=fi(o.index,s);return new Jh(l,l)}return 47&o.type?new Jh(s[Rn],s):null}(or(),ye(),16==(16&o))}class AC{constructor(){}supports(s){return tf(s)}create(s){return new xC(s)}}const SC=(o,s)=>s;class xC{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||SC}forEachItem(s){let c;for(c=this._itHead;null!==c;c=c._next)s(c)}forEachOperation(s){let c=this._itHead,l=this._removalsHead,d=0,f=null;for(;c||l;){const g=!l||c&&c.currentIndex<MC(l,d,f)?c:l,y=MC(g,d,f),b=g.currentIndex;if(g===l)d--,l=l._nextRemoved;else if(c=c._next,null==g.previousIndex)d++;else{f||(f=[]);const I=y-d,C=b-d;if(I!=C){for(let L=0;L<I;L++){const H=L<f.length?f[L]:f[L]=0,se=H+L;C<=se&&se<I&&(f[L]=H+1)}f[g.previousIndex]=C-I}}y!==b&&s(g,y,b)}}forEachPreviousItem(s){let c;for(c=this._previousItHead;null!==c;c=c._nextPrevious)s(c)}forEachAddedItem(s){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)s(c)}forEachMovedItem(s){let c;for(c=this._movesHead;null!==c;c=c._nextMoved)s(c)}forEachRemovedItem(s){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)s(c)}forEachIdentityChange(s){let c;for(c=this._identityChangesHead;null!==c;c=c._nextIdentityChange)s(c)}diff(s){if(null==s&&(s=[]),!tf(s))throw new Ye(900,!1);return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let d,f,g,c=this._itHead,l=!1;if(Array.isArray(s)){this.length=s.length;for(let y=0;y<this.length;y++)f=s[y],g=this._trackByFn(y,f),null!==c&&Object.is(c.trackById,g)?(l&&(c=this._verifyReinsertion(c,f,g,y)),Object.is(c.item,f)||this._addIdentityChange(c,f)):(c=this._mismatch(c,f,g,y),l=!0),c=c._next}else d=0,function dM(o,s){if(Array.isArray(o))for(let c=0;c<o.length;c++)s(o[c]);else{const c=o[Symbol.iterator]();let l;for(;!(l=c.next()).done;)s(l.value)}}(s,y=>{g=this._trackByFn(d,y),null!==c&&Object.is(c.trackById,g)?(l&&(c=this._verifyReinsertion(c,y,g,d)),Object.is(c.item,y)||this._addIdentityChange(c,y)):(c=this._mismatch(c,y,g,d),l=!0),c=c._next,d++}),this.length=d;return this._truncate(c),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,c,l,d){let f;return null===s?f=this._itTail:(f=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(s.item,c)||this._addIdentityChange(s,c),this._reinsertAfter(s,f,d)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(l,d))?(Object.is(s.item,c)||this._addIdentityChange(s,c),this._moveAfter(s,f,d)):s=this._addAfter(new O_(c,l),f,d),s}_verifyReinsertion(s,c,l,d){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==f?s=this._reinsertAfter(f,s._prev,d):s.currentIndex!=d&&(s.currentIndex=d,this._addToMoves(s,d)),s}_truncate(s){for(;null!==s;){const c=s._next;this._addToRemovals(this._unlink(s)),s=c}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,c,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const d=s._prevRemoved,f=s._nextRemoved;return null===d?this._removalsHead=f:d._nextRemoved=f,null===f?this._removalsTail=d:f._prevRemoved=d,this._insertAfter(s,c,l),this._addToMoves(s,l),s}_moveAfter(s,c,l){return this._unlink(s),this._insertAfter(s,c,l),this._addToMoves(s,l),s}_addAfter(s,c,l){return this._insertAfter(s,c,l),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,c,l){const d=null===c?this._itHead:c._next;return s._next=d,s._prev=c,null===d?this._itTail=s:d._prev=s,null===c?this._itHead=s:c._next=s,null===this._linkedRecords&&(this._linkedRecords=new $a),this._linkedRecords.put(s),s.currentIndex=l,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const c=s._prev,l=s._next;return null===c?this._itHead=l:c._next=l,null===l?this._itTail=c:l._prev=c,s}_addToMoves(s,c){return s.previousIndex===c||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new $a),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,c){return s.item=c,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class O_{constructor(s,c){this.item=s,this.trackById=c,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class ip{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,c){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===c||c<=l.currentIndex)&&Object.is(l.trackById,s))return l;return null}remove(s){const c=s._prevDup,l=s._nextDup;return null===c?this._head=l:c._nextDup=l,null===l?this._tail=c:l._prevDup=c,null===this._head}}class $a{constructor(){this.map=new Map}put(s){const c=s.trackById;let l=this.map.get(c);l||(l=new ip,this.map.set(c,l)),l.add(s)}get(s,c){const d=this.map.get(s);return d?d.get(s,c):null}remove(s){const c=s.trackById;return this.map.get(c).remove(s)&&this.map.delete(c),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function MC(o,s,c){const l=o.previousIndex;if(null===l)return l;let d=0;return c&&l<c.length&&(d=c[l]),l+s+d}class nE{constructor(){}supports(s){return s instanceof Map||vD(s)}create(){return new zR}}class zR{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let c;for(c=this._mapHead;null!==c;c=c._next)s(c)}forEachPreviousItem(s){let c;for(c=this._previousMapHead;null!==c;c=c._nextPrevious)s(c)}forEachChangedItem(s){let c;for(c=this._changesHead;null!==c;c=c._nextChanged)s(c)}forEachAddedItem(s){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)s(c)}forEachRemovedItem(s){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)s(c)}diff(s){if(s){if(!(s instanceof Map||vD(s)))throw new Ye(900,!1)}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let c=this._mapHead;if(this._appendAfter=null,this._forEach(s,(l,d)=>{if(c&&c.key===d)this._maybeAddToChanges(c,l),this._appendAfter=c,c=c._next;else{const f=this._getOrCreateRecordForKey(d,l);c=this._insertBeforeOrAppend(c,f)}}),c){c._prev&&(c._prev._next=null),this._removalsHead=c;for(let l=c;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,c){if(s){const l=s._prev;return c._next=s,c._prev=l,s._prev=c,l&&(l._next=c),s===this._mapHead&&(this._mapHead=c),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=c,c._prev=this._appendAfter):this._mapHead=c,this._appendAfter=c,null}_getOrCreateRecordForKey(s,c){if(this._records.has(s)){const d=this._records.get(s);this._maybeAddToChanges(d,c);const f=d._prev,g=d._next;return f&&(f._next=g),g&&(g._prev=f),d._next=null,d._prev=null,d}const l=new GR(s);return this._records.set(s,l),l.currentValue=c,this._addToAdditions(l),l}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,c){Object.is(c,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=c,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,c){s instanceof Map?s.forEach(c):Object.keys(s).forEach(l=>c(s[l],l))}}class GR{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function RC(){return new lu([new AC])}let lu=(()=>{class o{static#e=this.\u0275prov=yn({token:o,providedIn:"root",factory:RC});constructor(c){this.factories=c}static create(c,l){if(null!=l){const d=l.factories.slice();c=c.concat(d)}return new o(c)}static extend(c){return{provide:o,useFactory:l=>o.create(c,l||RC()),deps:[[o,new Dh,new wm]]}}find(c){const l=this.factories.find(d=>d.supports(c));if(null!=l)return l;throw new Ye(901,!1)}}return o})();function Ws(){return new P_([new nE])}let P_=(()=>{class o{static#e=this.\u0275prov=yn({token:o,providedIn:"root",factory:Ws});constructor(c){this.factories=c}static create(c,l){if(l){const d=l.factories.slice();c=c.concat(d)}return new o(c)}static extend(c){return{provide:o,useFactory:l=>o.create(c,l||Ws()),deps:[[o,new Dh,new wm]]}}find(c){const l=this.factories.find(d=>d.supports(c));if(l)return l;throw new Ye(901,!1)}}return o})();const rE=_C(null,"core",[]);let OC=(()=>{class o{constructor(c){}static#e=this.\u0275fac=function(l){return new(l||o)(ge(Ba))};static#t=this.\u0275mod=Up({type:o});static#n=this.\u0275inj=Ot({})}return o})();function UC(o){return"boolean"==typeof o?o:null!=o&&"false"!==o}function XR(o){const s=jt(o);if(!s)return null;const c=new Vc(s);return{get selector(){return c.selector},get type(){return c.componentType},get inputs(){return c.inputs},get outputs(){return c.outputs},get ngContentSelectors(){return c.ngContentSelectors},get isStandalone(){return s.standalone},get isSignal(){return s.signals}}}},3106:(ot,ve,R)=>{R.d(ve,{Z:()=>Ke});var p=R(9058),z=R(4537),B=R(534),Q=R(7879);class K{constructor(ze,Ae){this._delegate=ze,this.firebase=Ae,(0,B._addComponent)(ze,new z.wA("app-compat",()=>this,"PUBLIC")),this.container=ze.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ze){this._delegate.automaticDataCollectionEnabled=ze}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ze=>{this._delegate.checkDestroyed(),ze()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,B.deleteApp)(this._delegate)))}_getService(ze,Ae=B._DEFAULT_ENTRY_NAME){var ft;this._delegate.checkDestroyed();const ct=this._delegate.container.getProvider(ze);return!ct.isInitialized()&&"EXPLICIT"===(null===(ft=ct.getComponent())||void 0===ft?void 0:ft.instantiationMode)&&ct.initialize(),ct.getImmediate({identifier:Ae})}_removeServiceInstance(ze,Ae=B._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ze).clearInstance(Ae)}_addComponent(ze){(0,B._addComponent)(this._delegate,ze)}_addOrOverwriteComponent(ze){(0,B._addOrOverwriteComponent)(this._delegate,ze)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const fe=new p.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),V=function ce(){const at=function Ce(at){const ze={},Ae={__esModule:!0,initializeApp:function ue(xe,Oe={}){const De=B.initializeApp(xe,Oe);if((0,p.r3)(ze,De.name))return ze[De.name];const Et=new at(De,Ae);return ze[De.name]=Et,Et},app:ct,registerVersion:B.registerVersion,setLogLevel:B.setLogLevel,onLog:B.onLog,apps:null,SDK_VERSION:B.SDK_VERSION,INTERNAL:{registerComponent:function he(xe){const Oe=xe.name,De=Oe.replace("-compat","");if(B._registerComponent(xe)&&"PUBLIC"===xe.type){const Et=(zn=ct())=>{if("function"!=typeof zn[De])throw fe.create("invalid-app-argument",{appName:Oe});return zn[De]()};void 0!==xe.serviceProps&&(0,p.ZB)(Et,xe.serviceProps),Ae[De]=Et,at.prototype[De]=function(...zn){return this._getService.bind(this,Oe).apply(this,xe.multipleInstances?zn:[])}}return"PUBLIC"===xe.type?Ae[De]:null},removeApp:function ft(xe){delete ze[xe]},useAsService:function ke(xe,Oe){return"serverAuth"===Oe?null:Oe},modularAPIs:B}};function ct(xe){if(!(0,p.r3)(ze,xe=xe||B._DEFAULT_ENTRY_NAME))throw fe.create("no-app",{appName:xe});return ze[xe]}return Ae.default=Ae,Object.defineProperty(Ae,"apps",{get:function Ie(){return Object.keys(ze).map(xe=>ze[xe])}}),ct.App=at,Ae}(K);return at.INTERNAL=Object.assign(Object.assign({},at.INTERNAL),{createFirebaseNamespace:ce,extendNamespace:function ze(Ae){(0,p.ZB)(at,Ae)},createSubscribe:p.ne,ErrorFactory:p.LL,deepExtend:p.ZB}),at}(),F=new Q.Yd("@firebase/app-compat");if((0,p.jU)()&&void 0!==self.firebase){F.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const at=self.firebase.SDK_VERSION;at&&at.indexOf("LITE")>=0&&F.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ke=V;!function we(at){(0,B.registerVersion)("@firebase/app-compat","0.2.13",at)}()},534:(ot,ve,R)=>{R.r(ve),R.d(ve,{FirebaseError:()=>Q.ZR,SDK_VERSION:()=>$o,_DEFAULT_ENTRY_NAME:()=>rr,_addComponent:()=>Tr,_addOrOverwriteComponent:()=>li,_apps:()=>wt,_clearComponents:()=>sn,_components:()=>Br,_getProvider:()=>Sn,_registerComponent:()=>jr,_removeServiceInstance:()=>ps,deleteApp:()=>an,getApp:()=>$r,getApps:()=>ta,initializeApp:()=>Qn,onLog:()=>Mi,registerVersion:()=>yi,setLogLevel:()=>Ho});var p=R(5861),z=R(4537),B=R(7879),Q=R(9058);const K=(te,G)=>G.some(ge=>te instanceof ge);let de,fe;const V=new WeakMap,F=new WeakMap,J=new WeakMap,Ne=new WeakMap,we=new WeakMap;let ze={get(te,G,ge){if(te instanceof IDBTransaction){if("done"===G)return F.get(te);if("objectStoreNames"===G)return te.objectStoreNames||J.get(te);if("store"===G)return ge.objectStoreNames[1]?void 0:ge.objectStore(ge.objectStoreNames[0])}return ue(te[G])},set:(te,G,ge)=>(te[G]=ge,!0),has:(te,G)=>te instanceof IDBTransaction&&("done"===G||"store"===G)||G in te};function ct(te){return"function"==typeof te?function ft(te){return te!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ce(){return fe||(fe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(te)?function(...G){return te.apply(Ie(this),G),ue(V.get(this))}:function(...G){return ue(te.apply(Ie(this),G))}:function(G,...ge){const tt=te.call(Ie(this),G,...ge);return J.set(tt,G.sort?G.sort():[G]),ue(tt)}}(te):(te instanceof IDBTransaction&&function at(te){if(F.has(te))return;const G=new Promise((ge,tt)=>{const We=()=>{te.removeEventListener("complete",Dt),te.removeEventListener("error",Kt),te.removeEventListener("abort",Kt)},Dt=()=>{ge(),We()},Kt=()=>{tt(te.error||new DOMException("AbortError","AbortError")),We()};te.addEventListener("complete",Dt),te.addEventListener("error",Kt),te.addEventListener("abort",Kt)});F.set(te,G)}(te),K(te,function Ce(){return de||(de=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(te,ze):te)}function ue(te){if(te instanceof IDBRequest)return function Ke(te){const G=new Promise((ge,tt)=>{const We=()=>{te.removeEventListener("success",Dt),te.removeEventListener("error",Kt)},Dt=()=>{ge(ue(te.result)),We()},Kt=()=>{tt(te.error),We()};te.addEventListener("success",Dt),te.addEventListener("error",Kt)});return G.then(ge=>{ge instanceof IDBCursor&&V.set(ge,te)}).catch(()=>{}),we.set(G,te),G}(te);if(Ne.has(te))return Ne.get(te);const G=ct(te);return G!==te&&(Ne.set(te,G),we.set(G,te)),G}const Ie=te=>we.get(te),xe=["get","getKey","getAll","getAllKeys","count"],Oe=["put","add","delete","clear"],De=new Map;function Et(te,G){if(!(te instanceof IDBDatabase)||G in te||"string"!=typeof G)return;if(De.get(G))return De.get(G);const ge=G.replace(/FromIndex$/,""),tt=G!==ge,We=Oe.includes(ge);if(!(ge in(tt?IDBIndex:IDBObjectStore).prototype)||!We&&!xe.includes(ge))return;const Dt=function(){var Kt=(0,p.Z)(function*(Mn,...Gn){const gs=this.transaction(Mn,We?"readwrite":"readonly");let tc=gs.store;return tt&&(tc=tc.index(Gn.shift())),(yield Promise.all([tc[ge](...Gn),We&&gs.done]))[0]});return function(Gn){return Kt.apply(this,arguments)}}();return De.set(G,Dt),Dt}!function Ae(te){ze=te(ze)}(te=>({...te,get:(G,ge,tt)=>Et(G,ge)||te.get(G,ge,tt),has:(G,ge)=>!!Et(G,ge)||te.has(G,ge)}));class zn{constructor(G){this.container=G}getPlatformInfoString(){return this.container.getProviders().map(ge=>{if(function si(te){const G=te.getComponent();return"VERSION"===G?.type}(ge)){const tt=ge.getImmediate();return`${tt.library}/${tt.version}`}return null}).filter(ge=>ge).join(" ")}}const ai="@firebase/app",nr=new B.Yd("@firebase/app"),rr="[DEFAULT]",Ot={[ai]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},wt=new Map,Br=new Map;function Tr(te,G){try{te.container.addComponent(G)}catch(ge){nr.debug(`Component ${G.name} failed to register with FirebaseApp ${te.name}`,ge)}}function li(te,G){te.container.addOrOverwriteComponent(G)}function jr(te){const G=te.name;if(Br.has(G))return nr.debug(`There were multiple attempts to register component ${G}.`),!1;Br.set(G,te);for(const ge of wt.values())Tr(ge,te);return!0}function Sn(te,G){const ge=te.container.getProvider("heartbeat").getImmediate({optional:!0});return ge&&ge.triggerHeartbeat(),te.container.getProvider(G)}function ps(te,G,ge=rr){Sn(te,G).clearInstance(ge)}function sn(){Br.clear()}const Ge=new Q.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class ms{constructor(G,ge,tt){this._isDeleted=!1,this._options=Object.assign({},G),this._config=Object.assign({},ge),this._name=ge.name,this._automaticDataCollectionEnabled=ge.automaticDataCollectionEnabled,this._container=tt,this.container.addComponent(new z.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(G){this.checkDestroyed(),this._automaticDataCollectionEnabled=G}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(G){this._isDeleted=G}checkDestroyed(){if(this.isDeleted)throw Ge.create("app-deleted",{appName:this._name})}}const $o="9.23.0";function Qn(te,G={}){let ge=te;"object"!=typeof G&&(G={name:G});const tt=Object.assign({name:rr,automaticDataCollectionEnabled:!1},G),We=tt.name;if("string"!=typeof We||!We)throw Ge.create("bad-app-name",{appName:String(We)});if(ge||(ge=(0,Q.aH)()),!ge)throw Ge.create("no-options");const Dt=wt.get(We);if(Dt){if((0,Q.vZ)(ge,Dt.options)&&(0,Q.vZ)(tt,Dt.config))return Dt;throw Ge.create("duplicate-app",{appName:We})}const Kt=new z.H0(We);for(const Gn of Br.values())Kt.addComponent(Gn);const Mn=new ms(ge,tt,Kt);return wt.set(We,Mn),Mn}function $r(te=rr){const G=wt.get(te);if(!G&&te===rr&&(0,Q.aH)())return Qn();if(!G)throw Ge.create("no-app",{appName:te});return G}function ta(){return Array.from(wt.values())}function an(te){return xi.apply(this,arguments)}function xi(){return(xi=(0,p.Z)(function*(te){const G=te.name;wt.has(G)&&(wt.delete(G),yield Promise.all(te.container.getProviders().map(ge=>ge.delete())),te.isDeleted=!0)})).apply(this,arguments)}function yi(te,G,ge){var tt;let We=null!==(tt=Ot[te])&&void 0!==tt?tt:te;ge&&(We+=`-${ge}`);const Dt=We.match(/\s|\//),Kt=G.match(/\s|\//);if(Dt||Kt){const Mn=[`Unable to register library "${We}" with version "${G}":`];return Dt&&Mn.push(`library name "${We}" contains illegal characters (whitespace or "/")`),Dt&&Kt&&Mn.push("and"),Kt&&Mn.push(`version name "${G}" contains illegal characters (whitespace or "/")`),void nr.warn(Mn.join(" "))}jr(new z.wA(`${We}-version`,()=>({library:We,version:G}),"VERSION"))}function Mi(te,G){if(null!==te&&"function"!=typeof te)throw Ge.create("invalid-log-argument");(0,B.Am)(te,G)}function Ho(te){(0,B.Ub)(te)}const Ri="firebase-heartbeat-database",_o=1,P="firebase-heartbeat-store";let k=null;function j(){return k||(k=function he(te,G,{blocked:ge,upgrade:tt,blocking:We,terminated:Dt}={}){const Kt=indexedDB.open(te,G),Mn=ue(Kt);return tt&&Kt.addEventListener("upgradeneeded",Gn=>{tt(ue(Kt.result),Gn.oldVersion,Gn.newVersion,ue(Kt.transaction),Gn)}),ge&&Kt.addEventListener("blocked",Gn=>ge(Gn.oldVersion,Gn.newVersion,Gn)),Mn.then(Gn=>{Dt&&Gn.addEventListener("close",()=>Dt()),We&&Gn.addEventListener("versionchange",gs=>We(gs.oldVersion,gs.newVersion,gs))}).catch(()=>{}),Mn}(Ri,_o,{upgrade:(te,G)=>{0===G&&te.createObjectStore(P)}}).catch(te=>{throw Ge.create("idb-open",{originalErrorMessage:te.message})})),k}function Y(){return(Y=(0,p.Z)(function*(te){try{return yield(yield j()).transaction(P).objectStore(P).get(Ft(te))}catch(G){if(G instanceof Q.ZR)nr.warn(G.message);else{const ge=Ge.create("idb-get",{originalErrorMessage:G?.message});nr.warn(ge.message)}}})).apply(this,arguments)}function Xe(te,G){return _t.apply(this,arguments)}function _t(){return(_t=(0,p.Z)(function*(te,G){try{const tt=(yield j()).transaction(P,"readwrite");yield tt.objectStore(P).put(G,Ft(te)),yield tt.done}catch(ge){if(ge instanceof Q.ZR)nr.warn(ge.message);else{const tt=Ge.create("idb-set",{originalErrorMessage:ge?.message});nr.warn(tt.message)}}})).apply(this,arguments)}function Ft(te){return`${te.name}!${te.options.appId}`}class Hr{constructor(G){this.container=G,this._heartbeatsCache=null;const ge=this.container.getProvider("app").getImmediate();this._storage=new Ni(ge),this._heartbeatsCachePromise=this._storage.read().then(tt=>(this._heartbeatsCache=tt,tt))}triggerHeartbeat(){var G=this;return(0,p.Z)(function*(){const tt=G.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),We=Bt();if(null===G._heartbeatsCache&&(G._heartbeatsCache=yield G._heartbeatsCachePromise),G._heartbeatsCache.lastSentHeartbeatDate!==We&&!G._heartbeatsCache.heartbeats.some(Dt=>Dt.date===We))return G._heartbeatsCache.heartbeats.push({date:We,agent:tt}),G._heartbeatsCache.heartbeats=G._heartbeatsCache.heartbeats.filter(Dt=>{const Kt=new Date(Dt.date).valueOf();return Date.now()-Kt<=2592e6}),G._storage.overwrite(G._heartbeatsCache)})()}getHeartbeatsHeader(){var G=this;return(0,p.Z)(function*(){if(null===G._heartbeatsCache&&(yield G._heartbeatsCachePromise),null===G._heartbeatsCache||0===G._heartbeatsCache.heartbeats.length)return"";const ge=Bt(),{heartbeatsToSend:tt,unsentEntries:We}=function Cr(te,G=1024){const ge=[];let tt=te.slice();for(const We of te){const Dt=ge.find(Kt=>Kt.agent===We.agent);if(Dt){if(Dt.dates.push(We.date),di(ge)>G){Dt.dates.pop();break}}else if(ge.push({agent:We.agent,dates:[We.date]}),di(ge)>G){ge.pop();break}tt=tt.slice(1)}return{heartbeatsToSend:ge,unsentEntries:tt}}(G._heartbeatsCache.heartbeats),Dt=(0,Q.L)(JSON.stringify({version:2,heartbeats:tt}));return G._heartbeatsCache.lastSentHeartbeatDate=ge,We.length>0?(G._heartbeatsCache.heartbeats=We,yield G._storage.overwrite(G._heartbeatsCache)):(G._heartbeatsCache.heartbeats=[],G._storage.overwrite(G._heartbeatsCache)),Dt})()}}function Bt(){return(new Date).toISOString().substring(0,10)}class Ni{constructor(G){this.app=G,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,p.Z)(function*(){return!!(0,Q.hl)()&&(0,Q.eu)().then(()=>!0).catch(()=>!1)})()}read(){var G=this;return(0,p.Z)(function*(){return(yield G._canUseIndexedDBPromise)&&(yield function pe(te){return Y.apply(this,arguments)}(G.app))||{heartbeats:[]}})()}overwrite(G){var ge=this;return(0,p.Z)(function*(){var tt;if(yield ge._canUseIndexedDBPromise){const Dt=yield ge.read();return Xe(ge.app,{lastSentHeartbeatDate:null!==(tt=G.lastSentHeartbeatDate)&&void 0!==tt?tt:Dt.lastSentHeartbeatDate,heartbeats:G.heartbeats})}})()}add(G){var ge=this;return(0,p.Z)(function*(){var tt;if(yield ge._canUseIndexedDBPromise){const Dt=yield ge.read();return Xe(ge.app,{lastSentHeartbeatDate:null!==(tt=G.lastSentHeartbeatDate)&&void 0!==tt?tt:Dt.lastSentHeartbeatDate,heartbeats:[...Dt.heartbeats,...G.heartbeats]})}})()}}function di(te){return(0,Q.L)(JSON.stringify({version:2,heartbeats:te})).length}!function ec(te){jr(new z.wA("platform-logger",G=>new zn(G),"PRIVATE")),jr(new z.wA("heartbeat",G=>new Hr(G),"PRIVATE")),yi(ai,"0.9.13",te),yi(ai,"0.9.13","esm2017"),yi("fire-js","")}("")},4537:(ot,ve,R)=>{R.d(ve,{H0:()=>Ce,wA:()=>B});var p=R(5861),z=R(9058);class B{constructor(V,F,J){this.name=V,this.instanceFactory=F,this.type=J,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(V){return this.instantiationMode=V,this}setMultipleInstances(V){return this.multipleInstances=V,this}setServiceProps(V){return this.serviceProps=V,this}setInstanceCreatedCallback(V){return this.onInstanceCreated=V,this}}const Q="[DEFAULT]";class K{constructor(V,F){this.name=V,this.container=F,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(V){const F=this.normalizeInstanceIdentifier(V);if(!this.instancesDeferred.has(F)){const J=new z.BH;if(this.instancesDeferred.set(F,J),this.isInitialized(F)||this.shouldAutoInitialize())try{const Ne=this.getOrInitializeService({instanceIdentifier:F});Ne&&J.resolve(Ne)}catch{}}return this.instancesDeferred.get(F).promise}getImmediate(V){var F;const J=this.normalizeInstanceIdentifier(V?.identifier),Ne=null!==(F=V?.optional)&&void 0!==F&&F;if(!this.isInitialized(J)&&!this.shouldAutoInitialize()){if(Ne)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:J})}catch(we){if(Ne)return null;throw we}}getComponent(){return this.component}setComponent(V){if(V.name!==this.name)throw Error(`Mismatching Component ${V.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=V,this.shouldAutoInitialize()){if(function fe(ce){return"EAGER"===ce.instantiationMode}(V))try{this.getOrInitializeService({instanceIdentifier:Q})}catch{}for(const[F,J]of this.instancesDeferred.entries()){const Ne=this.normalizeInstanceIdentifier(F);try{const we=this.getOrInitializeService({instanceIdentifier:Ne});J.resolve(we)}catch{}}}}clearInstance(V=Q){this.instancesDeferred.delete(V),this.instancesOptions.delete(V),this.instances.delete(V)}delete(){var V=this;return(0,p.Z)(function*(){const F=Array.from(V.instances.values());yield Promise.all([...F.filter(J=>"INTERNAL"in J).map(J=>J.INTERNAL.delete()),...F.filter(J=>"_delete"in J).map(J=>J._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(V=Q){return this.instances.has(V)}getOptions(V=Q){return this.instancesOptions.get(V)||{}}initialize(V={}){const{options:F={}}=V,J=this.normalizeInstanceIdentifier(V.instanceIdentifier);if(this.isInitialized(J))throw Error(`${this.name}(${J}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ne=this.getOrInitializeService({instanceIdentifier:J,options:F});for(const[we,Ke]of this.instancesDeferred.entries())J===this.normalizeInstanceIdentifier(we)&&Ke.resolve(Ne);return Ne}onInit(V,F){var J;const Ne=this.normalizeInstanceIdentifier(F),we=null!==(J=this.onInitCallbacks.get(Ne))&&void 0!==J?J:new Set;we.add(V),this.onInitCallbacks.set(Ne,we);const Ke=this.instances.get(Ne);return Ke&&V(Ke,Ne),()=>{we.delete(V)}}invokeOnInitCallbacks(V,F){const J=this.onInitCallbacks.get(F);if(J)for(const Ne of J)try{Ne(V,F)}catch{}}getOrInitializeService({instanceIdentifier:V,options:F={}}){let J=this.instances.get(V);if(!J&&this.component&&(J=this.component.instanceFactory(this.container,{instanceIdentifier:(ce=V,ce===Q?void 0:ce),options:F}),this.instances.set(V,J),this.instancesOptions.set(V,F),this.invokeOnInitCallbacks(J,V),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,V,J)}catch{}var ce;return J||null}normalizeInstanceIdentifier(V=Q){return this.component?this.component.multipleInstances?V:Q:V}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Ce{constructor(V){this.name=V,this.providers=new Map}addComponent(V){const F=this.getProvider(V.name);if(F.isComponentSet())throw new Error(`Component ${V.name} has already been registered with ${this.name}`);F.setComponent(V)}addOrOverwriteComponent(V){this.getProvider(V.name).isComponentSet()&&this.providers.delete(V.name),this.addComponent(V)}getProvider(V){if(this.providers.has(V))return this.providers.get(V);const F=new K(V,this);return this.providers.set(V,F),F}getProviders(){return Array.from(this.providers.values())}}},7879:(ot,ve,R)=>{R.d(ve,{Am:()=>ce,Ub:()=>Ce,Yd:()=>fe,in:()=>z});const p=[];var z=function(V){return V[V.DEBUG=0]="DEBUG",V[V.VERBOSE=1]="VERBOSE",V[V.INFO=2]="INFO",V[V.WARN=3]="WARN",V[V.ERROR=4]="ERROR",V[V.SILENT=5]="SILENT",V}(z||{});const B={debug:z.DEBUG,verbose:z.VERBOSE,info:z.INFO,warn:z.WARN,error:z.ERROR,silent:z.SILENT},Q=z.INFO,K={[z.DEBUG]:"log",[z.VERBOSE]:"log",[z.INFO]:"info",[z.WARN]:"warn",[z.ERROR]:"error"},de=(V,F,...J)=>{if(F<V.logLevel)return;const Ne=(new Date).toISOString(),we=K[F];if(!we)throw new Error(`Attempted to log a message with an invalid logType (value: ${F})`);console[we](`[${Ne}]  ${V.name}:`,...J)};class fe{constructor(F){this.name=F,this._logLevel=Q,this._logHandler=de,this._userLogHandler=null,p.push(this)}get logLevel(){return this._logLevel}set logLevel(F){if(!(F in z))throw new TypeError(`Invalid value "${F}" assigned to \`logLevel\``);this._logLevel=F}setLogLevel(F){this._logLevel="string"==typeof F?B[F]:F}get logHandler(){return this._logHandler}set logHandler(F){if("function"!=typeof F)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=F}get userLogHandler(){return this._userLogHandler}set userLogHandler(F){this._userLogHandler=F}debug(...F){this._userLogHandler&&this._userLogHandler(this,z.DEBUG,...F),this._logHandler(this,z.DEBUG,...F)}log(...F){this._userLogHandler&&this._userLogHandler(this,z.VERBOSE,...F),this._logHandler(this,z.VERBOSE,...F)}info(...F){this._userLogHandler&&this._userLogHandler(this,z.INFO,...F),this._logHandler(this,z.INFO,...F)}warn(...F){this._userLogHandler&&this._userLogHandler(this,z.WARN,...F),this._logHandler(this,z.WARN,...F)}error(...F){this._userLogHandler&&this._userLogHandler(this,z.ERROR,...F),this._logHandler(this,z.ERROR,...F)}}function Ce(V){p.forEach(F=>{F.setLogLevel(V)})}function ce(V,F){for(const J of p){let Ne=null;F&&F.level&&(Ne=B[F.level]),J.userLogHandler=null===V?null:(we,Ke,...at)=>{const ze=at.map(Ae=>{if(null==Ae)return null;if("string"==typeof Ae)return Ae;if("number"==typeof Ae||"boolean"==typeof Ae)return Ae.toString();if(Ae instanceof Error)return Ae.message;try{return JSON.stringify(Ae)}catch{return null}}).filter(Ae=>Ae).join(" ");Ke>=(Ne??we.logLevel)&&V({level:z[Ke].toLowerCase(),message:ze,args:at,type:we.name})}}}},3182:(ot,ve,R)=>{R.d(ve,{C6:()=>p.getApps,KN:()=>p.registerVersion,Mq:()=>p.getApp,ZF:()=>p.initializeApp});var p=R(534);(0,p.registerVersion)("firebase","9.23.0","app")},7142:(ot,ve,R)=>{R.d(ve,{Z:()=>p.Z});var p=R(3106);p.Z.registerVersion("firebase","9.23.0","app-compat")},5861:(ot,ve,R)=>{function p(B,Q,K,de,fe,Ce,ce){try{var V=B[Ce](ce),F=V.value}catch(J){return void K(J)}V.done?Q(F):Promise.resolve(F).then(de,fe)}function z(B){return function(){var Q=this,K=arguments;return new Promise(function(de,fe){var Ce=B.apply(Q,K);function ce(F){p(Ce,de,fe,ce,V,"next",F)}function V(F){p(Ce,de,fe,ce,V,"throw",F)}ce(void 0)})}}R.d(ve,{Z:()=>z})},7582:(ot,ve,R)=>{function Q(ee,ie){var le={};for(var ae in ee)Object.prototype.hasOwnProperty.call(ee,ae)&&ie.indexOf(ae)<0&&(le[ae]=ee[ae]);if(null!=ee&&"function"==typeof Object.getOwnPropertySymbols){var _e=0;for(ae=Object.getOwnPropertySymbols(ee);_e<ae.length;_e++)ie.indexOf(ae[_e])<0&&Object.prototype.propertyIsEnumerable.call(ee,ae[_e])&&(le[ae[_e]]=ee[ae[_e]])}return le}function J(ee,ie,le,ae){return new(le||(le=Promise))(function(Se,st){function Ht(Yt){try{pt(ae.next(Yt))}catch(En){st(En)}}function cn(Yt){try{pt(ae.throw(Yt))}catch(En){st(En)}}function pt(Yt){Yt.done?Se(Yt.value):function _e(Se){return Se instanceof le?Se:new le(function(st){st(Se)})}(Yt.value).then(Ht,cn)}pt((ae=ae.apply(ee,ie||[])).next())})}function ue(ee){return this instanceof ue?(this.v=ee,this):new ue(ee)}function Ie(ee,ie,le){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var _e,ae=le.apply(ee,ie||[]),Se=[];return _e={},st("next"),st("throw"),st("return"),_e[Symbol.asyncIterator]=function(){return this},_e;function st(_n){ae[_n]&&(_e[_n]=function(hr){return new Promise(function(ci,on){Se.push([_n,hr,ci,on])>1||Ht(_n,hr)})})}function Ht(_n,hr){try{!function cn(_n){_n.value instanceof ue?Promise.resolve(_n.value.v).then(pt,Yt):En(Se[0][2],_n)}(ae[_n](hr))}catch(ci){En(Se[0][3],ci)}}function pt(_n){Ht("next",_n)}function Yt(_n){Ht("throw",_n)}function En(_n,hr){_n(hr),Se.shift(),Se.length&&Ht(Se[0][0],Se[0][1])}}function ke(ee){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var le,ie=ee[Symbol.asyncIterator];return ie?ie.call(ee):(ee=function at(ee){var ie="function"==typeof Symbol&&Symbol.iterator,le=ie&&ee[ie],ae=0;if(le)return le.call(ee);if(ee&&"number"==typeof ee.length)return{next:function(){return ee&&ae>=ee.length&&(ee=void 0),{value:ee&&ee[ae++],done:!ee}}};throw new TypeError(ie?"Object is not iterable.":"Symbol.iterator is not defined.")}(ee),le={},ae("next"),ae("throw"),ae("return"),le[Symbol.asyncIterator]=function(){return this},le);function ae(Se){le[Se]=ee[Se]&&function(st){return new Promise(function(Ht,cn){!function _e(Se,st,Ht,cn){Promise.resolve(cn).then(function(pt){Se({value:pt,done:Ht})},st)}(Ht,cn,(st=ee[Se](st)).done,st.value)})}}}R.d(ve,{FC:()=>Ie,KL:()=>ke,_T:()=>Q,mG:()=>J,qq:()=>ue}),"function"==typeof SuppressedError&&SuppressedError}},ot=>{ot(ot.s=9284)}]);